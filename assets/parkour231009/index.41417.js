window.__require=function e(o,a,t){function r(n,s){if(!a[n]){if(!o[n]){var c=n.split("/");if(c=c[c.length-1],!o[c]){var p="function"==typeof __require&&__require;if(!s&&p)return p(c,!0);if(i)return i(c,!0);throw new Error("Cannot find module '"+n+"'")}n=c}var l=a[n]={exports:{}};o[n][0].call(l.exports,function(e){return r(o[n][1][e]||e)},l,l.exports,e,o,a,t)}return a[n].exports}for(var i="function"==typeof __require&&__require,n=0;n<t.length;n++)r(t[n]);return r}({ParkourCoinLayer:[function(e,o){"use strict";cc._RF.push(o,"6e1fabJKrdAlrg7tPrcSoT8","ParkourCoinLayer");var a=e("GameControl");cc.Class({extends:cc.Component,properties:{coinPre:cc.Prefab},onLoad:function(){a.parkourCoinLayerJs=this},start:function(){},init:function(){this.pullIng=!1},createCoin:function(e,o){var t;0==o&&((t=new cc.Node).parent=this.node,t.setPosition(cc.v2(0,0)),t.name=e.name);for(var r=e.getChildByName("coin"),i=0;i<3;i++)for(var n=r.children[i],s=0;s<n.childrenCount;s++){var c=cc.instantiate(this.coinPre),p=void 0,l=n.children[s];0==o?(c.parent=t,p=cc.v2(l.x+e.x,n.y)):(c.parent=a.curScene.rewardCoinLayerNode,p=cc.v2(l.x,n.y)),c.setPosition(p)}}}),cc._RF.pop()},{GameControl:void 0}],ParkourCoin:[function(e,o){"use strict";cc._RF.push(o,"b842a5A5fpAMaaO3l8eIUb3","ParkourCoin");var a=e("GameControl");cc.Class({extends:cc.Component,properties:{},start:function(){this.coverIng=!1,this.moveSpeed=60},update:function(){if(!a.curScene.gamePause&&!a.curScene.rewardPause){var e=this.node.convertToWorldSpaceAR(cc.v2(0,0)),o=a.curScene.node.convertToNodeSpaceAR(e),t=o.x-a.parkourPlayerJs.node.x;if((a.parkourCoinLayerJs.pullIng||this.coverIng)&&this.node.opacity>0&&Math.abs(t)<=500&&o.y<540){this.coverIng=!0;var r=a.parkourPlayerJs.node.getPosition(),i=Math.abs(o.x-r.x),n=Math.abs(o.y-r.y),s=Math.sqrt(Math.pow(i,2)+Math.pow(n,2)),c=this.moveSpeed*i/s,p=this.moveSpeed*n/s;o.x>=r.x?this.node.x-=c:this.node.x+=c,o.y>=r.y?this.node.y-=p:this.node.y+=p}}}}),cc._RF.pop()},{GameControl:void 0}],ParkourMapLayer:[function(e,o){"use strict";cc._RF.push(o,"aad90LXmNBHSae13NfO1f4t","ParkourMapLayer");var a=e("GameControl");cc.Class({extends:cc.Component,properties:{newUserMapPre:cc.Prefab,mapPreArr:{type:cc.Prefab,default:[]},easyMapPreArr:{type:cc.Prefab,default:[]},shortFloor:cc.Node,longFloor:cc.Node},onLoad:function(){a.parkourMapLayerJs=this,this.mapMaxArr=[]},start:function(){},init:function(){this.loadMap()},loadMap:function(){var e=[16524,16524,16524,16524],o=[2916,2916,2430];this.mapRandromArr=[0,1,2],this.mapRandromArr.sort(function(){return.5-Math.random()}),this.mapRandromArr[3]=3;var t=0,r=[];if(0==a.curScene.newUser){var i=cc.instantiate(this.newUserMapPre);i.parent=this.node,i.setPosition(cc.v2(0,0)),t=6318,a.parkourObstacleLayerJs.createObstacle(i)}for(var n=1;n<5;n++)if(console.log("i="+n),1==a.curScene.levelNum&&4!=n){var s=this.mapRandromArr[n-1],c=cc.instantiate(this.easyMapPreArr[s]);c.parent=this.node,c.name="map"+(this.mapRandromArr[n-1]+1).toString(),r.push(c),c.setPosition(cc.v2(t,0)),t+=o[s],this.mapMaxArr[n]=t}else{var p=this.mapRandromArr[n-1],l=cc.instantiate(this.mapPreArr[p]);l.parent=this.node,r.push(l),l.setPosition(cc.v2(t,0)),t+=e[p],this.mapMaxArr[n]=t}a.parkourPropLayerJs.createProp(r[0]),a.parkourPropLayerJs.createProp(r[2]),a.parkourObstacleLayerJs.createObstacle(r[0]),a.parkourCoinLayerJs.createCoin(r[0],0),this.mapIndex=1,a.curScene.mapMaxX=t-946,console.log("GameControl.curScene.mapMaxX="+a.curScene.mapMaxX),a.curScene.smallMapSpeed=536/((t+230-a.curScene.winSizeWidth/2)/a.curScene.bgMoveSpeed)},loadCoinAndObstacle:function(){if(!(this.mapIndex>=4)){this.mapIndex++;var e="map"+(this.mapRandromArr[this.mapIndex-1]+1).toString(),o=this.node.getChildByName(e);a.parkourObstacleLayerJs.createObstacle(o),a.parkourCoinLayerJs.createCoin(o,0)}},repairFloor:function(){for(var e=0;e<this.node.childrenCount;e++)if("map"==this.node.children[e].name.substr(0,3)){for(var o=this.node.children[e].getChildByName("floor03"),t=this.node.children[e].getChildByName("obstacle").getChildByName("obstacle_3_01"),r=0;r<o.childrenCount;r++){var i=o.children[r];if(!i.getComponent(cc.Sprite).spriteFrame){var n=i.convertToWorldSpaceAR(cc.v2(0,0)),s=a.curScene.node.convertToNodeSpaceAR(n);Math.abs(a.parkourPlayerJs.node.x-(s.x-i.width/2))<1500&&((i.width+1>this.longFloor.width?cc.instantiate(this.longFloor):cc.instantiate(this.shortFloor)).parent=i)}}for(var c=0;c<t.childrenCount;c++){var p=t.children[c];if("obstacle"!=p.name){var l=p.convertToWorldSpaceAR(cc.v2(0,0)),d=a.curScene.node.convertToNodeSpaceAR(l);Math.abs(a.parkourPlayerJs.node.x-(d.x-p.width/2))<1500&&(p.active=!1)}}}}}),cc._RF.pop()},{GameControl:void 0}],ParkourObstacleLayer:[function(e,o){"use strict";cc._RF.push(o,"bb498cvxvtBH4wVTpyKNd7q","ParkourObstacleLayer");var a=e("EngineCommon"),t=e("GameControl");cc.Class({extends:cc.Component,properties:{obstaclePreArr:{type:cc.Prefab,default:[]},rocketPre:cc.Prefab},onLoad:function(){t.parkourObstacleLayerJs=this},start:function(){},init:function(){this.rocketIng=!1,this.obstacleTypeLen=this.obstaclePreArr.length},createObstacle:function(e){var o=new cc.Node;o.parent=this.node,o.setPosition(cc.v2(0,0)),o.name=e.name;for(var a=e.getChildByName("obstacle"),t=0;t<3;t++)for(var r=a.children[t],i=0;i<r.childrenCount;i++){var n=r.children[i];if("obstacle_4"!=n.name){var s=Math.floor(Math.random()*this.obstacleTypeLen),c=cc.instantiate(this.obstaclePreArr[s]);c.parent=o;var p=cc.v2(n.x+e.x,r.y);c.setPosition(p)}}},obstacle_Drop:function(e,o){var r=e.node,i=o.node;3==o.tag?(console.log("\u6700\u4e0b\u5c42"),r.y>i.parent.y&&(a.spineAnimationPlay(t.parkourPlayerJs.palyerSpine,"paoku-fall"),t.curScene.openFailPanelNode())):4==o.tag?(console.log("\u4e2d\u95f4\u5c42"),r.y>i.parent.y&&t.parkourPlayerJs.player_Down()):5==o.tag&&(console.log("\u6700\u4e0a\u5c42"),r.y>i.parent.y&&t.parkourPlayerJs.player_Down()),t.parkourPlayerJs.dropIng=!1}}),cc._RF.pop()},{EngineCommon:void 0,GameControl:void 0}],ParkourObstacle:[function(e,o){"use strict";cc._RF.push(o,"5de51S1l5lBeKhn0H0FK4CU","ParkourObstacle");var a=e("GameControl");cc.Class({extends:cc.Component,properties:{skel:sp.Skeleton,bombType:1},start:function(){this.attackIng=!1,this.attackEnd=!1,this.moveSpeed=15,this.rocketNode=null},update:function(){if(!a.curScene.gamePause&&!a.curScene.rewardPause&&(a.parkourObstacleLayerJs.rocketIng||this.attackIng)){var e=this.node.convertToWorldSpaceAR(cc.v2(0,0)),o=a.curScene.node.convertToNodeSpaceAR(e),t=(o=cc.v2(o.x,o.y+this.node.height/2)).x-a.parkourPlayerJs.node.x;if(t<1500&&t>60&&!this.attackEnd||this.attackIng){if(this.attackIng=!0,null==this.rocketNode){var r=a.parkourPlayerJs.node.getPosition();this.rocketNode=cc.instantiate(a.parkourObstacleLayerJs.rocketPre);var i=Math.floor(3*Math.random()),n=[cc.find("Particle-yellow",this.rocketNode),cc.find("Particle-green",this.rocketNode),cc.find("Particle-red",this.rocketNode)];n[i].y=0,n[i].active=!0,n[(i+1)%3].active=!1,n[(i+2)%3].active=!1,this.rocketNode.parent=a.curScene.rocketLayerNode,this.rocketNode.position=r}var s=Math.abs(o.x-this.rocketNode.x),c=Math.abs(o.y-this.rocketNode.y),p=Math.sqrt(Math.pow(s,2)+Math.pow(c,2)),l=this.moveSpeed*s/p,d=this.moveSpeed*c/p,u=Math.round(180*Math.asin(c/p)/Math.PI),h=!1;this.rocketNode.x>=o.x?(this.rocketNode.x-=l,this.rocketNode.scaleX=-1,h=!0):this.rocketNode.x+=l,h&&(u=-u),this.rocketNode.y>=o.y?(this.rocketNode.y-=d,this.rocketNode.angle=-u):(this.rocketNode.y+=d,this.rocketNode.angle=u)}}},onCollisionEnter:function(e){0==e.tag&&(this.attackEnd=!0,this.node.getComponent(cc.BoxCollider).enabled=!1,this.skel.setAnimation(0,"baozha"+this.bombType,!1),this.rocketNode&&(this.attackIng=!1,this.rocketNode.destroy()))}}),cc._RF.pop()},{GameControl:void 0}],ParkourPlayer:[function(e,o){"use strict";cc._RF.push(o,"847ddU1CsBDUoQuNovIC+jT","ParkourPlayer");var a=e("GameControl"),t=e("EngineCommon");cc.Class({extends:cc.Component,properties:{palyerSpine:sp.Skeleton,pullAniNode:cc.Node,glowAniNode:cc.Node},onLoad:function(){a.parkourPlayerJs=this},start:function(){this.playerPos=1,this.playerState="RUN",this.playerMoveSpeed=16,t.spineAnimationPlay(this.palyerSpine,"paoku-Idle",!0)},player_Up:function(){a.curScene.playParkourJumpOrDown(),this.playerPos++,this.playerMoveSpeed=16,this.playerState="UP",this.upState=!0,this.nodePosY=this.node.y,t.spineAnimationPlay(this.palyerSpine,"paoku-up")},player_Down:function(){this.playerPos>1&&(this.playerPos--,a.curScene.playParkourJumpOrDown(),this.playerMoveSpeed=16,this.playerState="DOWN",this.nodePosY=this.node.y,t.spineAnimationPlay(this.palyerSpine,"paoku-down"))},update:function(){var e;a.curScene.gamePause||a.curScene.rewardPause||(e=a.parkourPropLayerJs.rocketTimer>0?"paoku-cuihui":a.parkourPropLayerJs.pullTimer>0?"paoku-citie":"paoku-Idle","UP"==this.playerState?4==this.playerPos?this.upState?(this.node.y+=this.playerMoveSpeed,this.node.y>=this.nodePosY+320+32&&(this.upState=!1)):(this.node.y-=this.playerMoveSpeed,this.node.y<=this.nodePosY&&(this.node.y=this.nodePosY,this.playerPos=3,this.playerState="RUN",t.spineAnimationPlay(this.palyerSpine,e,!0),this.dropIng&&a.parkourObstacleLayerJs.obstacle_Drop(this.selfCollision,this.otherCollision))):this.upState?(this.node.y+=this.playerMoveSpeed,this.node.y>=this.nodePosY+320+96&&(this.upState=!1)):(this.node.y-=this.playerMoveSpeed,this.playerMoveSpeed+=.32,this.node.y<=this.nodePosY+320&&(this.node.y=this.nodePosY+320,this.playerState="RUN",t.spineAnimationPlay(this.palyerSpine,e,!0),this.dropIng&&a.parkourObstacleLayerJs.obstacle_Drop(this.selfCollision,this.otherCollision))):"DOWN"==this.playerState&&(this.node.y-=this.playerMoveSpeed,this.playerMoveSpeed+=.32,this.node.y<=this.nodePosY-320&&(this.node.y=this.nodePosY-320,this.playerState="RUN",t.spineAnimationPlay(this.palyerSpine,e,!0),a.curScene.node.emit("guide",2),this.dropIng&&a.parkourObstacleLayerJs.obstacle_Drop(this.selfCollision,this.otherCollision))))},IsCollision:function(){},onCollisionEnter:function(e,o){a.curScene.gamePause||("coin"==e.node.name&&0==e.tag?(a.curScene.playCoinSound(),a.curScene.updateCoin(a.curScene.coinLabel,1),e.node.opacity=0):"pull"==e.node.name&&0==e.tag?a.parkourPropLayerJs.prop_Pull(o,e):"rocket"==e.node.name&&0==e.tag?a.parkourPropLayerJs.prop_Rocket(o,e):"special"==e.node.name&&0==e.tag?a.parkourPropLayerJs.prop_Special(o,e):1==o.tag?3!=e.tag&&4!=e.tag&&5!=e.tag||(this.otherCollision=e,this.selfCollision=o,"RUN"==this.playerState&&a.parkourObstacleLayerJs.obstacle_Drop(this.selfCollision,this.otherCollision)):3!=e.tag&&4!=e.tag&&5!=e.tag&&(a.curScene.openFailPanelNode(),t.spineAnimationPlay(this.palyerSpine,"paoku-fall")))},onCollisionStay:function(e,o){1==o.tag&&(this.otherCollision=e,this.selfCollision=o,this.dropIng=!0)},onCollisionExit:function(e,o){1==o.tag&&(this.dropIng=!1)},rocketProp:function(e,o){var t=cc.instantiate(this.rocketPre);t.parent=a.curScene.rocketLayerNode,t.position=this.node.getPosition(),cc.tween(t).to(2,{position:o}).call(function(){}).start()}}),cc._RF.pop()},{EngineCommon:void 0,GameControl:void 0}],ParkourPropLayer:[function(e,o){"use strict";cc._RF.push(o,"eee736RVnJOVrMs2RJ/RlRm","ParkourPropLayer");var a=e("GameControl");cc.Class({extends:cc.Component,properties:{propPreArr:{type:cc.Prefab,default:[]}},onLoad:function(){a.parkourPropLayerJs=this,this.prop_randNum=Math.floor(2*Math.random())},start:function(){},createProp:function(e){if(e&&e.getChildByName("prop")){this.prop_randNum=0==this.prop_randNum?1:0;var o=e.getChildByName("prop").getChildByName("commonProp"),a=cc.instantiate(this.propPreArr[this.prop_randNum]);a.parent=o,a.x=0}},prop_Pull:function(e,o){cc.find("player",a.parkourPlayerJs.node).getComponent(sp.Skeleton).setAnimation(0,"paoku-citie",!0),a.parkourCoinLayerJs.pullIng=!0,this.pullTimer=0,o&&o.node.destroy()},prop_PullEnd:function(){cc.find("player",a.parkourPlayerJs.node).getComponent(sp.Skeleton).setAnimation(0,"paoku-Idle",!0),a.parkourCoinLayerJs.pullIng=!1},prop_Rocket:function(e,o){cc.find("player",a.parkourPlayerJs.node).getComponent(sp.Skeleton).setAnimation(0,"paoku-cuihui",!0),a.parkourObstacleLayerJs.rocketIng=!0,this.rocketTimer=0,o&&console.log("prop_Rocket="+o.node.name),o&&o.node.destroy()},prop_RocketEnd:function(){cc.find("player",a.parkourPlayerJs.node).getComponent(sp.Skeleton).setAnimation(0,"paoku-Idle",!0),a.parkourObstacleLayerJs.rocketIng=!1},prop_Special:function(e,o){a.parkourObstacleLayerJs.specialIng=!0,a.curScene.startRewardMap(o.node)},update:function(e){a.curScene.gamePause||a.curScene.rewardPause||(a.parkourObstacleLayerJs.rocketIng&&(e=e>1?.016:e,this.rocketTimer+=e,this.rocketTimer>=6&&(this.rocketTimer=0,this.prop_RocketEnd())),a.parkourCoinLayerJs.pullIng&&(e=e>1?.016:e,this.pullTimer+=e,this.pullTimer>=6&&(this.pullTimer=0,this.prop_PullEnd())))}}),cc._RF.pop()},{GameControl:void 0}],Parkour:[function(e,o){"use strict";cc._RF.push(o,"8f2cegNreBB6b9f2+6Sn8Pz","Parkour");var a=e("GameControl"),t=e("GameCommon"),r=e("AudioModule"),i=e("StorageModule"),n=e("StatisticsModule"),s=e("LanguageModule"),c=e("LoadResModule"),p=e("LogCommon"),l=e("AdInfo"),d=e("EngineCommon");cc.Class({extends:cc.Component,properties:{UINode:cc.Node,cameraNode:cc.Node,cloudBgNode2:cc.Node,seaBgNode:cc.Node,btnPauseNode:cc.Node,startPosNode:cc.Node,startPosNode1:cc.Node,startGamePanelNode:cc.Node,panelHolder:cc.Node,blockNode:cc.Node,map5Node:cc.Node,rewardCoinLayerNode:cc.Node,coinLabel:cc.Label,levelLabel:cc.Label,smallMapDisLabel:cc.Label,smallMapPosNode:cc.Node,rocketLayerNode:cc.Node,maskBgNode:cc.Node,guideNode:cc.Node,bellLabel:cc.Label},onLoad:function(){var e=this;a.curScene=this,lastSceneIndex=sceneIndex,sceneIndex=a.SceneName.parkour,t.handleEventPerScene(),d.enableCollide(),this.newUser=parseInt(i.getData("parkour_newUser",0)),this.newUserNumFlag=0,this.node.on("guide",function(o){e.guideFunc(o)}),this.node.on(cc.Node.EventType.TOUCH_START,this.touchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.touchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.touchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.touchEnd,this),n.sceneStart("Parkour")},onDestroy:function(){n.sceneEnd(),a.curScene=null},start:function(){this.initData(),this.initCat(),this.initUI(),this.initRemindPanel(),this.initSize(),this.adHandle(),this.initPush(),a.hideLoadingPanel(),n.eventStatistics("parkourLevelStart"+this.levelNum)},initData:function(){this.winSizeWidth=cc.winSize.width,this.cloudMoveDisNum2=0,this.seaBgMoveDisNum=0,this.gamePause=!0,this.levelMove=!0,this.rewardMove=!1,this.rewardPause=!1,this.rewardOver=!1,this.bgMoveSpeed=16,this.afterMoveSpeed=5,this.seaBgMoveSpeed=5,this.seaMapLoopLen=3659,this.mapMaxX=0,this.isCanTouch=!0,this.coinNum=0,this.smallMapDis=0,this.smallMapSpeed=0,this.countSmallDis=0,this.rewardEndX=this.map5Node.getChildByName("\u95e8").x,this.levelNum=parseInt(i.getData("parkourLevel",1)),this.rocketNum=parseInt(i.getData("parkourRocketNum",1)),this.pullNum=parseInt(i.getData("parkourPullNum",1)),a.bellNum=i.getData("bellNum",0),0==this.rocketNum&&(this.newUser=3,i.setData("parkour_newUser",this.newUser))},initCat:function(){var e=a.getLocalDressUp(a.curCatName,-1),o=d.newSkeletonData(a.skeletonData),t=a.parkourPlayerJs.palyerSpine;t.skeletonData=o,t.setSkin(a.curCatName),t.setAnimation(0,"paoku-Idle",!0),a.initDressUp(t,e)},initUI:function(){this.updateCoin(this.coinLabel);var e=s.translateString("\u5173\u5361");this.levelLabel.getComponent(cc.Label).string=e+this.levelNum,this.initPropNum(),a.parkourObstacleLayerJs.init(),a.parkourMapLayerJs.init(),a.parkourCoinLayerJs.init(),this.startGame()},updateCoin:function(e,o){void 0===o&&(o=0),o>0&&(this.coinNum=parseInt(this.coinNum)+o),e&&(e.string=this.coinNum.toString())},initRemindPanel:function(){var e=this,o=a.parkourPlayerJs.palyerSpine.skeletonData;c.getBundleRes(a.gameBundle,"prefabs/miniGameRemindPanel",function(a){var t=cc.instantiate(a);t.active=!1,t.parent=e.panelHolder,t.position=cc.v2(0,0),e.panelCtrl=t.getComponent("MiniGameRemindPanel"),e.panelCtrl.initPanel(o)},cc.Prefab)},initSize:function(){cc.winSize.width/cc.winSize.height<1.5&&(this.UINode.getChildByName("gameProgress").x-=100,this.UINode.getChildByName("tools").scale=.7,this.UINode.getChildByName("tools").getComponent(cc.Widget).left-=100,this.startPosNode.x+=150,a.parkourPlayerJs.palyerSpine.node.x+=150);var e=cc.winSize.width/2-1425,o=cc.winSize.width/2-946;a.parkourObstacleLayerJs.node.x-=e,a.parkourMapLayerJs.node.x-=e,a.parkourCoinLayerJs.node.x-=e,a.parkourPropLayerJs.node.x-=e,this.map5Node.x-=o,this.rewardCoinLayerNode.x-=o},adHandle:function(){var e;isHasAd&&(bannerShowFlag[sceneIndex]?l.adsManager.showBanner():l.adsManager.hideBanner(),e=lastSceneIndex==sceneIndex?"parkour-replay":"parkour",l.adsManager.showInterVideo(e),"wx"==channel&&l.adsManager.hideCustomAd())},initPush:function(){},initPropNum:function(){cc.find("tools",this.UINode).active=isHasAd,this.rocketUINode=cc.find("tools/rocketBtn",this.UINode);var e=cc.find("tools/pullBtn",this.UINode);this.rocketAddNode=cc.find("labelBottom/add",this.rocketUINode),this.pullAddNode=cc.find("labelBottom/add",e),this.rocketNumNode=cc.find("labelBottom/num",this.rocketUINode),this.pullNumNode=cc.find("labelBottom/num",e),1==this.rocketNum&&(this.rocketAddNode.active=!1,this.rocketNumNode.active=!0),1==this.pullNum&&(this.pullAddNode.active=!1,this.pullNumNode.active=!0),this.rocketNumNode.getComponent(cc.Label).string=this.rocketNum,this.pullNumNode.getComponent(cc.Label).string=this.pullNum},startGame:function(){var e=this;this.startGamePanelNode.active=!0;var o=this.startGamePanelNode.getChildByName("bottom").getComponent(cc.Animation);o.play(),o.on("finished",function(){e.startGamePanelNode.active=!1,e.gamePause=!1},this)},touchStart:function(e){"UP"!=a.parkourPlayerJs.playerState&&"DOWN"!=a.parkourPlayerJs.playerState&&(this.startPos=e.touch.getLocation())},touchMove:function(e){if("UP"!=a.parkourPlayerJs.playerState&&"DOWN"!=a.parkourPlayerJs.playerState){var o=e.touch.getLocation().y-this.startPos.y;this.guidePlayer(o),this.rewardPause||this.gamePause||this.newUser<=1||!this.isCanTouch||Math.abs(o)>50&&(this.isCanTouch=!1,o>0?a.parkourPlayerJs.player_Up():a.parkourPlayerJs.player_Down())}},touchEnd:function(){this.isCanTouch=!0},guidePlayer:function(e){this.newUser>1||!this.guideNode.active||Math.abs(e)>50&&(0==this.newUser&&e>0?(a.parkourPlayerJs.player_Up(),this.newUser++,this.guideNode.active=!1,this.gamePause=!1):1==this.newUser&&e<0&&(a.parkourPlayerJs.player_Down(),this.newUser++,this.guideNode.active=!1,this.gamePause=!1))},guideFunc:function(e){if(this.newUser<=2){var o=this.guideNode.getChildByName("Mask"),a=o.children[0],t=this.guideNode.getChildByName("hand"),r=this.guideNode.getChildByName("block");if(0==e)this.gamePause=!0,this.guideNode.active=!0,t.getComponent(cc.Animation).play("parkourHandUp");else if(1==e)this.gamePause=!0,this.guideNode.active=!0,o.y=0,a.y=0,t.getComponent(cc.Animation).play("parkourHandDown");else if(2==e&&1==this.rocketNum)if(isHasAd){this.gamePause=!0,this.guideNode.active=!0,o.width=150,o.height=150;var n=this.rocketUINode.convertToWorldSpaceAR(cc.v2(0,0)),s=this.guideNode.convertToNodeSpaceAR(n);o.position=s,a.position=cc.v2(-s.x,-s.y),t.position=s,t.getComponent(cc.Animation).play("hand"),r.active=!1,a.getComponent(cc.BlockInputEvents).enabled=!0}else 2==this.newUser&&(this.newUser++,i.setData("parkour_newUser",this.newUser))}},update:function(){if(this.rewardMove&&!this.rewardPause)if(this.map5Node.x>-(this.rewardEndX-this.winSizeWidth/4)){if(this.map5Node.x-=this.bgMoveSpeed,this.rewardCoinLayerNode.x-=this.bgMoveSpeed,this.cloudBgNode2.x-=this.afterMoveSpeed,this.cloudMoveDisNum2+=this.afterMoveSpeed,this.cloudMoveDisNum2>=3840){this.cloudMoveDisNum2-=3840;var e=this.cloudBgNode2.children;e[0].x<e[2].x?(e[0].x+=7680,e[1].x+=7680):(e[2].x+=7680,e[3].x+=7680)}}else this.rewardOver||(this.rewardOver=!0,this.rewardEnd());else if(!this.gamePause&&this.levelMove&&a.parkourMapLayerJs.node.x>-(a.curScene.mapMaxX-this.winSizeWidth/2)){if(a.parkourMapLayerJs.node.x-=this.bgMoveSpeed,a.parkourCoinLayerJs.node.x-=this.bgMoveSpeed,a.parkourObstacleLayerJs.node.x-=this.bgMoveSpeed,a.parkourPropLayerJs.node.x-=this.bgMoveSpeed,a.parkourMapLayerJs.node.x<=-800&&0==this.newUserNumFlag?(this.newUserNumFlag++,this.node.emit("guide",0)):a.parkourMapLayerJs.node.x<=-1900&&1==this.newUserNumFlag&&(this.newUserNumFlag++,this.node.emit("guide",1)),this.seaBgNode.x-=this.seaBgMoveSpeed,this.seaBgMoveDisNum+=this.seaBgMoveSpeed,this.startPosNode.x-=this.bgMoveSpeed,this.startPosNode1.x-=this.bgMoveSpeed,this.smallMapPosNode.x+=this.smallMapSpeed,this.addDisNum(),this.seaBgMoveDisNum>=this.seaMapLoopLen){this.seaBgMoveDisNum-=this.seaMapLoopLen;var o=this.seaBgNode.children;o[0].x<o[2].x?(o[0].x+=2*this.seaMapLoopLen,o[1].x+=2*this.seaMapLoopLen):(o[2].x+=2*this.seaMapLoopLen,o[3].x+=2*this.seaMapLoopLen)}var t=a.parkourMapLayerJs.mapMaxArr[a.parkourMapLayerJs.mapIndex];if(a.parkourMapLayerJs.mapIndex<4&&a.parkourMapLayerJs.node.x<-t+cc.winSize.width/2+960&&(this.loadNewCoinAndObstacle=!0,a.parkourMapLayerJs.loadCoinAndObstacle()),this.loadNewCoinAndObstacle){var r=a.parkourMapLayerJs.mapMaxArr[a.parkourMapLayerJs.mapIndex-1];if(a.parkourMapLayerJs.node.x<-(r+cc.winSize.width+960)){this.loadNewCoinAndObstacle=!1;var i="map"+(a.parkourMapLayerJs.mapRandromArr[a.parkourMapLayerJs.mapIndex-2]+1).toString(),n=a.parkourMapLayerJs.node.getChildByName(i);n&&(n.opacity=0);var s=a.parkourCoinLayerJs.node.getChildByName(i);s&&(s.opacity=0);var c=a.parkourObstacleLayerJs.node.getChildByName(i);c&&(c.opacity=0)}}}else this.gamePause||this.rewardMove||!this.levelMove||(this.levelMove=!1,console.log("\u6210\u529f"),this.endGame())},BgChangePos:function(e){for(var o=0,a=e.children[o].x,t=1;t<e.childrenCount;t++){var r=e.children[t];r.x<a&&(a=r.x,o=t)}e.children[o].x+=8192},addDisNum:function(){this.countSmallDis++,this.countSmallDis>=10&&(this.countSmallDis=0,this.smallMapDis+=5,this.smallMapDisLabel.string=this.smallMapDis.toString()+"m")},endGame:function(){var e=this;this.blockNode.active=!0;var o=cc.winSize.width/2-520;cc.tween(a.parkourPlayerJs.node).to(2,{x:o}).call(function(){d.spineAnimationPlay(a.parkourPlayerJs.palyerSpine,"happy"),e.scheduleOnce(function(){try{e.openSucPanelNode()}catch(o){}},.5)}).start()},startRewardMap:function(e){var o=this;a.parkourCoinLayerJs.createCoin(this.map5Node,1),this.map5Node.opacity=255,this.cloudBgNode2.opacity=255,this.gamePause=!0,a.parkourPlayerJs.palyerSpine.setAnimation(0,"paoku-chuansong",!1),this.scheduleOnce(function(){a.parkourPlayerJs.palyerSpine.setAnimation(0,"paoku-Idle",!0),o.cameraNode.y=1080,e.parent.destroy(),a.parkourPlayerJs.node.angle=0,o.map5Node.y=0,o.rewardCoinLayerNode.y=0,o.cloudBgNode2.y=0,o.cameraNode.y=0,o.seaBgNode.opacity=0,a.parkourCoinLayerJs.node.active=!1,a.parkourPropLayerJs.node.active=!1,a.parkourObstacleLayerJs.node.active=!1,a.parkourMapLayerJs.node.active=!1,o.rewardMove=!0,o.gamePause=!1,o.rewardPause=!1,a.parkourObstacleLayerJs.specialIng=!1},1.7)},rewardEnd:function(){var e=this,o=a.parkourPlayerJs.node.x;this.scheduleOnce(function(){d.spineAnimationPlay(a.parkourPlayerJs.palyerSpine,"paoku-down")},1),cc.tween(a.parkourPlayerJs.node).to(2,{x:o+1700}).call(function(){a.parkourPlayerJs.playerState="RUN",a.parkourPlayerJs.node.x=-600,a.parkourPlayerJs.node.y=-160,a.parkourPlayerJs.playerPos=2,e.map5Node.opacity=0,e.rewardCoinLayerNode.active=!1,e.cloudBgNode2.opacity=0,e.seaBgNode.opacity=255,a.parkourCoinLayerJs.node.active=!0,a.parkourPropLayerJs.node.active=!0,a.parkourObstacleLayerJs.node.active=!0,a.parkourMapLayerJs.node.active=!0,e.rewardMove=!1,d.spineAnimationPlay(a.parkourPlayerJs.palyerSpine,"paoku-Idle")}).start()},playClickSound:function(){r.playEffect("click")},playGameSuccessMusic:function(){r.playEffect("success")},playParkourJumpOrDown:function(){r.playEffect("jump")},playCoinSound:function(){r.playEffect("coin")},btn_addRocketProp:function(e,o){var t=this;if(!(this.newUser<2||a.parkourObstacleLayerJs.specialIng)){e.target.getComponent(cc.Button).interactable=!1,this.scheduleOnce(function(){e.target.getComponent(cc.Button).interactable=!0},1);var r=parseInt(o),n=function(e){e&&(a.parkourPropLayerJs.prop_Rocket(),1==t.rocketNum&&(t.rocketNum=0,t.rocketAddNode.active=!0,t.rocketNumNode.active=!1,i.setData("parkourRocketNum",t.rocketNum),2==t.newUser&&(t.newUser++,i.setData("parkour_newUser",t.newUser),t.guideNode.active=!1,t.gamePause=!1)))},s=function(e){e&&(a.parkourPropLayerJs.prop_Pull(),1==t.pullNum&&(t.pullNum=0,t.pullAddNode.active=!0,t.pullNumNode.active=!1,i.setData("parkourPullNum",t.pullNum)))};!isHasAd||0==r&&1==this.rocketNum||1==r&&1==this.pullNum?0==r?n(!0):s(!0):0==r?l.adsManager.showVideo("parkourPropRocket",n):l.adsManager.showVideo("parkourPropMagnet",s)}},updatePanel:function(e,o,t,r){var n=a.curScene.coinNum;o.string=n.toString();var s=0;"success"==r?(s=Math.round(a.curScene.smallMapDis/202)+Math.round(n/15),a.curScene.levelNum=parseInt(a.curScene.levelNum)+1,i.setData("parkourLevel",a.curScene.levelNum)):s=Math.round(n/15),e.string=s.toString(),a.updateBellNum(a.curScene.bellLabel,s);var c=i.getData("parkourHighScore",0);n>c&&(c=n,i.setData("parkourHighScore",c)),t.string=c.toString(),a.curScene.bellLabel.node.parent.active=!0},btnPause:function(){r.playEffect("click"),this.rewardMove?this.rewardPause=!0:this.gamePause=!0,this.panelCtrl.showPanel("pause")},continueHandle:function(){a.curScene.rewardMove?a.curScene.rewardPause=!1:a.curScene.gamePause=!1},reviveHandle:function(){a.curScene.gamePause=!1,a.parkourMapLayerJs.repairFloor(),d.spineAnimationPlay(a.parkourPlayerJs.palyerSpine,"paoku-Idle",!0)},openFailPanelNode:function(){p.debug("\u5931\u8d25"),a.curScene.gamePause=!0,isHasAd?a.curScene.panelCtrl.showPanel("revive"):a.curScene.panelCtrl.showPanel("fail"),n.eventStatistics("parkourLevelFail"+this.levelNum)},openSucPanelNode:function(){this.panelCtrl.showPanel("success")}}),cc._RF.pop()},{AdInfo:void 0,AudioModule:void 0,EngineCommon:void 0,GameCommon:void 0,GameControl:void 0,LanguageModule:void 0,LoadResModule:void 0,LogCommon:void 0,StatisticsModule:void 0,StorageModule:void 0}]},{},["Parkour","ParkourCoin","ParkourCoinLayer","ParkourMapLayer","ParkourObstacle","ParkourObstacleLayer","ParkourPlayer","ParkourPropLayer"]);