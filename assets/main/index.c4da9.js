window.__require=function e(t,n,i){function a(s,c){if(!n[s]){if(!t[s]){var r=s.split("/");if(r=r[r.length-1],!t[r]){var l="function"==typeof __require&&__require;if(!c&&l)return l(r,!0);if(o)return o(r,!0);throw new Error("Cannot find module '"+s+"'")}s=r}var d=n[s]={exports:{}};t[s][0].call(d.exports,function(e){return a(t[s][1][e]||e)},d,d.exports,e,t,n,i)}return n[s].exports}for(var o="function"==typeof __require&&__require,s=0;s<i.length;s++)a(i[s]);return a}({APKAd:[function(e,t){"use strict";cc._RF.push(t,"49984J1tqtB2a0jGyf/0E0s","APKAd");var n=e("AdInfo");cc.Class({initAd:function(){},showBanner:function(e){void 0===e&&(e=0),jsb.reflection.callStaticMethod(n.className,"AddBannerAds","(I)V",e)},hideBanner:function(){jsb.reflection.callStaticMethod(n.className,"HideBanner","()V")},showInterstitial:function(e,t){void 0===t&&(t=1),jsb.reflection.callStaticMethod(n.className,"ShowInt","(Ljava/lang/String;I)V",e,t)},showInterstitialVideo:function(e,t){void 0===t&&(t=1),jsb.reflection.callStaticMethod(n.className,"ShowIntVideo","(Ljava/lang/String;I)V",e,t)},showInterAndNative:function(e,t){void 0===t&&(t=1),jsb.reflection.callStaticMethod(n.className,"showInterAndNative","(Ljava/lang/String;I)V",e,t)},showVideo:function(e){jsb.reflection.callStaticMethod(n.className,"ShowRewardVideo","(Ljava/lang/String;)V",e)},showNativeBanner:function(){jsb.reflection.callStaticMethod(n.className,"InitNativeBanner","()V")},hideNativeBanner:function(){jsb.reflection.callStaticMethod(n.className,"HideNativeBanner","()V")},showNativeInterstitial:function(e){void 0===e&&(e=0),jsb.reflection.callStaticMethod(n.className,"InitNativeInter","(I)V",e)}}),cc._RF.pop()},{AdInfo:"AdInfo"}],AcceleratePanel:[function(e,t){"use strict";cc._RF.push(t,"aea81Kk8EpJF7/RI53KtWVB","AcceleratePanel");var n=e("GameControl"),i=e("GameCommon"),a=e("AdInfo"),o=e("PanelBase"),s=e("AudioModule");cc.Class({extends:o,properties:{timeLabel1:cc.Label,timeLabel2:cc.Label,progressSprite1:cc.Sprite,progressSprite2:cc.Sprite},start:function(){this.sizeFit()},sizeFit:function(){this.node.y+=50,this.node.getChildByName("splash").y-=50},initPanel:function(e){var t=e.petalTimes,i=Math.ceil(e.remindTimes);this.acceleratePetal=e;var a=((t-i)/t).toFixed(2);n.updateRemindTimes(i,this.timeLabel1,a,this.progressSprite1),this.remindTimes=i-1200,this.remindTimes=Math.max(0,this.remindTimes),a=((t-this.remindTimes)/t).toFixed(2),n.updateRemindTimes(this.remindTimes,this.timeLabel2,a,this.progressSprite2)},btnAccelerate:function(){var e=this;if(i.isCanClick()){s.playEffect("click");var t=this;a.adsManager.showVideo("accelerate",function(n){n&&(e.acceleratePetal.accelerateHandle(t.remindTimes),t.node.active=!1)})}},btnClose:function(){s.playEffect("click"),this.node.active=!1}}),cc._RF.pop()},{AdInfo:"AdInfo",AudioModule:"AudioModule",GameCommon:"GameCommon",GameControl:"GameControl",PanelBase:"PanelBase"}],AdInfo:[function(e,t){"use strict";cc._RF.push(t,"f8ea6j33/9KNo5s5I4ZnVr/","AdInfo"),t.exports={adsManager:null,className:"org/cocos2dx/javascript/AppActivity",systemInfo:null,gameStartTime:0,isTest:!1,bannerShowFlag:[],isBannerShow:!1,interstitialCloseTime:0,isVideoLoad:!1,videoShowTime:0,rewardCallBack:null,videoCallBack:null,videoShowCallBack:null,videoFailCallBack:null,intAndVideoDeltaTime:-1,interstitialShowAfter:30,interstitialShowInterval1:30,interstitialShowInterval2:120,interstitialShowInterval3:120,bannerType:0,isShowBannerEnterGame:!0,bannerShowInterval:30,nativeIntervalTimes:30,isShowBannerLoadScene:!0,showInt:!0,interType:0,nativeControl:null,isNativeBannerShow:!1,nativeBannerAdId:null,mistakenTouchNum:3,networkType:"4g",noAd:0},cc._RF.pop()},{}],AdsManager:[function(e,t){"use strict";cc._RF.push(t,"da577dTTH1FfJAXvipSRBDi","AdsManager");var n=e("AdInfo"),i=e("OPPOAd"),a=e("VIVOAd"),o=e("TTAd"),s=e("QQAd"),c=e("WXAd"),r=e("APKAd"),l=e("IOSAd"),d=e("HuaweiAd"),h=e("TimeModule"),u=e("AudioModule");window.rewardCallBack=function(){n.videoCallBack&&n.videoCallBack(!0)},window.videoCloseBack=function(){"vivo"!=channel&&"oppo"!=channel&&"wx"!=channel||u.playMusic()},window.videoShowCallBack=function(){n.videoShowCallBack&&n.videoShowCallBack(),"vivo"!=channel&&"oppo"!=channel&&"wx"!=channel||u.stopMusic()},window.videoFailCallBack=function(){n.videoFailCallBack&&n.videoFailCallBack()},cc.Class({extends:cc.Component,properties:{rewardState:0},initAd:function(e,t){if(cc.sys.platform!=cc.sys.DESKTOP_BROWSER){switch(console.log(n.adsManager),channel){case"qq":this.ads=new s;break;case"wx":this.ads=new c;break;case"tt":this.ads=new o;break;case"oppo":this.ads=new i;break;case"vivo":this.ads=new a;break;case"apk":this.ads=new r;break;case"ios":this.ads=new l;break;case"huawei":this.ads=new d}this.ads&&this.ads.initAd(t),n.videoFailCallBack=e,n.gameStartTime=h.getNowTime()}else console.log("\u5e7f\u544a\u521d\u59cb\u5316")},setAdParams:function(e,t,i,a,o,s,c,r){switch(e&&(n.bannerShowInterval=e),t&&(n.interstitialShowAfter=t),i&&(n.interstitialShowInterval1=i),a&&(n.interstitialShowInterval2=a),o&&(n.interstitialShowInterval3=o),s&&(n.countVideoCloseTime=s),c&&(n.interNativeStyle=c),r&&(n.mistakenTouchNum=r),channel){case"apk":cc.sys.platform!=cc.sys.DESKTOP_BROWSER&&("huawei"==subChannel?jsb.reflection.callStaticMethod(n.className,"SetAdParams","(IIIIII)V",i,a,o,s,c,r):(console.log("setAdParams"),jsb.reflection.callStaticMethod(n.className,"SetAdParams","(IIIII)V",n.interstitialShowAfter,n.interstitialShowInterval1,n.interstitialShowInterval2,n.interstitialShowInterval3,n.countVideoCloseTime)));break;case"ios":cc.sys.platform!=cc.sys.DESKTOP_BROWSER&&jsb.reflection.callStaticMethod("AppController","SetAdParams::::",n.interstitialShowAfter,n.interstitialShowInterval1,n.interstitialShowInterval2,n.interstitialShowInterval3)}},showBanner:function(e){if(1!=n.noAd&&3!=n.noAd)if(cc.sys.platform!=cc.sys.DESKTOP_BROWSER)switch(channel){case"oppo":case"vivo":case"huawei":this.ads.showBannerAndNative(e);break;default:this.ads.showBanner(e)}else console.log("showBanner")},hideBanner:function(){if(cc.sys.platform!=cc.sys.DESKTOP_BROWSER)switch(channel){case"vivo":case"oppo":this.ads.hideBannerAndNative();break;default:this.ads.hideBanner()}else console.log("hideBanner")},initInterstitial:function(){if(cc.sys.platform!=cc.sys.DESKTOP_BROWSER)switch(channel){case"huawei":this.ads.initInterstitial()}else console.log("initInterstitial")},showInterstitial:function(e,t,i){if(cc.sys.platform!=cc.sys.DESKTOP_BROWSER)switch(channel){case"wx":this.ads.showInterstitial(i);break;case"vivo":if(1==n.noAd||3==n.noAd)return;if(!n.showInt||0!=t&&(h.getNowTime()-n.interstitialCloseTime)/1e3<n.interstitialShowInterval1)return;this.ads.showInterstitial(i);break;case"huawei":this.ads.showInterstitial(i)}else console.log("showInterstitial")},showInterVideo:function(e,t){2!=n.noAd&&3!=n.noAd&&(cc.sys.platform!=cc.sys.DESKTOP_BROWSER?"apk"===channel?this.ads.showInterstitialVideo(e,t):this.showInterstitial(e,t,null):console.log(t+"showInterVideo"+e))},showInterAndNative:function(e,t){if(2!=n.noAd&&3!=n.noAd)if(cc.sys.platform!=cc.sys.DESKTOP_BROWSER)switch(channel){case"huawei":this.ads.showInterAndNative(e,t);break;case"apk":"huawei"==subChannel&&this.ads.showInterAndNative(e,t)}else console.log(t+"showInterAndNative"+e)},initVideo:function(){if(cc.sys.platform!=cc.sys.DESKTOP_BROWSER)switch(channel){case"huawei":this.ads.initVideo()}else console.log("initVideo")},showVideo:function(e,t){n.videoCallBack=t,cc.sys.platform!=cc.sys.DESKTOP_BROWSER?this.ads.showVideo(e):1==this.rewardState?(console.log("\u89c6\u9891\u52a0\u8f7d\u5931\u8d25"),videoFailCallBack()):(console.log("\u83b7\u53d6\u5956\u52b1"),rewardCallBack())},showAppBox:function(){cc.sys.platform!=cc.sys.DESKTOP_BROWSER?this.ads.showAppBox():console.log("showAppBox")},showBlockAd:function(e){cc.sys.platform!=cc.sys.DESKTOP_BROWSER?this.ads.showBlockAd(e):console.log("showBlockAd")},hideBlockAd:function(){cc.sys.platform!=cc.sys.DESKTOP_BROWSER?this.ads.hideBlockAd():console.log("hideBlockAd")},showGamePortal:function(){if(cc.sys.platform!=cc.sys.DESKTOP_BROWSER)switch(channel){case"vivo":case"oppo":this.ads.showGamePortal()}else console.log("showGamePortal")},showGameBanner:function(){if(cc.sys.platform!=cc.sys.DESKTOP_BROWSER)switch(channel){case"vivo":case"oppo":this.ads.showGameBanner()}else console.log("showGameBanner")},hideGameBanner:function(){if(cc.sys.platform!=cc.sys.DESKTOP_BROWSER)switch(channel){case"vivo":case"oppo":this.ads.hideGameBanner()}else console.log("hideGameBanner")},showNativeAd:function(e,t,n){if(cc.sys.platform!=cc.sys.DESKTOP_BROWSER)switch(channel){case"oppo":case"vivo":case"huawei":this.ads.showNativeAd(e,t,n)}else console.log("showNativeAd")},clickNativeAd:function(e,t){if(cc.sys.platform!=cc.sys.DESKTOP_BROWSER)switch(channel){case"oppo":case"vivo":case"huawei":this.ads.clickNativeAd(e,t)}else console.log("clickNativeAd")},reportShowNativeAd:function(){if(cc.sys.platform!=cc.sys.DESKTOP_BROWSER)switch(channel){case"huawei":this.ads.reportShowNativeAd()}else console.log("\u539f\u751f\u5c55\u793a\u4e0a\u62a5")},hideNativeAd:function(e){if(cc.sys.platform!=cc.sys.DESKTOP_BROWSER)switch(channel){case"oppo":case"vivo":case"huawei":this.ads.hideNativeAd(e)}else console.log("hideNativeAd")},showNativeBanner:function(){if(cc.sys.platform!=cc.sys.DESKTOP_BROWSER)switch(channel){case"apk":case"vivo":this.ads.showNativeBanner()}else console.log("showNativeBanner")},hideNativeBanner:function(){if(cc.sys.platform!=cc.sys.DESKTOP_BROWSER)switch(channel){case"apk":case"vivo":this.ads.hideNativeBanner()}else console.log("hideNativeBanner")},showNativeInterstitial:function(e){if(cc.sys.platform!=cc.sys.DESKTOP_BROWSER)switch(channel){case"apk":this.ads.showNativeInterstitial(e)}else console.log("showNativeInterstitial")},initCustomAd:function(e){if(cc.sys.platform!=cc.sys.DESKTOP_BROWSER)switch(channel){case"wx":this.ads.initCustomAd(e)}else console.log("initCustomAd")},isCustomAdLoad:function(e){if(cc.sys.platform==cc.sys.DESKTOP_BROWSER)return console.log("isCustomAdLoad"+e),!1;var t=!1;switch(channel){case"wx":t=this.ads.isCustomAdLoad(e)}return t},showCustomAd:function(e){if(cc.sys.platform!=cc.sys.DESKTOP_BROWSER)switch(channel){case"wx":this.ads.showCustomAd(e)}else console.log("showCustomAd")},hideCustomAd:function(e){if(cc.sys.platform!=cc.sys.DESKTOP_BROWSER)switch(channel){case"wx":this.ads.hideCustomAd(e)}else console.log("hideCustomAd")},destroyCustomAd:function(e){if(cc.sys.platform!=cc.sys.DESKTOP_BROWSER)switch(channel){case"wx":this.ads.destroyCustomAd(e)}else console.log("destroyCustomAd")}}),cc._RF.pop()},{APKAd:"APKAd",AdInfo:"AdInfo",AudioModule:"AudioModule",HuaweiAd:"HuaweiAd",IOSAd:"IOSAd",OPPOAd:"OPPOAd",QQAd:"QQAd",TTAd:"TTAd",TimeModule:"TimeModule",VIVOAd:"VIVOAd",WXAd:"WXAd"}],Arena:[function(e,t){"use strict";cc._RF.push(t,"75bdcNhn5JIcbAmKI3sXxi3","Arena");var n=e("ToyBase"),i=e("MathModule"),a=e("EngineCommon");cc.Class({extends:n,properties:{holder1:cc.Node,scoreL:cc.Sprite,scoreR:cc.Sprite,number:{type:cc.SpriteFrame,default:[]}},start:function(){var e=this;this.animationName=["Idle","start","start2","start3","left-win","right-win"],this.init(3),this.attachTimes=0,this.skeleton.setCompleteListener(function(t){var n=t.animation?t.animation.name:"";"start"==n?e.attackHandle():"left-win"!=n&&"right-win"!=n||e.interactionEnd()})},toyHandle:function(){var e=this;if(1==this.holder.childrenCount&&1==this.holder1.childrenCount){var t=this.holder.children[0].getComponent("Cat"),n=this.holder1.children[0].getComponent("Cat");t.curColliderObj=this,n.curColliderObj=this,this.attachTimes=0,this.score=[0,0],this.playAnimationByState(1),this.scheduleOnce(function(){e.scoreL.spriteFrame=e.number[e.attachTimes],e.scoreL.node.active=!0},2),this.scheduleOnce(function(){e.scoreR.spriteFrame=e.number[e.attachTimes],e.scoreR.node.active=!0},2.5)}},resetGame:function(){},updateScore:function(){var e=this;setTimeout(function(){e.isRightWin?e.playAnimationByState(3):e.playAnimationByState(2)},500),setTimeout(function(){e.isRightWin?e.score[1]+=1:e.score[0]+=1,e.scoreL.spriteFrame=e.number[e.score[0]],e.scoreR.spriteFrame=e.number[e.score[1]]},2e3)},attackHandle:function(){this.attachTimes++,this.isRightWin=Math.random()<.5;for(var e=this.holder.children[0].getComponent("Cat"),t=this.holder1.children[0].getComponent("Cat"),n=i.rangeRandom(1,4),o=0;o<n;o++){var s=["play-jingjichang-attack","play-jingjichang-attack2","play-jingjichang-attack3"];if(o==n-1){var c=i.rangeRandom(0,s.length);this.isRightWin?0==o?(a.spineAnimationPlay(e.skeleton,s[c]),a.spineAnimationPlay(t.skeleton,"play-jingjichang-hurt")):(a.spineAnimationPlay(e.skeleton,s[c],!1,!0),a.spineAnimationPlay(t.skeleton,"play-jingjichang-hurt",!1,!0)):0==o?(a.spineAnimationPlay(t.skeleton,s[c]),a.spineAnimationPlay(e.skeleton,"play-jingjichang-hurt")):(a.spineAnimationPlay(t.skeleton,s[c],!1,!0),a.spineAnimationPlay(e.skeleton,"play-jingjichang-hurt",!1,!0))}else{var r=i.getRandomArr([0,1,2],2);0==o?(a.spineAnimationPlay(e.skeleton,s[r[0]]),a.spineAnimationPlay(t.skeleton,s[r[1]])):(a.spineAnimationPlay(e.skeleton,s[r[0]],!1,!0),a.spineAnimationPlay(t.skeleton,s[r[1]],!1,!0))}}},attachEnd:function(){var e,t;this.score[1]<this.score[0]?(t="happy",e="sad-loop",this.playAnimationByState(4)):(e="happy",t="sad-loop",this.playAnimationByState(5));var n=this.holder.children[0].getComponent("Cat"),i=this.holder1.children[0].getComponent("Cat");a.spineAnimationPlay(n.skeleton,["play-jingjichang-end",e],!0,!0),a.spineAnimationPlay(i.skeleton,["play-jingjichang-end",t],!0,!0)},catHandle:function(){var e=this.holder.children[0].getComponent("Cat"),t=this.holder1.children[0].getComponent("Cat");a.spineAnimationPlay(e.skeleton,["play-jingjichang-start","play-jingjichang-Idle"],!1,!0),a.spineAnimationPlay(t.skeleton,["play-jingjichang-start","play-jingjichang-Idle"],!1,!0)},interactionEnd:function(){this._super(),this.scoreL.node.active=!1,this.scoreR.node.active=!1},updateState:function(){this.state=0}}),cc._RF.pop()},{EngineCommon:"EngineCommon",MathModule:"MathModule",ToyBase:"ToyBase"}],AudioModule:[function(e,t){"use strict";cc._RF.push(t,"173485j3mVEVqCZkL03P2y2","AudioModule");var n=e("LoadResModule"),i=e("StorageModule"),a=e("LogCommon"),o=e("ObjModule");t.exports={audioBundleName:"audio",musicOn:!1,audioOn:!1,isAudioBundleLoad:!1,musicId:null,audioEffect:null,bgVolume:1,musicName:"",audioIds:[],init:function(){this.musicOn="on"==i.getData("music","on"),this.audioOn="on"==i.getData("audio","on"),a.debug("playMusic:musicOn="+this.musicOn+",audioOn="+this.audioOn),this.loadRes()},loadRes:function(){var e=this;n.loadBundle(this.audioBundleName,function(t){console.log("bundle\u52a0\u8f7d\u6210\u529f"),t.loadDir("",cc.AudioClip,function(t){t?a.error("\u8d44\u6e90\u8fd8\u672a\u52a0\u8f7d\u5b8c\u6210"+t):e.isAudioBundleLoad=!0})})},setMusicFlag:function(e){this.musicOn=e,i.setData("music",e?"on":"off")},setAudioFlag:function(e){this.audioOn=e,i.setData("audio",e?"on":"off")},setBgVolume:function(e){this.bgVolume=e},getAudio:function(e){return cc.assetManager.getBundle(this.audioBundleName).get(e,cc.AudioClip)},playMusic:function(e,t){if(void 0===t&&(t=!0),e&&(this.musicName=e),this.musicOn)if(this.isAudioBundleLoad)if(this.musicName){var n=this.getAudio(this.musicName);null===this.musicId?this.musicId=cc.audioEngine.play(n,t,this.bgVolume):cc.audioEngine.getState(this.musicId)==cc.audioEngine.AudioState.PAUSED&&cc.audioEngine.resume(this.musicId)}else a.warn("\u8bf7\u4f20\u5165\u80cc\u666f\u97f3\u4e50\u7684\u540d\u5b57");else a.warn("AudioModule:\u8d44\u6e90\u8fd8\u672a\u52a0\u8f7d\u5b8c\u6210")},stopMusic:function(){null!==this.musicId&&(console.log("\u5173\u95ed\u80cc\u666f\u97f3\u4e50"),cc.audioEngine.pause(this.musicId))},playEffect:function(e,t,n){if(void 0===t&&(t=!1),void 0===n&&(n=1),this.audioOn){var i=this.getAudio(e);if(i){var o=cc.audioEngine.playEffect(i,t);return cc.audioEngine.setVolume(o,n),this.audioIds.push(o),o}a.warn("[AudioModule][playEffect] \u97f3\u4e50:"+e+"\u4e0d\u5b58\u5728")}},stopEffect:function(e){cc.audioEngine.stopEffect(e),o.removeDuplicatesFromArray(this.audioIds,e)},stopAllSounds:function(){for(var e=0;e<this.audioIds.length;e++)cc.audioEngine.stopEffect(this.audioIds[e]);this.audioIds=[]},isSoundPlaying:function(e){return this.audioEngine.getState(e)===cc.audioEngine.AudioState.PLAYING}},cc._RF.pop()},{LoadResModule:"LoadResModule",LogCommon:"LogCommon",ObjModule:"ObjModule",StorageModule:"StorageModule"}],Balloon:[function(e,t){"use strict";cc._RF.push(t,"edaaa67hvpBVoVdWJdAMcjX","Balloon");var n=e("ToyBase"),i=e("EngineCommon"),a=e("MathModule");cc.Class({extends:n,properties:{},start:function(){this.animationIndex=0,this.animationName=["Idle","play1","play2","play3"],this.init()},toyHandle:function(){this.animationIndex=a.rangeRandom(1,4),this.playAnimationByState(this.animationIndex)},catHandle:function(){var e=this.holder.children[0].getComponent("Cat");i.spineAnimationPlay(e.skeleton,["","play-qiqiutan1","play-qiqiutan2","play-qiqiutan3"][this.animationIndex])}}),cc._RF.pop()},{EngineCommon:"EngineCommon",MathModule:"MathModule",ToyBase:"ToyBase"}],Bathtub:[function(e,t){"use strict";cc._RF.push(t,"3c2eafoIvpKurhu/GfcaZS4","Bathtub");var n=e("ToyBase"),i=e("EngineCommon");cc.Class({extends:n,properties:{water:cc.Prefab,waterHolder:cc.Node},start:function(){var e=this;this.animationName=["Idle","play"],this.init(),this.skeleton.setStartListener(function(t){"play"==(t.animation?t.animation.name:"")&&e.scheduleOnce(function(){try{var e=cc.instantiate(this.water);e.parent=this.waterHolder,e.x=35,e.y=-135}catch(t){console.log(t)}},2)})},toyHandle:function(){this.playAnimationByState(1)},catHandle:function(){var e=this.holder.children[0].getComponent("Cat");i.spineAnimationPlay(e.skeleton,"play-yugang")}}),cc._RF.pop()},{EngineCommon:"EngineCommon",ToyBase:"ToyBase"}],Bed:[function(e,t){"use strict";cc._RF.push(t,"d3ebetnwk1GYJUDK4g3Cdcj","Bed");var n=e("ToyBase"),i=e("GameControl"),a=e("EngineCommon");cc.Class({extends:n,properties:{progressSprite:cc.Sprite,timeLabel:cc.Label,wakeBtn:cc.Node},start:function(){this.animationName=["Idle","play"],this.init()},toyHandle:function(){this.playAnimationByState(1,!0)},catHandle:function(){var e=this.holder.children[0].getComponent("Cat");a.spineAnimationPlay(e.skeleton,"play-yumaochuang",!0);var t=i.curScene.getSleepTimes(e.index);this.updateBed(t,t)},updateBed:function(e,t){this.state=2,this.timeLabel.node.parent.active=!0,this.totalTimes=e,this.remindTimes=t,this.remindTimes||(this.remindTimes=this.totalTimes),this.playAnimationByState(1,!0),this.updateRemindTimes(this.remindTimes)},updateRemindTimes:function(e,t,n){if(void 0===t&&(t=!0),this.remindTimes=e,this.remindTimes<=0)this.state=1,this.timeLabel.node.parent.active=!1,this.interactionEnd();else if(t||!t&&Math.ceil(e)!=Math.ceil(n)){var a=(this.totalTimes-this.remindTimes)/this.totalTimes;a=a.toFixed(2),i.updateRemindTimes(Math.ceil(this.remindTimes),this.timeLabel,a,this.progressSprite)}},update:function(e){if(2==this.state){var t=this.remindTimes;this.remindTimes-=e,this.updateRemindTimes(this.remindTimes,!1,t)}}}),cc._RF.pop()},{EngineCommon:"EngineCommon",GameControl:"GameControl",ToyBase:"ToyBase"}],BlackBoard:[function(e,t){"use strict";cc._RF.push(t,"4b9cfvLLFhGJZvObKjNG2LP","BlackBoard");var n=e("ToyBase"),i=e("MathModule"),a=e("EngineCommon");cc.Class({extends:n,properties:{},start:function(){this.animationName=["Idle","play"],this.init(),this.randomSeat()},toyHandle:function(){this.playAnimationByState(1)},catHandle:function(){var e=this.holder.children[0].getComponent("Cat");a.spineAnimationPlay(e.skeleton,"play-piaofuzhou")},interactionEnd:function(){this._super(),this.randomSeat()},randomSeat:function(){var e=i.rangeRandom(1,4);this.holder=this.node.getChildByName("holder"+e)}}),cc._RF.pop()},{EngineCommon:"EngineCommon",MathModule:"MathModule",ToyBase:"ToyBase"}],Boiler:[function(e,t){"use strict";cc._RF.push(t,"1efc3N751RHioL/oGv23N86","Boiler");var n=e("ToyBase"),i=e("MathModule"),a=e("EngineCommon"),o=e("AudioModule");cc.Class({extends:n,properties:{},start:function(){this.animationName=["Idle","play1","play2","play3"],this.init()},toyHandle:function(){this.animationIndex=i.rangeRandom(1,4),this.playAnimationByState(this.animationIndex),setTimeout(function(){o.playEffect("boiler")},3200)},catHandle:function(){var e=this.holder.children[0].getComponent("Cat");a.spineAnimationPlay(e.skeleton,"play-lianjin"+this.animationIndex)}}),cc._RF.pop()},{AudioModule:"AudioModule",EngineCommon:"EngineCommon",MathModule:"MathModule",ToyBase:"ToyBase"}],Bubble:[function(e,t){"use strict";cc._RF.push(t,"89a1b4T3bdNJ4EfAwYwuyWI","Bubble");var n=e("ToyBase"),i=e("MathModule"),a=e("EngineCommon");cc.Class({extends:n,properties:{},start:function(){this.animationName=["Idle","play"],this.init()},toyHandle:function(){this.playAnimationByState(1)},catHandle:function(){var e=i.rangeRandom(0,3),t=this.holder.children[0].getComponent("Cat");a.spineAnimationPlay(t.skeleton,["play-chuipaopao","play-chuipaopao2","play-chuipaopao3"][e])}}),cc._RF.pop()},{EngineCommon:"EngineCommon",MathModule:"MathModule",ToyBase:"ToyBase"}],Cabinet:[function(e,t){"use strict";cc._RF.push(t,"026b8TEC6pL5r3IfSTWNwI2","Cabinet");var n=e("GameControl"),i=e("LoadResModule"),a=e("StorageModule"),o=e("EngineCommon"),s=e("LanguageModule"),c=e("StatisticsModule");cc.Class({extends:cc.Component,properties:{image:cc.Sprite,lockLabel:cc.Label,bellLabel:cc.Label,searchNode:cc.Node},onLoad:function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this)},start:function(){this.lastTime=0,this.lastPosition=cc.v2(0,0),this.moveFlag=!1},initItem:function(e,t){this.dex=e,this.index=t.index,this.frameName=t.name,t.isRare&&(this.isRare=t.isRare),t.isSpecial?(this.type=t.type,this.bellNum=t.coin):-1!=t.coin.toString().indexOf("&")?(this.type=1,this.bellNum=t.coin.split("&")):(this.type=0,this.bellNum=parseInt(t.coin)),this.updateItem()},updateItem:function(){this.lockLabel.node.parent.active=!1,this.bellLabel.node.parent.active=!1,this.searchNode.active=!1,this.image.enabled=!0,this.image.node.opacity=255,this.image.node.scale=.8,this.image.node.position=cc.v2(0,-98),this.image.node.removeAllChildren();var e="petal"+this.index;if(this.state=a.getData(e,0),0==this.type)2==this.state?o.loadImage(this.image,n.catBundle,"cats/",this.frameName):1==this.state?o.loadImage(this.image,n.catBundle,"petals/",this.frameName):(this.bellLabel.node.parent.active=!0,this.bellLabel.string=this.bellNum.toString(),o.loadImage(this.image,n.catBundle,"petals/",this.frameName));else if(2==this.state)o.loadImage(this.image,n.catBundle,"cats/",this.frameName);else if(1==this.state)o.loadImage(this.image,n.catBundle,"petals/",this.frameName);else{var t;this.lockLabel.node.parent.active=!0,o.loadImage(this.image,n.catBundle,"petals/",this.frameName),2==this.type||3==this.type?t=s.translateString(this.bellNum):1==this.type&&(t=s.translateString("\u5408\u6210\u83b7\u5f97")),this.lockLabel.string=t}if(2==this.state){var i="cat"+this.index;a.getJsonData(i)?(this.updateBtn("move"),this.image.node.position=cc.v2(-15,-98)):(this.updateBtn("cabinet"),this.image.node.scale=.576,this.image.node.position=cc.v2(0,-93),n.curScene.generateOneCat(this.index,n.catState.display,-1,this.image.node,cc.v2(0,0),-1))}else 1==this.state&&(this.searchNode.active=!0)},updateImage:function(){this.bellLabel.node.parent.active=!1,this.searchNode.active=!0;var e="petal"+this.index;a.setData(e,1),this.LoadImage(1),this.state=1},LoadImage:function(e){var t;t=0==e?"cats/"+this.frameName:"petals/"+this.frameName,i.getBundleRes(n.catBundle,t,function(e){this.image.spriteFrame=e}.bind(this),cc.SpriteFrame)},onTouchStart:function(e){this.lastPosition=e.touch.getLocation(),this.moveFlag=!1},onTouchMove:function(e){var t=e.touch.getLocation();(Math.abs(t.x-this.lastPosition.x)>5||Math.abs(t.y-this.lastPosition.y)>5)&&(this.moveFlag=!0)},onTouchEnd:function(){if(0==this.moveFlag){if(n.isForbid([n.TutorialType.buyPetal,n.TutorialType.dragToCabinet]))return;if(0==this.type&&0==this.state)return void(this.bellNum>n.bellNum?isHasAd&&!n.isForbid()?n.curScene.btnDailyGift():n.remindPanelCtrl.showSimpleRemind("\u94c3\u94db\u4e0d\u8db3"):(n.curScene.tutorialEndHandle(n.TutorialType.buyPetal,1),n.updateBellNum(n.curScene.bellLabel,-this.bellNum),n.curScene.generateOnePetal(this.index,0),this.updateImage(),c.eventStatistics("petal"+this.index)));if(1==this.type&&0==this.state){var e=n.curScene.findToyByIndex(n.ToyType.synthesize);return void(e&&n.curScene.changeCameraPosToObj(e))}if(2==this.type&&0==this.state)return void n.curScene.btnSign();if(3==this.type&&0==this.state)return void n.curScene.btnPurchase();if(this.searchNode.active){var t=a.getJsonData("cat"+this.index);if(console.log(t),t&&t.scene==n.roomType){var i=n.curScene.findCat(this.frameName);i?(n.curScene.tutorialEndHandle(n.TutorialType.dragToCabinet,0),n.curScene.changeCameraPosToObj(i,function(e){e&&n.tutorialStep==n.TutorialType.dragToCabinet&&(e.getComponent("Cat").state=n.catState.idle,n.curScene.tutorialStartHandle(n.TutorialType.dragToCabinet,e))})):(console.log("\u903b\u8f91\u6709\u95ee\u9898\uff0c\u6709\u732b\u54aa\u5b58\u50a8\u4fe1\u606f\uff0c\u4f46\u5b9a\u4f4d\u4e0d\u5230\u732b\u54aa"+JSON.stringify(t)),n.remindPanelCtrl.showSimpleRemind("\u4e0d\u5728\u8be5\u623f\u95f4"))}else if(t)if(0==t.isPetal){var o="\u732b\u54aa\u5728"+{0:"\u5b66\u9662",1:"\u65c5\u9986",2:"\u690d\u7269\u623f",3:"\u751c\u54c1\u623f"}[t.scene];n.remindPanelCtrl.showSimpleRemind(o)}else n.remindPanelCtrl.showSimpleRemind("\u4e0d\u5728\u8be5\u623f\u95f4");else console.log("\u903b\u8f91\u6709\u95ee\u9898\uff0c\u6ca1\u6709\u5b58\u50a8\u4fe1\u606f\uff0c\u5c55\u67dc\u786e\u6ca1\u521d\u59cb\u5316")}}this.moveFlag=!1},updateBtn:function(e){switch(e){case"move":case"drag-move":this.image.node.opacity=150,this.image.enabled=!0,this.image.node.scale=.8,this.image.node.position=cc.v2(-15,-98),this.searchNode.active=!0;break;case"move-drag":case"cabinet-drag":this.image.node.opacity=150,this.image.enabled=!0,this.image.node.scale=.8,this.image.node.position=cc.v2(-15,-98),this.searchNode.active=!1;break;case"drag-cabinet":case"cabinet":this.image.node.opacity=255,this.image.enabled=!1,this.image.node.scale=.576,this.image.node.position=cc.v2(0,-93),this.searchNode.active=!1}}}),cc._RF.pop()},{EngineCommon:"EngineCommon",GameControl:"GameControl",LanguageModule:"LanguageModule",LoadResModule:"LoadResModule",StatisticsModule:"StatisticsModule",StorageModule:"StorageModule"}],CandyFloss:[function(e,t){"use strict";cc._RF.push(t,"d6dcc6ZBaxI87cNA+YaMY+f","CandyFloss");var n=e("ToyBase"),i=e("MathModule"),a=e("EngineCommon");cc.Class({extends:n,properties:{},start:function(){this.animationName=["Idle","play1","play2","play3","play4"],this.init()},toyHandle:function(){this.animationIndex=i.rangeRandom(1,5),this.playAnimationByState(this.animationIndex)},catHandle:function(){var e=this.holder.children[0].getComponent("Cat");a.spineAnimationPlay(e.skeleton,"play-mianhuatangji")}}),cc._RF.pop()},{EngineCommon:"EngineCommon",MathModule:"MathModule",ToyBase:"ToyBase"}],Candy:[function(e,t){"use strict";cc._RF.push(t,"58b67sksRBABryp9J5jvBMW","Candy");var n=e("ToyBase"),i=e("MathModule"),a=e("EngineCommon"),o=e("AudioModule");cc.Class({extends:n,properties:{},start:function(){this.animationName=["Idle","play1","play2","play3","play4"],this.init()},toyHandle:function(){this.animationIndex=i.rangeRandom(1,5),this.playAnimationByState(this.animationIndex),o.playEffect("candy")},catHandle:function(){var e=this.holder.children[0].getComponent("Cat");a.spineAnimationPlay(e.skeleton,"play-tangguoji"+this.animationIndex)}}),cc._RF.pop()},{AudioModule:"AudioModule",EngineCommon:"EngineCommon",MathModule:"MathModule",ToyBase:"ToyBase"}],Cat:[function(e,t){"use strict";cc._RF.push(t,"c05c1Zcud9B2Zsaw1eaIwRC","Cat");var n=e("GameControl"),i=e("MathModule"),a=e("EngineCommon"),o=e("StorageModule"),s=e("MyProgressBar"),c=e("AudioModule"),r=e("StatisticsModule");cc.Class({extends:cc.Component,properties:{skeleton:sp.Skeleton,indicationMsg:cc.Sprite,demandSprite:cc.Sprite,moodProgressBar:s},onLoad:function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this)},start:function(){var e=this;this.curColliderObj=null,this.isCanInteration=!0,this.interationFobidTimes=0,this.moodShowDeltaTimes=i.rangeRandom(50,70),this.skeleton.setStartListener(function(t){var n=t.animation?t.animation.name:"";e.animationStart(n)}),this.skeleton.setCompleteListener(function(t){var n=t.animation?t.animation.name:"";e.animationFinish(n)})},initItem:function(e,t,i,a){var s,c;void 0===a&&(a=-1),this.talkEndTimes=0,this.displayNum=void 0!==a&&a>=0?a:-1,this.state=t,this.trackNo=i,-1==this.displayNum?(this.name=n.getSkinNameByIndex(e),s=n.getLocalDressUp(this.name,this.displayNum)):(s=n.getLocalDressUp("",this.displayNum),e=n.getIndexByDressUp(s),this.name=n.getSkinNameByIndex(e)),this.index=e,-1==this.displayNum?this.node.name=this.name:this.node.name="display"+this.displayNum,n.initDressUp(this.skeleton,s),this.playAnimationByState(t),c=-1==this.displayNum?"mood"+e:"diy-mood"+this.displayNum;var r=o.getData(c,50);this.moodValue=r,this.moodTime=0,this.hideTimes=0,this.showTimes=0,this.updateMoodProgress()},updateMoodProgress:function(e,t){void 0===e&&(e=!1),void 0===t&&(t=0),e&&(this.moodValue=parseInt(this.moodValue)+parseInt(t),this.moodValue=i.clamp(0,this.moodValue,100),this.saveMoodValue()),this.moodProgressBar.node.active&&(this.moodProgressBar.progress=this.moodValue/100)},showMoodProgress:function(){(this.state==n.catState.idle||this.state==n.catState.ready&&this.actionType!=n.ActionType.interaction||this.state==n.catState.talkEnd)&&(this.moodProgressBar.node.active=!0,this.moodProgressBar.node.scaleX=this.node.scaleX>0?1:-1,this.updateMoodProgress(),this.showTimes=0)},hideMoodProgress:function(){this.moodProgressBar.node.active=!1,this.hideTimes=0},saveMoodValue:function(){var e;e=-1==this.displayNum?"mood"+this.index:"diy-mood"+this.displayNum,o.setData(e,this.moodValue)},changeGroup:function(e){this.node.group!=e&&(this.node.group=e,this.node.children[0].group=e)},playAnimationByState:function(e){if(e==n.catState.born)a.spineAnimationPlay(this.skeleton,"born");else if(e==n.catState.idle)a.spineAnimationPlay(this.skeleton,"idle");else if(e==n.catState.happy)a.spineAnimationPlay(this.skeleton,"happy",!0);else if(e==n.catState.happyIdle)a.spineAnimationPlay(this.skeleton,["happy","idle"],[!0,!0]);else if(e==n.catState.happyWalk)a.spineAnimationPlay(this.skeleton,["happy","walk"],[!0,!0]);else if(e==n.catState.ready)if(this.actionType==n.ActionType.stand){var t=["animation","happy","headnod"],o=i.getRandomResult([2,6,6]);0==this.moodValue&&(t=["sad","angry"],o=i.rangeRandom(0,2));var s=i.rangeRandom(0,2);a.spineAnimationPlay(this.skeleton,[t[o],["idle","dance"][s]],[!0,!0])}else if(this.actionType==n.ActionType.interaction)a.spineAnimationPlay(this.skeleton,"sad-loop",!0),this.demandIndex=i.rangeRandom(1,4),this.showRandomDialog(1,this.demandIndex);else{var c=["animation","happy","headnod"],r=i.getRandomResult([2,6,6]);0==this.moodValue&&(c=["sad","angry"],r=i.rangeRandom(0,2));var l=i.getRandomResult([3,1]);this.moveSpeed=1==l?i.rangeRandom(80,100):i.rangeRandom(50,60),a.spineAnimationPlay(this.skeleton,[c[r],["walk","run"][l]],[!0,!0])}else if(e==n.catState.inAir)a.spineAnimationPlay(this.skeleton,["animation","jump"],[!1,!1]);else if(e==n.catState.drag)a.spineAnimationPlay(this.skeleton,["surprised","idle"],[!0,!0]);else if(e==n.catState.talk)a.spineAnimationPlay(this.skeleton,["talk","idle"],[!0,!0]);else if(e==n.catState.listen){var d=i.rangeRandom(0,4);a.spineAnimationPlay(this.skeleton,[["headnod","happy","surprised","sad","angry"][d],"idle"],[!0,!0])}else e==n.catState.talkEnd?(this.moveSpeed=i.rangeRandom(50,60),a.spineAnimationPlay(this.skeleton,["animation","walk"],[!0,!0])):e==n.catState.display?a.spineAnimationPlay(this.skeleton,"animation"):n.isInBed(e)&&a.spineAnimationPlay(this.skeleton,"play-yumaochuang",!0);e==n.catState.drag?this.changeGroup("drag"):e==n.catState.display?this.changeGroup("UI"):this.changeGroup("cat")},animationStart:function(e){"play-jingjichang-hurt"==e&&this.curColliderObj.attachTimes<=3&&this.curColliderObj.updateScore(),-1!=e.indexOf("play-jingjichang-attack")&&c.playEffect("attack")},isInteractionEnd:function(e){return"play-yaoshui-cg"==e||"play-yaoshui-sb"==e||"play-piaofuzhou"==e||"play-yugang"==e||"play-yuanyishu"==e||"play-paizhao"==e||"play-mianhuatangji"==e||-1!=e.indexOf("play-penzai")||-1!=e.indexOf("play-feixingke")||-1!=e.indexOf("play-tangyi")||-1!=e.indexOf("play-yuepu-")||-1!=e.indexOf("play-bianxingke-")||-1!=e.indexOf("play-lianjin")||-1!=e.indexOf("play-shenmishangdian")||-1!=e.indexOf("play-zhangbu")||-1!=e.indexOf("play-jingzi")||-1!=e.indexOf("play-xiaojingling")||-1!=e.indexOf("play-huatan")||-1!=e.indexOf("play-anmo")||-1!=e.indexOf("play-yutang")||-1!=e.indexOf("play-shirenhua")||-1!=e.indexOf("play-huahua")||-1!=e.indexOf("play-wawaji")||-1!=e.indexOf("play-xiaotan")||-1!=e.indexOf("play-baojian")||-1!=e.indexOf("play-tangguoji")||-1!=e.indexOf("play-fanmaiji")||-1!=e.indexOf("play-chuipaopao")||-1!=e.indexOf("play-tianpingui")||-1!=e.indexOf("play-qiqiutan")},animationFinish:function(e){if("play-jingjichang-hurt"==e)this.curColliderObj.attachTimes<3?this.curColliderObj.attackHandle():this.curColliderObj.attachEnd();else if("born"==e){var t=this.node.parent,i=this.node.parent.convertToWorldSpaceAR(cc.v2(0,0));i=n.curScene.tracks[n.petalTrackNo].convertToNodeSpaceAR(i),this.node.parent=n.curScene.tracks[n.petalTrackNo],i.y=n.curScene.getPosY(),this.node.position=i,this.state=n.catState.idle,t.parent.destroy()}else"play-yigui"==e?(n.curCatName=this.name,n.displayNum=this.displayNum,n.curScene.loadScene(n.SceneName.dressUp)):this.isInteractionEnd(e)&&this.curColliderObj&&this.curColliderObj.node.emit("interactionEnd")},showRandomDialog:function(e,t){var a;if(void 0===e&&(e=0),0==e){if(this.indicationMsg.node.parent.active)return;a=this.indicationMsg.node.parent;var o=i.rangeRandom(0,n.curScene.emoteFrames.length);this.indicationMsg.spriteFrame=n.curScene.emoteFrames[o]}else 1==e&&(a=this.demandSprite.node,this.demandSprite.spriteFrame=n.curScene.demandFrames[t-1]);a.active=!0,a.stopAllActions(),cc.tween(a).to(.3,{scale:1}).start(),this.hideMoodProgress()},hideDialog:function(e){var t;void 0===e&&(e=0),0==e?t=this.indicationMsg.node.parent:1==e&&(t=this.demandSprite.node),t.stopAllActions(),cc.tween(t).to(.3,{scale:0}).call(function(){t.active=!1}).start()},dialogHandle:function(e){this.talkTimes=i.rangeRandom(2,6),e.talkTimes=this.talkTimes;for(var t=0;t<this.talkTimes;t++)t%2==0?this.dialogStart(t,this,e):this.dialogStart(t,e,this)},dialogStart:function(e,t,i){if(0==e)t.showRandomDialog(),t.playAnimationByState(n.catState.talk),i.playAnimationByState(n.catState.listen);else{var a=this;this.scheduleOnce(function(){try{if(a.state!=n.catState.talk)return;t.showRandomDialog(),i.hideDialog(),t.playAnimationByState(n.catState.talk),i.playAnimationByState(n.catState.listen),e==a.talkTimes-1&&a.scheduleOnce(function(){a.state==n.catState.talk&&a.dialogEnd(t,i)},4)}catch(o){console.log(o)}},4*e)}},dialogEnd:function(e,t){e.hideDialog(),t.hideDialog(),e.state=n.catState.talkEnd,t.state=n.catState.talkEnd,e.playAnimationByState(e.state),t.playAnimationByState(t.state),e.times=0,t.times=0,e.directionFlag=e.node.scaleX>0?1:-1,t.directionFlag=t.node.scaleX>0?1:-1},onCollisionEnter:function(e,t){if(!n.isForbid()&&0==e.tag&&0==t.tag&&"cat"==e.node.group){var i=e.node.getComponent("Cat");this.node.scaleX*e.node.scaleX<0&&this.trackNo==i.trackNo&&(this.state==n.catState.idle||this.state==n.catState.ready&&this.actionType!=n.ActionType.interaction)&&(i.state==n.catState.idle||i.state==n.catState.ready&&i.actionType!=n.ActionType.interaction)&&!(Math.random()<.5)&&t.node.y<=e.node.y&&(i.state=n.catState.listen,this.state=n.catState.talk,i.dialogObj=this,this.dialogObj=i,this.dialogHandle(i))}},onTouchStart:function(e){if(!(this.state==n.catState.display&&n.isForbid([n.TutorialType.dragToScene])||this.state!=n.catState.display&&n.isForbid([n.TutorialType.dragToCabinet]))&&!n.curScene.gamePause&&n.curScene.isCatCanDrag(this)){var t;if(this.state==n.catState.display?-1==this.displayNum?(this.skeleton.node.active=!0,(t=this.node.parent.parent.getComponent("Cabinet"))&&t.updateBtn("cabinet-drag")):(t=this.node.parent.parent.getComponent("DIYCabinet"))&&t.hideBtn():this.state==n.catState.ready&&this.actionType==n.ActionType.interaction?this.hideDialog(1):this.state!=n.catState.talk&&this.state!=n.catState.listen||(this.hideDialog(),this.dialogObj&&(this.dialogObj.state=n.catState.idle,this.dialogObj.hideDialog(),this.dialogObj=null)),this.lastPos=e.touch.getLocation(),this.lastState=this.state,this.state=n.catState.drag,n.curScene.dragObj=this.node,this.playAnimationByState(this.state),this.hideMoodProgress(),this.node.parent!=n.curScene.tracks[5]){var i=this.node.parent.convertToWorldSpaceAR(this.node.position);this.lastState==n.catState.display?i.x=n.curScene.camera.node.x+i.x:i=n.curScene.tracks[5].convertToNodeSpaceAR(i),this.node.parent=n.curScene.tracks[5],this.node.position=i,this.trackNo=5}this.lastState!=n.ToyType.synthesize&&this.lastState!=n.ToyType.arena||this.curColliderObj.updateState(),n.curScene.dragBgMove=!1,c.playEffect("drag",!1,.1)}},onTouchMove:function(e){if(!n.curScene.gamePause&&this.state==n.catState.drag){var t=e.touch.getLocation();this.lastPos||(this.lastPos=t);var a=cc.v2(t.x-this.lastPos.x,t.y-this.lastPos.y),o=cc.v2(this.node.x+a.x,this.node.y+a.y);o.x=i.clamp(n.curScene.moveMinX,o.x,n.curScene.moveMaxX),o.y=i.clamp(n.curScene.moveMinY-this.node.parent.y,o.y,n.curScene.moveMaxY-this.node.parent.y);var s=o.x-this.node.x;n.tutorialStep==n.TutorialType.dragToCabinet?this.node.y=o.y:this.node.position=o,this.node.x-n.curScene.camera.node.x>cc.winSize.width-150?(n.curScene.dragBgMove=!0,n.curScene.bgMoveSpeed=30,this.node.scaleX=1):this.node.x-n.curScene.camera.node.x<150?(n.curScene.dragBgMove=!0,n.curScene.bgMoveSpeed=-30,this.node.scaleX=-1):(n.curScene.dragBgMove=!1,n.curScene.bgMoveSpeed=0,Math.abs(a.x)-Math.abs(a.y)>0&&s>0?this.node.scaleX=1:Math.abs(a.x)-Math.abs(a.y)>0&&s<0&&(this.node.scaleX=-1)),this.lastPos=t}},onTouchEnd:function(){if(n.curScene.dragBgMove=!1,this.state==n.catState.drag){var e=this,t=!1;if(this.curColliderObj&&n.curScene.isToyFree(this.curColliderObj,this.curColliderTag)){var a;0==this.curColliderObj.state?this.curColliderObj.state=0==this.curColliderTag?1:2:this.curColliderObj.state=3,a=0==this.curColliderTag?this.curColliderObj.holder:this.curColliderObj.holder1,this.state=this.curColliderObj.index;var o=a.convertToWorldSpaceAR(cc.v2(0,0));o=this.node.parent.convertToNodeSpaceAR(o);var s=this.node.position.sub(o).mag()/n.curScene.jumpSpeed;s=i.clamp(.1,s,.5),cc.tween(this.node).to(s,{position:o}).call(function(){e.node.parent=a,e.node.position=cc.v2(0,0),e.node.scale=1,e.playAnimationByState(n.catState.idle)}).delay(.3).call(function(){n.curScene.toyInteraction(e)}).start(),e.curColliderObj.node.stopAllActions(),e.curColliderObj.node.scale=1,this.playAnimationByState(n.catState.inAir),this.lastState==n.catState.display&&this.displayToScene(),n.tutorialStep!=n.TutorialType.dragToCabinet&&n.curScene.btnHideDisplayWindow()}else{var c=this.node.parent.convertToWorldSpaceAR(this.node.position);if(!this.curColliderObj&&c.y<=120&&1==n.curScene.windowFlag&&(-1!=this.displayNum&&1==n.curScene.windowMode||-1==this.displayNum&&0==n.curScene.windowMode))this.state=n.catState.display,t=!0;else{this.state=n.catState.drop;var r=n.curScene.getDropMsg(this.node);if(this.trackNo=r.trackNo,this.node.parent!=n.curScene.tracks[this.trackNo]){var l=this.node.parent.convertToWorldSpaceAR(this.node.position);l=n.curScene.tracks[this.trackNo].convertToNodeSpaceAR(l),this.node.parent=n.curScene.tracks[this.trackNo],this.node.position=l}var d=Math.abs(r.targetY-this.node.y)/1e3;d=i.clamp(.1,d,.5),cc.tween(this.node).to(d,{y:r.targetY}).call(function(){e.state=n.catState.idle,e.playAnimationByState(n.catState.idle)}).start()}t?(n.curScene.forbidOperate(),n.curScene.displayWindowCtrl.putToShowcase(this.node)):(this.lastState==n.catState.display&&this.displayToScene(),n.tutorialStep!=n.TutorialType.dragToCabinet&&n.curScene.btnHideDisplayWindow())}this.lastPos=null}},displayToScene:function(){var e,t={isPetal:!1,scene:n.roomType,x:parseInt(this.node.x)};-1==this.displayNum?(t.index=this.index,e="cat"+this.index,n.curScene.displayWindowCtrl.emptyShowcase(!1,this.index)):(t.displayNum=this.displayNum,e="diy"+this.displayNum,n.curScene.displayWindowCtrl.emptyShowcase(!0,this.displayNum)),o.setJsonData(e,t),n.tutorialStep==n.TutorialType.dragToScene&&n.curScene.tutorialEndHandle(n.TutorialType.dragToScene)},btnInteraction:function(){n.curScene.interactionHandle(this),this.hideDialog(1),this.node.scaleX=1,this.directionFlag=1,r.eventStatistics("interaction"+this.demandIndex)},update:function(e){if(!(n.curScene.gamePause||e>5)){if(this.state==n.catState.idle){var t;if(this.targetTool=null,(t=n.tutorialStep==n.TutorialType.dragToCabinet&&-1==this.displayNum&&0==this.index?n.ActionType.stand:n.isForbid()?i.getRandomResult([1,1]):!this.isCanInteration||this.node.x>n.curScene.moveMaxX-cc.winSize.width/2||this.node.x<n.curScene.moveMinX+cc.winSize.width/2?i.getRandomResult([20,20,1],[0,1,3]):n.curScene.unlockToyNum<10?i.getRandomResult([20,20,20,1]):i.getRandomResult([20,20,5,1]))==n.ActionType.target&&(this.targetTool=n.curScene.findRandomToy(),this.targetTool?(this.node.x>this.targetTool.x?this.directionFlag=-1:this.node.x<this.targetTool.x?this.directionFlag=1:this.directionFlag=this.node.scaleX>0?1:-1,this.node.scaleX=this.directionFlag):t=this.lastActionType==n.ActionType.interaction?i.getRandomResult([8,4]):i.getRandomResult([8,4,2])),t==n.ActionType.move){if(this.node.x-n.curScene.moveMinX<=cc.winSize.width/4)this.directionFlag=1;else if(n.curScene.moveMaxX-this.node.x<=cc.winSize.width/4)this.directionFlag=-1;else{var a=Math.random();this.directionFlag=a<.5?1:-1}var o=i.rangeRandom(cc.winSize.width/4,cc.winSize.width);this.targetPosX=this.node.x+this.directionFlag*o,this.node.scaleX=this.directionFlag*Math.abs(this.node.scale)}else t==n.ActionType.stand?(this.directionFlag=this.node.scaleX>0?1:-1,this.actionTimes=0):t==n.ActionType.interaction&&(this.directionFlag=this.node.scaleX>0?1:-1,this.waitTimes=0);this.moodProgressBar.node.active&&(this.moodProgressBar.node.scaleX=this.node.scaleX>0?1:-1),this.lastActionType=this.actionType,this.actionType=t,this.state=n.catState.ready,this.playAnimationByState(this.state)}else this.state==n.catState.ready&&this.actionType==n.ActionType.stand?(this.actionTimes+=e,this.actionTimes>=3&&(this.state=n.catState.idle)):this.state==n.catState.ready&&this.actionType==n.ActionType.move?(this.node.x+=this.moveSpeed*this.directionFlag*e,(1===this.directionFlag&&this.node.x>=this.targetPosX||-1===this.directionFlag&&this.node.x<=this.targetPosX)&&(this.state=n.catState.idle),(1==this.directionFlag&&this.node.x>=n.curScene.moveMaxX||-1==this.directionFlag&&this.node.x<=n.curScene.moveMinX)&&(this.state=n.catState.idle)):this.state==n.catState.ready&&this.actionType==n.ActionType.target?(this.node.x+=this.moveSpeed*this.directionFlag*e,(1==this.directionFlag&&this.node.x>=this.targetTool.x-this.targetTool.width/2||-1==this.directionFlag&&this.node.x<=this.targetTool.x+this.targetTool.width/2)&&n.curScene.jumpIntoToy(this)):this.state==n.catState.ready&&this.actionType==n.ActionType.interaction?(this.waitTimes+=e,this.waitTimes>=30&&(this.hideDialog(1),this.state=n.catState.idle)):this.state==n.catState.talkEnd&&(this.talkEndTimes+=e,this.node.x+=this.moveSpeed*this.directionFlag*e,(1==this.directionFlag&&this.node.x>=n.curScene.moveMaxX||-1==this.directionFlag&&this.node.x<=n.curScene.moveMinX)&&(this.directionFlag=-this.directionFlag,this.node.scaleX=this.directionFlag*Math.abs(this.node.scale),this.moodProgressBar.node.active&&(this.moodProgressBar.node.scaleX=this.node.scaleX>0?1:-1)),this.talkEndTimes>5&&(this.talkEndTimes=0,this.state=n.catState.idle));if(this.isCanInteration||(this.interationFobidTimes+=e,this.interationFobidTimes>=3&&(this.interationFobidTimes=0,this.isCanInteration=!0)),this.state<=0&&this.state!=n.catState.display){if(this.state==n.catState.ready&&this.actionType==n.ActionType.interaction)return;this.moodValue>0&&(this.moodTime+=e,this.moodTime>=60&&(this.moodTime=0,this.updateMoodProgress(!0,-1))),this.moodProgressBar.node.active?(this.showTimes+=e,this.showTimes>10&&this.hideMoodProgress()):(this.hideTimes+=e,this.hideTimes>=this.moodShowDeltaTimes&&this.showMoodProgress())}}}}),cc._RF.pop()},{AudioModule:"AudioModule",EngineCommon:"EngineCommon",GameControl:"GameControl",MathModule:"MathModule",MyProgressBar:"MyProgressBar",StatisticsModule:"StatisticsModule",StorageModule:"StorageModule"}],ChannelCommon:[function(e,t){"use strict";cc._RF.push(t,"d9039uqpIlBFb7wmO0uZrwc","ChannelCommon");var n=e("TimeModule"),i=e("NativePlatformCommon");t.exports={systemInfo:null,shareImageName:"share.png",shareTitle:"\u9886\u53d6\u5c5e\u4e8e\u4f60\u7684\u4e13\u5c5e\u88c5\u626e\uff01\uff01\uff01",imageData:null,width:0,height:0,shotImage:null,topics1:"\u661f\u9009\u5c11\u5973\u9020\u578b\u5e08",topics2:"\u88c5\u626e\u5c0f\u6e38\u620f",recorderFlag:!1,pickId:1,recorder:null,videoPath:null,recordTimes:59,getSystemInfo:function(){if(cc.sys.platform!=cc.sys.DESKTOP_BROWSER&&!this.systemInfo){var e=null;"wx"==channel?e=wx.getSystemInfoSync():"tt"==channel?e=tt.getSystemInfoSync():"qq"==channel?e=qq.getSystemInfoSync():"swan"==channel?e=swan.getSystemInfoSync():"oppo"==channel?e=qg.getSystemInfoSync():"vivo"==channel&&(e=qg.getSystemInfoSync()),this.systemInfo=e}},isPhone:function(){var e=!1;return null==this.systemInfo&&this.getSystemInfo(),"ios"==this.systemInfo.platform.toLowerCase()&&(e=!0),e},shareApp:function(e,t){if(cc.sys.platform!==cc.sys.DESKTOP_BROWSER)if("wx"==channel)wx.shareAppMessage({title:this.shareTitle,imageUrl:serverPath+this.shareImageName});else if("qq"==channel)qq.shareAppMessage({title:this.shareTitle,imageUrl:serverPath+this.shareImageName});else if("tt"==channel)tt.shareAppMessage({success:function(){},fail:function(){console.log("\u5206\u4eab\u89c6\u9891\u5931\u8d25")}});else if("swan"==channel)swan.shareAppMessage({title:this.shareTitle,imageUrl:this.shareUrl});else if("vivo"==channel){if(!qg.share)return;qg.share({success:function(){console.log("share success")},fail:function(e){console.log("share fail"),console.log(e)}})}else"ios"==channel?(e&&e(),setTimeout(function(){i.share(),t&&t()},50)):"huawei"==channel&&qg.serviceShare({shareType:2,imagePath:this.filePath,fail:function(e,t){console.log("jsw service share fail:"+t+e)},cancel:function(){console.log("cancel")}});else console.log("\u5206\u4eab")},enableForward:function(){var e=this;if("wx"==channel){if(!wx.showShareMenu)return;if(wx.showShareMenu({withShareTicket:!0,menus:["shareAppMessage","shareTimeline"]}),!wx.onShareAppMessage)return;wx.onShareAppMessage(function(){return{title:e.shareTitle,imageUrl:serverPath+e.shareImageName}})}},showToast:function(e){"wx"==channel?wx.showToast({title:e,icon:"none",duration:2e3}):"vivo"==channel?qg.showToast({message:e}):"oppo"!=channel&&"huawei"!=channel||qg.showToast({icon:"none",title:e,duration:2e3})},showModal:function(e,t,n){void 0===n&&(n=!0),"tt"==channel?tt.showModal({title:e,content:t,showCancel:n}):"wx"==channel?wx.showModal({title:e,content:t,showCancel:n}):"qq"==channel?qq.showModal({title:e,content:t,showCancel:n}):"oppo"==channel&&qg.showModal({title:e,content:t,showCancel:n})},screenShot:function(t,n,i){void 0===i&&(i=!1),null==i&&(i=!1);var a=new cc.RenderTexture,o=cc.game._renderContext;a.initWithSize(Math.floor(cc.winSize.width),Math.floor(cc.winSize.height),o.STENCIL_INDEX8),t.targetTexture=a,t.render();var s=a.readPixels(),c=document.createElement("canvas"),r=c.getContext("2d"),l=Math.floor(n.width),d=Math.floor(n.height);c.width=l,c.height=d;var h=r.createImageData(l,d),u=n.parent.convertToWorldSpaceAR(n.position);u=cc.find("Canvas").convertToNodeSpaceAR(u);for(var p=Math.floor((cc.winSize.width-1)/2)-Math.floor((l-1)/2)+Math.floor(u.x),m=Math.floor((cc.winSize.height-1)/2)-Math.floor((d-1)/2)+Math.floor(u.y),g=0;g<d;g++)for(var f=0;f<l;f++){var v;v=4*((d-1-g)*l+f);var y=4*((g+m)*Math.floor(cc.winSize.width)+(f+p));h.data[v]=s[y],h.data[v+1]=s[y+1],h.data[v+2]=s[y+2],h.data[v+3]=i?Math.round(255*Math.sqrt(s[y+3]/255)):255}if(cc.sys.platform!=cc.sys.DESKTOP_BROWSER)if("oppo"==channel)this.filePath=qg.saveImageTempSync({data:h.data,width:c.width,height:c.height,fileType:"png"});else if("vivo"==channel){jpeg||(jpeg=e("jpeg-js"));var S={data:h.data,width:l,height:d},C=jpeg.encode(S,50);this.picData=C.data}else"apk"==channel?(this.width=l,this.height=d,this.picData=h.data):"huawei"==channel&&(this.filePath=qg.saveImageTempSync({data:h.data,width:c.width,height:c.height,fileType:"png"}));r.putImageData(h,0,0);var T=new cc.Texture2D;T.initWithElement(c),this.shotImage=new cc.SpriteFrame(T)},saveImageToPhoto:function(e,t,a){if(cc.sys.platform!=cc.sys.DESKTOP_BROWSER){if("ios"==channel)return console.log("jswrapper ATLogger SaveImageToPhoto"),t&&t(),void setTimeout(function(){i.saveImageToPhoto(),a&&a()},.05);if("apk"!=channel){var o=this,s=this.shotImage.getTexture().getHtmlElementObj();if("tt"==channel)s.toTempFilePath({x:0,y:0,width:s.width,height:s.height,destWidth:s.width,destHeight:s.height,success:function(t){var n=t.tempFilePath;tt.saveImageToPhotosAlbum({filePath:n,success:function(){e()},fail:function(e){"saveImageToPhotosAlbum:fail cancel"===e.errMsg?o.showModal("\u4fdd\u5b58\u56fe\u7247\u5931\u8d25","\u60a8\u5df2\u53d6\u6d88\u4fdd\u5b58\u56fe\u7247\u5230\u76f8\u518c",!1):tt.showModal({title:"\u63d0\u793a",content:"\u4fdd\u5b58\u56fe\u7247\u5931\u8d25\uff0c\u8bf7\u68c0\u67e5\u8bbe\u7f6e\u7684\u83b7\u53d6\u76f8\u518c\u6743\u9650\u540e\u518d\u5c1d\u8bd5\u4fdd\u5b58\uff01",complete:function(e){console.log(e),e.confirm?tt.openSetting({}):tt.showModal({title:"\u4fdd\u5b58\u56fe\u7247\u5931\u8d25",content:"\u60a8\u5df2\u53d6\u6d88\u4fdd\u5b58\u56fe\u7247\u5230\u76f8\u518c\uff01",showCancel:!1})}})}})},fail:function(e){console.log("\u622a\u56fe\u4fdd\u5b58\u76f8\u518c\u83b7\u53d6\u8def\u5f84\u5931\u8d25"),console.log(e)}});else if("wx"==channel)s.toTempFilePath({x:0,y:0,width:s.width,height:s.height,destWidth:s.width,destHeight:s.height,success:function(t){var n=t.tempFilePath;wx.saveImageToPhotosAlbum({filePath:n,success:function(){e()},fail:function(e){"saveImageToPhotosAlbum:fail cancel"===e.errMsg?o.showModal("\u4fdd\u5b58\u56fe\u7247\u5931\u8d25","\u60a8\u5df2\u53d6\u6d88\u4fdd\u5b58\u56fe\u7247\u5230\u76f8\u518c",!1):wx.showModal({title:"\u63d0\u793a",content:"\u4fdd\u5b58\u56fe\u7247\u5931\u8d25\uff0c\u8bf7\u68c0\u67e5\u8bbe\u7f6e\u7684\u83b7\u53d6\u76f8\u518c\u6743\u9650\u540e\u518d\u5c1d\u8bd5\u4fdd\u5b58\uff01",complete:function(e){console.log(e),e.confirm?wx.openSetting({}):wx.showModal({title:"\u4fdd\u5b58\u56fe\u7247\u5931\u8d25",content:"\u60a8\u5df2\u53d6\u6d88\u4fdd\u5b58\u56fe\u7247\u5230\u76f8\u518c\uff01",showCancel:!1})}})}})},fail:function(e){console.log("\u622a\u56fe\u4fdd\u5b58\u76f8\u518c\u83b7\u53d6\u8def\u5f84\u5931\u8d25"),console.log(e)}});else if("qq"==channel)s.toTempFilePath({x:0,y:0,width:s.width,height:s.height,destWidth:s.width,destHeight:s.height,success:function(t){var n=t.tempFilePath;qq.saveImageToPhotosAlbum({filePath:n,success:function(){e()},fail:function(e){console.log(e),"saveImageToPhotosAlbum:fail cancel"==e.errMsg?o.showModal("\u4fdd\u5b58\u56fe\u7247\u5931\u8d25","\u60a8\u5df2\u53d6\u6d88\u4fdd\u5b58\u56fe\u7247\u5230\u76f8\u518c",!1):qq.showModal({title:"\u63d0\u793a",content:"\u4fdd\u5b58\u56fe\u7247\u5931\u8d25\uff0c\u60a8\u53ef\u4ee5\u70b9\u51fb\u786e\u5b9a\u8bbe\u7f6e\u83b7\u53d6\u76f8\u518c\u6743\u9650\u540e\u518d\u5c1d\u8bd5\u4fdd\u5b58\uff01",complete:function(e){console.log(e),e.confirm?qq.openSetting({}):qq.showModal({title:"\u4fdd\u5b58\u56fe\u7247\u5931\u8d25",content:"\u60a8\u5df2\u53d6\u6d88\u4fdd\u5b58\u56fe\u7247\u5230\u76f8\u518c\uff01",showCancel:!1})}})}})},fail:function(e){console.log("\u622a\u56fe\u4fdd\u5b58\u76f8\u518c\u83b7\u53d6\u8def\u5f84\u5931\u8d25"),console.log(e)}});else if("swan"==channel)s.toTempFilePath({x:0,y:0,width:s.width,height:s.height,destWidth:s.width,destHeight:s.height,success:function(t){var n=t.tempFilePath;swan.saveImageToPhotosAlbum({filePath:n,success:function(){e()},fail:function(e){console.log(e),"saveImageToPhotosAlbum:fail cancel"==e.errMsg?swan.showModal({title:"\u4fdd\u5b58\u56fe\u7247\u5931\u8d25",content:"\u60a8\u5df2\u53d6\u6d88\u4fdd\u5b58\u56fe\u7247\u5230\u76f8\u518c\uff01",showCancel:!1}):swan.showModal({title:"\u63d0\u793a",content:"\u4fdd\u5b58\u56fe\u7247\u5931\u8d25\uff0c\u60a8\u53ef\u4ee5\u70b9\u51fb\u786e\u5b9a\u8bbe\u7f6e\u83b7\u53d6\u76f8\u518c\u6743\u9650\u540e\u518d\u5c1d\u8bd5\u4fdd\u5b58\uff01",complete:function(e){console.log(e),e.confirm?swan.openSetting({}):swan.showModal({title:"\u4fdd\u5b58\u56fe\u7247\u5931\u8d25",content:"\u60a8\u5df2\u53d6\u6d88\u4fdd\u5b58\u56fe\u7247\u5230\u76f8\u518c\uff01",showCancel:!1})}})}})},fail:function(e){console.log("\u622a\u56fe\u4fdd\u5b58\u76f8\u518c\u83b7\u53d6\u8def\u5f84\u5931\u8d25"),console.log(e)}});else if("oppo"==channel)try{qg.saveImageToPhotosAlbum({filePath:o.filePath,success:function(){e()},fail:function(e){console.log(e),"saveImageToPhotosAlbum:fail cancel"==e.errMsg?o.showModal("\u4fdd\u5b58\u56fe\u7247\u5931\u8d25","\u60a8\u5df2\u53d6\u6d88\u4fdd\u5b58\u56fe\u7247\u5230\u76f8\u518c",!1):o.showModal("\u63d0\u793a","\u4fdd\u5b58\u56fe\u7247\u5931\u8d25\uff0c\u60a8\u53ef\u4ee5\u8bbe\u7f6e\u5b8c\u76f8\u518c\u6743\u9650\u540e\u518d\u5c1d\u8bd5\u4fdd\u5b58\uff01",!1)}})}catch(r){console.log(r),o.showModal("\u63d0\u793a","\u4fdd\u5b58\u56fe\u7247\u5931\u8d25",!1)}else if("vivo"==channel){this.filePath="internal://files/work/avatar"+n.getNowTime()+".jpg";var c=qg.writeFileSync({uri:o.filePath,text:o.picData,encoding:"binary"});"success"===c?qg.saveToPhotoAlbum({uri:o.filePath,success:function(){e()},fail:function(e,t){console.log("jswrapper:saveToPhotoAlbum handling fail, code = "+t),o.showToast("\u4fdd\u5b58\u56fe\u7247\u5931\u8d25\uff0c\u8bf7\u68c0\u67e5\u8bbe\u7f6e\u7684\u83b7\u53d6\u76f8\u518c\u6743\u9650\u540e\u518d\u5c1d\u8bd5\u4fdd\u5b58\uff01")}}):console.log("jswrapper:writeFileSync handling fail, result = "+c)}else if("huawei"==channel)try{console.log("path="+o.filePath),hbs.saveImageToPhotosAlbum({filePath:o.filePath,success:function(){hbs.showModal({title:"\u4fdd\u5b58\u6210\u529f",content:"\u60a8\u5df2\u6210\u529f\u4fdd\u5b58\u56fe\u7247\u5230\u76f8\u518c\uff01",showCancel:!1})},fail:function(e){console.log("fail:"+e.errMsg),console.log(e),"saveImageToPhotosAlbum:fail cancel"==e.errMsg?hbs.showModal({title:"\u4fdd\u5b58\u5931\u8d25",content:"\u60a8\u5df2\u53d6\u6d88\u4fdd\u5b58\u56fe\u7247\u5230\u76f8\u518c\uff01",showCancel:!1}):hbs.showModal({title:"\u63d0\u793a",content:"\u4fdd\u5b58\u56fe\u7247\u5931\u8d25\uff0c\u60a8\u53ef\u4ee5\u8bbe\u7f6e\u5b8c\u76f8\u518c\u6743\u9650\u540e\u518d\u5c1d\u8bd5\u4fdd\u5b58\uff01",showCancel:!1})}})}catch(r){console.log("exception="+r.message),hbs.showModal({title:"\u63d0\u793a",content:"\u4fdd\u5b58\u56fe\u7247\u5931\u8d25",showCancel:!1})}}else i.saveImageToPhoto(this.picData,this.width,this.height,e)}else"apk"==channel?(console.log(this.picData,this.width,this.height),e&&e()):"ios"==channel?(t&&t(),setTimeout(function(){a&&a()},2)):e&&e()},createDesktopIcon:function(e){if(void 0===e&&(e=0),cc.sys.platform!=cc.sys.DESKTOP_BROWSER){var t=this;"oppo"==channel||"vivo"==channel?qg.hasShortcutInstalled({success:function(n){try{0==n?qg.installShortcut({success:function(){0==e&&t.showToast("\u684c\u9762\u56fe\u6807\u5df2\u6dfb\u52a0")},fail:function(){0==e&&t.showToast("\u684c\u9762\u56fe\u6807\u6dfb\u52a0\u5931\u8d25")}}):0==e&&t.showToast("\u5df2\u7ecf\u6dfb\u52a0\u5230\u684c\u9762")}catch(i){}},fail:function(e){console.log("fail"),console.log(e)},complete:function(){}}):"qq"==channel?qq.saveAppToDesktop({success:function(e){console.log(e)},fail:function(e){console.log(e)}}):"tt"==channel?tt.addShortcut({success:function(){console.log("\u6dfb\u52a0\u684c\u9762\u6210\u529f")},fail:function(e){console.log("\u6dfb\u52a0\u684c\u9762\u5931\u8d25",e.errMsg)}}):"huawei"==channel&&qg.hasShortcutInstalled({success:function(n){console.log("hasInstalledsuccess\uff1a "+n),n?0==e&&t.showToast("\u684c\u9762\u56fe\u6807\u5df2\u6dfb\u52a0"):qg.installShortcut({message:"\u5c06\u5feb\u6377\u65b9\u5f0f\u6dfb\u52a0\u5230\u684c\u9762\uff0c\u65b9\u4fbf\u4e0b\u6b21\u4f7f\u7528\u3002",success:function(){console.log("handling install success")},fail:function(n,i){console.log("handling install fail: "+n+", errocode: "+i),0==e&&t.showToast("\u684c\u9762\u56fe\u6807\u6dfb\u52a0\u5931\u8d25")}})},fail:function(e){console.log("hasInstalled fail: "+e)},complete:function(){console.log("hasInstalled complete")}})}},recordInit:function(e,t,i,a,o){if(void 0===i&&(i=!0),void 0===a&&(a=!0),void 0===o&&(o=30),cc.sys.platform!=cc.sys.DESKTOP_BROWSER&&"tt"==channel){var s=this;this.recorder=tt.getGameRecorderManager(),this.recorder.onStart(function(){this.recorderFlag=!0,this.startRecordTime=n.getNowTime(),e()}.bind(this)),this.recorder.onError(function(t){console.log("record error"),console.log(t),this.recorderFlag=!1,this.pickId=1,e()}.bind(this)),this.recorder.onStop(function(e){this.recorderFlag=!1,a&&1==this.pickId?this.recorder.clipVideo({path:e.videoPath,timeRange:[o,0],success:function(e){s.videoPath=e.videoPath,t()},fail:function(n){console.error(n),s.videoPath=e.videoPath,t()}}):(this.videoPath=e.videoPath,t()),this.pickId=1}.bind(this)),i&&0==this.recorderFlag&&this.recorder.start({duration:s.recordTimes})}},recordHandle:function(e){cc.sys.platform!=cc.sys.DESKTOP_BROWSER&&(0==this.recorderFlag?(console.log("\u624b\u52a8\u5f00\u59cb"),this.pickId=2,this.recorder.start({duration:this.recordTimes})):(console.log("\u624b\u52a8\u7ed3\u675f"),n.getNowTime()-this.startRecordTime<3e3?e&&e():(this.pickId=3,this.recorder.stop())))},shareVideo:function(e,t){var n=this,i={videoPath:n.videoPath};this.systemInfo&&"Douyin"==this.systemInfo.appName?null==n.topics2?(i.videoTopics=[n.topics1],i.hashtag_list=[n.topics1]):(i.videoTopics=[n.topics1,n.topics2],i.hashtag_list=[n.topics1,n.topics2]):this.systemInfo&&"Toutiao"==this.systemInfo.appName&&(i.createChallenge=!0),tt.shareAppMessage({channel:"video",extra:i,success:function(){t&&t()},fail:function(t){t.errMsg&&-1==t.errMsg.substr("cancel")&&(console.log(t.errMsg),-1==t.errMsg.substr("file not exit")&&-1==t.errMsg.substr("get shareInnfo return null")||(n.videoPath=null),e&&e())}})}},cc._RF.pop()},{NativePlatformCommon:"NativePlatformCommon",TimeModule:"TimeModule","jpeg-js":void 0}],ChooseCatPanel:[function(e,t){"use strict";cc._RF.push(t,"59c65DWEGVHg6+0SPeNGoQf","ChooseCatPanel");var n=e("GameControl"),i=e("AudioModule"),a=e("PanelBase");cc.Class({extends:a,properties:{chooseItem:cc.Prefab,scrollView:cc.ScrollView,curSelectImage:cc.Sprite},onLoad:function(){},start:function(){n.curScene.curSelectImage=this.curSelectImage,this.initItems(),this.sizeFit();var e=cc.find("bottom/btnOk",this.node);n.curScene.tutorialStartHandle(n.TutorialType.miniGame,e)},sizeFit:function(){isHasAd&&("apk"==channel&&"google"==subChannel||"ios"==channel)&&(this.node.y+=50,this.node.getChildByName("splash").y-=50)},onEnable:function(){this._super(),this.updateItems()},initItems:function(){var e,t;console.log(n.panelMsg);for(var i=0;i<n.petalMsg.length;i++){var a,o=cc.instantiate(this.chooseItem);o.parent=this.scrollView.content,o.getComponent("ChooseItem").initItem(n.petalMsg[i]),0==i&&(e=o.height,t=o.width);var s=i%3,c=void 0;switch(Math.floor(i/3)){case 0:c=-(t+20);break;case 1:c=0;break;case 2:c=t+20}a=-e/2-s*(e+30),o.setPosition(c,a)}this.scrollView.content.height=Math.ceil(n.panelMsg.length/3)*(e+30)+30},updateItems:function(){for(var e=this.scrollView.content.children,t=0;t<e.length;t++)e[t].getComponent("ChooseItem").updateItem()},btnOk:function(){i.playEffect("click"),this.node.active=!1,n.curScene.tutorialEndHandle(n.TutorialType.miniGame,2),n.curScene.loadScene(n.SceneName[n.curScene.sceneName])},btnClose:function(e){e&&n.isForbid()||(i.playEffect("click"),this.node.active=!1)}}),cc._RF.pop()},{AudioModule:"AudioModule",GameControl:"GameControl",PanelBase:"PanelBase"}],ChooseItem:[function(e,t){"use strict";cc._RF.push(t,"1f79akVeo9J8qgxmViq0bns","ChooseItem");var n=e("GameControl"),i=e("StorageModule"),a=e("LoadResModule");cc.Class({extends:cc.Component,properties:{image:cc.Sprite,selectedNode:cc.Node},start:function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this)},initItem:function(e){this.frameName=e.name,this.updateItem(),this.LoadImage(),n.curCatName==this.frameName?(n.curScene.lastSelectItem=this,n.curCatName=this.frameName,this.selectedNode.active=!0):this.selectedNode.active=!1},updateItem:function(){var e=n.getIndexBySkinName(this.frameName);2==i.getData("petal"+e)?(this.isGet=!0,this.image.node.opacity=255):(this.isGet=!1,this.image.node.opacity=127)},LoadImage:function(){var e=this,t="cats/"+this.frameName;a.getBundleRes(n.catBundle,t,function(t){e.image.spriteFrame=t,n.curCatName==e.frameName&&(n.curScene.curSelectImage.spriteFrame=t)},cc.SpriteFrame)},onTouchStart:function(e){this.lastPosition=e.touch.getLocation(),this.moveFlag=!1},onTouchMove:function(e){var t=e.touch.getLocation();this.lastPosition||(this.lastPosition=t),(Math.abs(t.x-this.lastPosition.x)>5||Math.abs(t.y-this.lastPosition.y)>5)&&(this.moveFlag=!0)},onTouchEnd:function(){if(0==this.moveFlag){if(!this.isGet)return void n.remindPanelCtrl.showSimpleRemind("\u8be5\u732b\u54aa\u8fd8\u672a\u83b7\u5f97");if(n.curCatName==this.frameName)return;n.curScene.lastSelectItem&&(n.curScene.lastSelectItem.selectedNode.active=!1),n.curScene.lastSelectItem=this,n.curCatName=this.frameName,n.curScene.curSelectImage.spriteFrame=this.image.spriteFrame,this.selectedNode.active=!0}this.moveFlag=!1}}),cc._RF.pop()},{GameControl:"GameControl",LoadResModule:"LoadResModule",StorageModule:"StorageModule"}],Combination:[function(e,t){"use strict";cc._RF.push(t,"3945drwvV5LLqkV8JOUxmI0","Combination");var n=e("MathModule"),i=e("GameControl"),a=e("EngineCommon");cc.Class({extends:cc.Component,properties:{toys:{type:cc.Node,default:[]},associationNode:cc.Node},start:function(){this.node.on("occupy",this.occupyHandle,this),this.node.on("free",this.freeHandle,this),i.ToyType[this.node.name]==i.ToyType.lounge?this.indexArr=[-1,-1]:i.ToyType[this.node.name]==i.ToyType.massage&&(this.stateArr=[0,0],this.updateToy())},updateToy:function(){var e=this.toys[0].getComponent("ToyBase").skeleton,t=this.toys[1].getComponent("ToyBase").skeleton;if(0==this.stateArr[0]&&0==this.stateArr[1]){a.spineAnimationPlay(e,"talk",!0);var i=n.rangeRandom(1,4);a.spineAnimationPlay(t,"talk"+i,!0)}else 0==this.stateArr[0]&&1==this.stateArr[1]?a.spineAnimationPlay(e,"Idle",!0):1==this.stateArr[0]&&0==this.stateArr[1]&&a.spineAnimationPlay(t,"Idle",!0)},occupyHandle:function(e){if(parseInt(this.index)==i.ToyType.lounge){for(var t=[0,1,2,3],a=0;a<this.indexArr.length;a++)a!=e&&this.indexArr[a]>0&&t.splice(this.indexArr[a]);console.log(t);var o=n.rangeRandom(0,t.length);this.indexArr[e]=o,this.toys[e].getComponent("ToyBase").animationIndex=o,o>0&&(this.associationNode.children[o-1].active=!1)}else this.index==i.ToyType.massage&&(this.stateArr[e]=1,this.updateToy())},freeHandle:function(e){if(console.log("\u66f4\u65b0\u7ec4\u5408\u9053\u5177\u72b6\u6001"),this.index==i.ToyType.lounge){var t=this.indexArr[e];console.log(t),t>0&&(this.associationNode.children[t-1].active=!0),this.indexArr[e]=-1}else this.index==i.ToyType.massage&&(this.stateArr[e]=0,this.updateToy())}}),cc._RF.pop()},{EngineCommon:"EngineCommon",GameControl:"GameControl",MathModule:"MathModule"}],CommonPanel:[function(e,t){"use strict";cc._RF.push(t,"6aa43d3r8lOiKyt2NxMo+N4","CommonPanel");var n=e("PanelBase");cc.Class({extends:n,properties:{},start:function(){}}),cc._RF.pop()},{PanelBase:"PanelBase"}],DIYCabinet:[function(e,t){"use strict";cc._RF.push(t,"da389vE3PBCuI8AaNbEtlm+","DIYCabinet");var n=e("GameCommon"),i=e("GameControl"),a=e("StorageModule"),o=e("StatisticsModule");cc.Class({extends:cc.Component,properties:{holder:cc.Node,addNode:cc.Node,editNode:cc.Node,deleteNode:cc.Node,searchNode:cc.Node},onLoad:function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this)},start:function(){},initItem:function(e,t){void 0===t?(this.displayNum=-1,this.addNode.active=!0,this.editNode.active=!1,this.deleteNode.active=!1,this.searchNode.active=!1):(this.addNode.active=!1,this.displayNum=t,a.getJsonData("diy"+this.displayNum)?this.hideBtn():(this.showBtn(),i.curScene.generateOneCat(-1,i.catState.display,-1,this.holder,cc.v2(0,0),this.displayNum)))},hideBtn:function(){console.log("hidebtn"),this.editNode.active=!1,this.deleteNode.active=!1,this.searchNode.active=!0},showBtn:function(){this.editNode.active=!0,this.deleteNode.active=!0,this.searchNode.active=!1},btnEdit:function(){if(!i.isForbid()&&0!=this.holder.childrenCount){var e=this.holder.children[0].getComponent("Cat");i.curCatName=e.name,i.displayNum=this.displayNum,i.curScene.loadScene(i.SceneName.dressUp),o.eventStatistics("diyEdit")}},btnDelete:function(){i.isForbid()||0!=this.holder.childrenCount&&(i.remindPanelCtrl.showRemindPanel(4,this.node,this.displayNum),o.eventStatistics("diyDelete"))},onTouchStart:function(e){this.lastPosition=e.touch.getLocation(),this.moveFlag=!1},onTouchMove:function(e){null==this.lastPosition&&(this.lastPosition=e.touch.getLocation());var t=e.touch.getLocation();(Math.abs(t.x-this.lastPosition.x)>5||Math.abs(t.y-this.lastPosition.y)>5)&&(this.moveFlag=!0)},onTouchEnd:function(){if(0==this.moveFlag){if(i.isForbid([i.TutorialType.DIY]))return;if(!n.isCanClick())return;if(this.addNode.active){if(i.curScene.diyCabinetMsg.length>=i.maxCabinetNum)return void i.remindPanelCtrl.showSimpleRemind("\u5df2\u8fbe\u5230\u6700\u5927\u6570\u91cf\uff0c\u8bf7\u5148\u5220\u9664\uff01");for(var e=0;e<i.maxCabinetNum;e++){for(var t=0;t<i.curScene.diyCabinetMsg.length&&i.curScene.diyCabinetMsg[t]!==e;t++);if(t===i.curScene.diyCabinetMsg.length)break}return i.isAdd=!0,i.displayNum=e,i.curCatName="r1",i.curScene.tutorialEndHandle(i.TutorialType.DIY,2),i.curScene.loadScene(i.SceneName.dressUp),void o.eventStatistics("diyAdd")}if(this.searchNode.active){var s=a.getJsonData("diy"+this.displayWindowCtrl);if(console.log(s),s&&s.scene==i.roomType){var c=i.curScene.findCat(this.displayNum,!0);c?i.curScene.changeCameraPosToObj(c):(console.log("\u903b\u8f91\u6709\u95ee\u9898\uff0c\u6709\u732b\u54aa\u5b58\u50a8\u4fe1\u606f\uff0c\u4f46\u5b9a\u4f4d\u4e0d\u5230\u732b\u54aa"+JSON.stringify(s)),i.remindPanelCtrl.showSimpleRemind("\u4e0d\u5728\u8be5\u623f\u95f4"))}else if(s){var r="\u732b\u54aa\u5728"+{0:"\u5b66\u9662",1:"\u65c5\u9986",2:"\u690d\u7269\u623f",3:"\u751c\u54c1\u623f"}[s.scene];i.remindPanelCtrl.showSimpleRemind(r)}else console.log("\u903b\u8f91\u6709\u95ee\u9898\uff0c\u6ca1\u6709\u5b58\u50a8\u4fe1\u606f\uff0c\u5c55\u67dc\u786e\u6ca1\u521d\u59cb\u5316")}}this.moveFlag=!1}}),cc._RF.pop()},{GameCommon:"GameCommon",GameControl:"GameControl",StatisticsModule:"StatisticsModule",StorageModule:"StorageModule"}],DailyGiftPanel:[function(e,t){"use strict";cc._RF.push(t,"f5b19LxWDxNSKQYYGi0cOG5","DailyGiftPanel");var n=e("GameControl"),i=e("GameCommon"),a=e("StorageModule"),o=e("TimeModule"),s=e("AdInfo"),c=e("LanguageModule"),r=e("PanelBase"),l=e("AudioModule");cc.Class({extends:r,properties:{barSprite:cc.Sprite,cursorNode:cc.Node,bellNumLabel:{type:cc.Label,default:[]}},onLoad:function(){this.bellNumAry=[50,70,100,150],this.initPanel(),this.sizeFit()},sizeFit:function(){isHasAd&&("apk"==channel&&"google"==subChannel||"ios"==channel)&&(this.node.y+=50,this.node.getChildByName("splash").y-=50)},initPanel:function(){var e=a.getData("dailyGiftDate");if(e){var t=o.getCurrentDate();o.getDaysBetween(t,e)>0&&(a.setData("dailyGiftState",0),a.setData("dailyGiftDate",t))}for(var n=0;n<this.bellNumAry.length;n++)this.bellNumLabel[n].string=this.bellNumAry[n];this.updatePanel()},updatePanel:function(){var e=parseInt(a.getData("dailyGiftState",0));0!=e?(this.barSprite.fillRange=-e/this.bellNumAry.length,this.cursorNode.active=!0,this.cursorNode.y=this.barSprite.progress*this.barSprite.node.height):(this.barSprite.fillRange=0,this.cursorNode.active=!1),e==this.bellNumAry.length&&(cc.find("bottom/overTip",this.node).active=!0,cc.find("bottom/btnGet",this.node).active=!1)},btnVideo:function(e){var t=this;i.isCanClick()&&(l.playEffect("click"),s.adsManager.showVideo("dailyGift",function(i){if(i){var s=parseInt(a.getData("dailyGiftState",0)),r="\u606d\u559c\u83b7\u5f97&1\u4e2a\u94c3\u94db";r=(r=c.translateString(r)).replace("&1",t.bellNumAry[s]),n.remindPanelCtrl.showSimpleRemind(r,!1),a.setData("dailyGiftState",s+1),a.setData("dailyGiftDate",o.getCurrentDate()),t.updatePanel(),"wx"==channel?n.updateBellNum(n.curScene.bellLabel,t.bellNumAry[s]):n.remindPanelCtrl.coinMoveFunc(n.curScene.bellLabel.node,function(){n.updateBellNum(n.curScene.bellLabel,t.bellNumAry[s])},e.target)}}))},btnClose:function(){l.playEffect("click"),this.node.active=!1}}),cc._RF.pop()},{AdInfo:"AdInfo",AudioModule:"AudioModule",GameCommon:"GameCommon",GameControl:"GameControl",LanguageModule:"LanguageModule",PanelBase:"PanelBase",StorageModule:"StorageModule",TimeModule:"TimeModule"}],DecorationItem:[function(e,t){"use strict";cc._RF.push(t,"0938c/M9o1Gs4UyDdyU9RXU","DecorationItem");var n=e("GameControl"),i=e("StatisticsModule");cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this)},start:function(){this.animation=this.node.getComponent(cc.Animation),this.state=0},onTouchStart:function(e){n.curScene.onTouchStart(e),this.startPosition=e.touch.getLocation(),this.isMove=!1},onTouchMove:function(e){n.curScene.onTouchMove(e);var t=e.touch.getLocation();null==this.startPosition&&(this.startPosition=t),(Math.abs(t.x-this.startPosition.x)>10||Math.abs(t.y-this.startPosition.y)>10)&&(this.isMove=!0)},onTouchEnd:function(){0==this.isMove&&(1==this.type?1==this.state?(this.node.children[1].active=!0,this.node.children[0].active=!1,this.state=0):(this.node.children[1].active=!1,this.node.children[0].active=!0,this.state=1):2==this.type&&(this.animation?1==this.state?(this.animation.play("on"),this.state=0):(this.animation.play("off"),this.state=1):cc.tween(this.node).to(.1,{angle:5}).to(.2,{angle:-5}).to(.1,{angle:0}).union().repeat(3).start()),i.eventStatistics("decoration")),this.isMove=!1}}),cc._RF.pop()},{GameControl:"GameControl",StatisticsModule:"StatisticsModule"}],DemandCtrl:[function(e,t){"use strict";cc._RF.push(t,"b29c748r4dBM6MXrAQN9Ozr","DemandCtrl");var n=e("GameControl"),i=e("EngineCommon"),a=e("MyProgressBar");cc.Class({extends:cc.Component,properties:{progressBar:a,hand:cc.Node},onLoad:function(){n.curScene.demandCtrl=this},onDestroy:function(){n.curScene.demandCtrl=null},start:function(){n.curScene.gamePause=!0,this.isMove=!1,this.setProgress(0)},init:function(e,t){this.catCtrl=t;for(var n=1;n<this.node.childrenCount;n++)e==n?(this.node.children[n].active=!0,this.moveItemCtrl=this.node.children[n].getChildByName("moveNode").getComponent("MoveItem")):this.node.children[n].active=!1},setProgress:function(e,t){void 0===t&&(t=0),this.isFinish||(0==t?this.progressBar.progress=e:1==t&&(this.progressBar.progress+=e),this.progressBar.progress>=1&&(this.isFinish=!0,this.finishHandle()))},playAnimation:function(e){e!=this.state&&(this.state=e,0==e?i.spineAnimationPlay(this.catCtrl.skeleton,"idle",!0):1==e?i.spineAnimationPlay(this.catCtrl.skeleton,"idleEat",!0):2==e&&i.spineAnimationPlay(this.catCtrl.skeleton,"happy",!0))},checkTouchMove:function(){n.curScene.demandCtrl&&(n.curScene.demandCtrl.isFinish||(n.curScene.demandCtrl.isMove?n.curScene.demandCtrl.isMove=!1:3==n.curScene.demandCtrl.moveItemCtrl.type&&4==n.curScene.demandCtrl.moveItemCtrl.curStep&&1==n.curScene.demandCtrl.moveItemCtrl.playState&&n.curScene.demandCtrl.moveItemCtrl.animation.pause("rag1"),setTimeout(n.curScene.demandCtrl.checkTouchMove,500)))},finishHandle:function(){this.playAnimation(2),n.curScene.interactionEndHandle(this.catCtrl),this.node.destroy()},showTutorial:function(e,t){var n=this,i=e.parent.convertToWorldSpaceAR(e.position);i=this.node.convertToNodeSpaceAR(i);var a=t.parent.convertToWorldSpaceAR(t.position);a=this.node.convertToNodeSpaceAR(a),this.hand.active=!0,this.hand.position=i,cc.tween(this.hand).to(1,{position:a}).delay(.5).call(function(){n.hand.position=i}).union().repeatForever().start()},hideTutorial:function(){this.hand.stopAllActions(),this.hand.active=!1}}),cc._RF.pop()},{EngineCommon:"EngineCommon",GameControl:"GameControl",MyProgressBar:"MyProgressBar"}],DessertCabinet:[function(e,t){"use strict";cc._RF.push(t,"05c11jn3wNC1I4eP/hVbzNK","DessertCabinet");var n=e("ToyBase"),i=e("MathModule"),a=e("EngineCommon");cc.Class({extends:n,properties:{},start:function(){this.animationName=["Idle","play1","play2","play3"],this.init()},toyHandle:function(){this.animationIndex=i.rangeRandom(1,4),this.playAnimationByState(this.animationIndex)},catHandle:function(){var e=this.holder.children[0].getComponent("Cat");a.spineAnimationPlay(e.skeleton,"play-tianpingui"+this.animationIndex)}}),cc._RF.pop()},{EngineCommon:"EngineCommon",MathModule:"MathModule",ToyBase:"ToyBase"}],DestroyCtrl:[function(e,t){"use strict";cc._RF.push(t,"e8e8fp5R/JHA7QvuQjs3Jt9","DestroyCtrl"),cc.Class({extends:cc.Component,properties:{times:{default:1,tooltip:"\u8bbe\u7f6e\u51e0\u79d2\u540e\u9500\u6bc1\u6240\u5728\u8282\u70b9"}},start:function(){var e=this;this.scheduleOnce(function(){e.node.destroy()},this.times)}}),cc._RF.pop()},{}],DisplayWindow:[function(e,t){"use strict";cc._RF.push(t,"cd7cf4kLqlMTbMTqWmY9Yuh","DisplayWindow");var n=e("GameControl"),i=e("StorageModule"),a=e("MathModule"),o=e("StatisticsModule");cc.Class({extends:cc.Component,properties:{catBtn:cc.Node,diyCatBtn:cc.Node,catScrollView:cc.ScrollView,diyCatScrollView:cc.ScrollView},onLoad:function(){},start:function(){n.isForbid()?(this.catScrollView.horizontal=!1,this.diyCatScrollView.horizontal=!1):(this.catScrollView.horizontal=!0,this.diyCatScrollView.horizontal=!0)},loadData:function(){this.diyCatScrollView.content.emit("loadData",n.curScene.diyCabinetMsg,!0),this.catScrollView.content.emit("loadData",n.petalMsg)},updateBtn:function(){0==n.curScene.windowMode?(this.catBtn.getChildByName("selected").active=!0,this.diyCatBtn.getChildByName("selected").active=!1,this.diyCatScrollView.node.active=!1,this.catScrollView.node.active=!0):(this.catBtn.getChildByName("selected").active=!1,this.diyCatBtn.getChildByName("selected").active=!0,this.diyCatScrollView.node.active=!0,this.catScrollView.node.active=!1)},btnCat:function(e){e&&n.isForbid()||0!=n.curScene.windowMode&&(n.curScene.windowMode=0,this.updateBtn(),this.catScrollView.node.active=!0,0==this.catScrollView.content.childrenCount&&this.catScrollView.content.emit("loadData",n.petalMsg),this.diyCatScrollView.node.active=!1,setTimeout(function(){n.curScene.tutorialStartHandle(n.TutorialType.dragToCabinet)},100),e&&o.eventStatistics("btnCat"))},btnDiyCat:function(e){e&&n.isForbid([n.TutorialType.DIY])||1!=n.curScene.windowMode&&(n.curScene.windowMode=1,this.updateBtn(),this.catScrollView.node.active=!1,this.diyCatScrollView.node.active=!0,0==this.diyCatScrollView.content.childrenCount&&this.diyCatScrollView.content.emit("loadData",n.curScene.diyCabinetMsg,!0),setTimeout(function(){n.curScene.tutorialEndHandle(n.TutorialType.DIY,1)},100),e&&o.eventStatistics("btnDiyCat"))},updateCabinetItem:function(){for(var e=this.catScrollView.content.children,t=0;t<e.length;t++)e[t].getComponent("Cabinet").updateItem()},emptyShowcase:function(e,t){if(e)for(var n=this.diyCatScrollView.content.children,i=0;i<n.length;i++){var a=n[i].getComponent("DIYCabinet");if(a.displayNum==t){a.hideBtn();break}}else for(var o=this.catScrollView.content.children,s=0;s<o.length;s++){var c=o[s].getComponent("Cabinet");if(c.index==t){c.updateBtn("drag-move");break}}},putToShowcase:function(e){var t,o,s=e.getComponent("Cat"),c=s.displayNum;console.log("displayNum="+c);var r=-1;if(-1==c){for(var l=this.catScrollView.content.children,d=0;d<l.length;d++)if(l[d].getComponent("Cabinet").index==s.index){r=d;break}-1==r&&this.catScrollView.content.emit("loadData",n.petalMsg,!1,s.index)}else{for(var h=!1,u=this.diyCatScrollView.content.children,p=0;p<u.length;p++)if(u[p].getComponent("DIYCabinet").displayNum==c){r=p,console.log(u[p].x,this.diyCatScrollView.content.x,this.diyCatScrollView.node.width),Math.abs(u[p].x+this.diyCatScrollView.content.x)<this.diyCatScrollView.node.width/2&&(h=!0);break}if(-1==r)return void console.log("\u672a\u627e\u5230\u5bf9\u5e94\u5c55\u67dc\u4fe1\u606f\uff0c\u8bf7\u68c0\u67e5");console.log("isInView="+h),h||this.diyCatScrollView.content.emit("updatePos",r)}if(-1==c?i.removeKey("cat"+s.index):i.removeKey("diy"+c),-1==c){if(-1==r)for(var m=this.catScrollView.content.children,g=0;g<m.length;g++)if(m[g].getComponent("Cabinet").index==s.index){r=g;break}o=this.catScrollView.content.children[r].getComponent("Cabinet"),t=o.image.node}else o=this.diyCatScrollView.content.children[r].getComponent("DIYCabinet"),t=o.holder;var f=t.convertToWorldSpaceAR(cc.v2(0,0));(f=e.parent.convertToNodeSpaceAR(f)).x=n.curScene.camera.node.x+f.x;var v=e.position.sub(f).mag()/1e3;v=a.clamp(.1,v,.5),cc.tween(e).to(v,{position:f}).call(function(){n.curScene.enableOperate(),-1==c?(o&&o.updateBtn("drag-cabinet"),n.tutorialStep==n.TutorialType.dragToCabinet&&n.curScene.tutorialEndHandle(n.TutorialType.dragToCabinet,1)):o&&o.showBtn(),e.getComponent("Cat").playAnimationByState(n.catState.display),e.parent=t,e.position=cc.v2(0,0),e.scale=1}).start()},deleteShowcase:function(e,t){e.parent=this.node,e.destroy();for(var a=0;a<n.curScene.diyCabinetMsg.length;a++)if(n.curScene.diyCabinetMsg[a]==t){n.curScene.diyCabinetMsg.splice(a,1),i.setJsonData("diyCabinetMsg",n.curScene.diyCabinetMsg);break}i.removeKey("display"+t),this.diyCatScrollView.content.emit("updatePos")}}),cc._RF.pop()},{GameControl:"GameControl",MathModule:"MathModule",StatisticsModule:"StatisticsModule",StorageModule:"StorageModule"}],Divination:[function(e,t){"use strict";cc._RF.push(t,"7b5c47reCZMLqgF7HWqeqs2","Divination");var n=e("ToyBase"),i=e("MathModule"),a=e("EngineCommon"),o=e("AudioModule");cc.Class({extends:n,properties:{},start:function(){this.animationName=["Idle","play-bad","play-best","play-normal","play-good","play-worst"],this.init(),this.skeleton.setStartListener(function(e){e.animation&&e.animation.name})},toyHandle:function(){this.animationIndex=i.rangeRandom(1,6),this.playAnimationByState(this.animationIndex)},catHandle:function(){var e,t=this.holder.children[0].getComponent("Cat");1==this.animationIndex?e="play-zhangbu-bad":2==this.animationIndex?(e="play-zhangbu-best",setTimeout(function(){o.playEffect("synthesizeSuc")},4e3)):3==this.animationIndex?e="play-zhangbu-normal":4==this.animationIndex?(e="play-zhangbu-good",setTimeout(function(){o.playEffect("synthesizeSuc")},4e3)):5==this.animationIndex&&(e="play-zhangbu-worst"),a.spineAnimationPlay(t.skeleton,e)}}),cc._RF.pop()},{AudioModule:"AudioModule",EngineCommon:"EngineCommon",MathModule:"MathModule",ToyBase:"ToyBase"}],DollMachine:[function(e,t){"use strict";cc._RF.push(t,"2fe8bXNQkRMravz1sW9CZea","DollMachine");var n=e("ToyBase"),i=e("MathModule"),a=e("EngineCommon"),o=e("AudioModule");cc.Class({extends:n,properties:{},start:function(){var e=this;this.animationName=["Idle","play-wawa1","play-wawa2","play-wawa3","play-fail"],this.init(),this.skeleton.setCompleteListener(function(t){"Idle"!=(t.animation?t.animation.name:"")&&console.log("\u9053\u5177\u4e92\u52a8\u7ed3\u675f"+e.node.name)})},toyHandle:function(){this.isSuccess=Math.random()<.5,this.isSuccess?(this.animationIndex=i.rangeRandom(1,4),this.playAnimationByState(this.animationIndex)):this.playAnimationByState(4),o.playEffect("doll")},catHandle:function(){var e=this.holder.children[0].getComponent("Cat");this.isSuccess?a.spineAnimationPlay(e.skeleton,"play-wawaji"+this.animationIndex):a.spineAnimationPlay(e.skeleton,"play-wawaji-fail")}}),cc._RF.pop()},{AudioModule:"AudioModule",EngineCommon:"EngineCommon",MathModule:"MathModule",ToyBase:"ToyBase"}],EngineCommon:[function(e,t){"use strict";cc._RF.push(t,"be3cc+b6dJET7FfOknSKuLe","EngineCommon");var n=e("LoadResModule"),i=e("ObjModule"),a=e("LogCommon");t.exports={enableCollide:function(e){void 0===e&&(e=!1),cc.director.getCollisionManager().enabled=!0,cc.director.getCollisionManager().enabledDebugDraw=e},disableCollide:function(){cc.director.getCollisionManager().enabled=!1},enablePhysics:function(e){void 0===e&&(e=!1),cc.director.getPhysicsManager().enabled=!0,cc.director.getPhysicsManager().debugDrawFlags=e?cc.PhysicsManager.DrawBits.e_aabbBit|cc.PhysicsManager.DrawBits.e_pairBit|cc.PhysicsManager.DrawBits.e_centerOfMassBit|cc.PhysicsManager.DrawBits.e_jointBit|cc.PhysicsManager.DrawBits.e_shapeBit:0},disablePhysics:function(){cc.director.getPhysicsManager().enabled=!1},enableMultiTouch:function(){cc.macro.ENABLE_MULTI_TOUCH=!0},disableMultiTouch:function(){cc.macro.ENABLE_MULTI_TOUCH=!1},addClickEvent:function(e,t,n,i,a){e.getComponent(cc.Button)||e.addComponent(cc.Button);var o=new cc.Component.EventHandler;o.target=t,o.component=n,o.handler=i,void 0!==a&&(o.customEventData=a),e.getComponent(cc.Button).clickEvents.push(o)},addScrollEvent:function(e,t,n,i,a){var o=new cc.Component.EventHandler;o.target=t,o.component=n,o.handler=i,void 0!==a&&(o.customEventData=a);var s=e.getComponent(cc.ScrollView);s.scrollEvents=[],s.scrollEvents.push(o)},isLoadPanelSuc:!0,loadPanel:function(e,t,i,a){if(void 0===a&&(a=null),this.isLoadPanelSuc){var o=i.getChildByName(t);o?o.active||(o.active=!0,a&&a(o)):(this.isLoadPanelSuc=!1,e?n.getBundleRes(e,"prefabs/"+t,function(e){var t=cc.instantiate(e);t.parent=i,t.zIndex=0,t.active=!0,a&&a(t),this.isLoadPanelSuc=!0}.bind(this),cc.Prefab):n.loadLocalRes("prefabs/"+t,function(e){var t=cc.instantiate(e);t.parent=i,t.active=!0,a&&a(t),this.isLoadPanelSuc=!0}.bind(this)))}},loadImage:function(e,t,i,a,o,s){void 0===o&&(o=null),void 0===s&&(s=!0),t?n.getBundleRes(t,i+a,function(t){e.spriteFrame=t,o&&o(t)},cc.SpriteFrame):s?n.loadLocalRes(i+a,function(t){e.spriteFrame=t,o&&o(t)},cc.SpriteFrame):n.loadRes(serverPath+i+a,function(t){e.spriteFrame=new cc.SpriteFrame(t),o&&o(e.spriteFrame)})},newSkeletonData:function(e){var t=new sp.SkeletonData;return t._uuid=e._uuid+"_"+(new Date).getTime()+"_copy",t.skeletonJson=e.skeletonJson,t.atlasText=e.atlasText,t.textures=e.textures,t.textureNames=e.textureNames,t},spineAnimationPlay:function(e,t,n,a,o){if(void 0===n&&(n=!1),void 0===a&&(a=!1),void 0===o&&(o=0),e.clearTracks(),e.setToSetupPose(),"Array"==i.checkType(t))if(1==a)e.setAnimation(o,t[0],!1),e.addAnimation(o,t[1],n);else for(var s=o;s<t.length;s++)e.setAnimation(s,t[s],n[s]);else a?e.addAnimation(o,t,n):e.setAnimation(o,t,n)},changeSlotImage:function(e,t,i,a,o){var s=this;if(i)n.getBundleRes(i,a+o,function(n){s.changeSlot(e,t,n)},cc.SpriteFrame);else if(isOnline){var c=serverPath+a+o+".png";n.loadRes(c,function(n){this.changeSlot(e,t,new cc.SpriteFrame(n))}.bind(this))}else n.loadLocalRes(a+o,function(n){s.changeSlot(e,t,n)},cc.SpriteFrame)},changeSlot:function(e,t,n){if(cc.sys.isNative){var i=n.getTexture(),o=new middleware.Texture2D,s=i.getImpl();return n.getRect(),n.getOriginalSize(),n.getOffset(),n.isRotated(),o.setPixelsWide(i.width),o.setPixelsHigh(i.height),o.setNativeTexture(s),void e.updateSlot(t,o)}var c=e.findSlot(t);if(c){var r=c.attachment;if(r){r.color.a=1;var l=n.getTexture(),d=n.getRect(),h=new sp.SkeletonTexture;h.setRealTexture(l);var u=new sp.spine.TextureAtlasPage;u.name=l.name,u.uWrap=sp.spine.TextureWrap.ClampToEdge,u.vWrap=sp.spine.TextureWrap.ClampToEdge,u.texture=h,u.texture.setWraps(u.uWrap,u.vWrap),u.width=d.width,u.height=d.height;var p=new sp.spine.TextureAtlasRegion;p.page=u,p.width=l.width,p.height=l.height,p.originalWidth=l.width,p.originalHeight=l.height,p.rotate=!1,p.u=0,p.v=0,p.u2=1,p.v2=1,p.texture=h,p.renderObject=p,r instanceof sp.spine.MeshAttachment&&(p.texture._image={height:l.height,width:l.width}),r.width=l.width,r.height=l.height,r.region=p,r instanceof sp.spine.MeshAttachment?r.updateUVs():(r.setRegion(p),r.updateOffset())}else a.debug("\u672a\u627e\u5230\u5bf9\u5e94\u9644\u4ef6\uff0c\u8bf7\u68c0\u67e5"+t)}else a.debug("\u672a\u627e\u5230\u5bf9\u5e94\u63d2\u69fd\uff0c\u8bf7\u68c0\u67e5"+t)},checkPolygonCollider:function(e,t,n){var i=e.getComponent(cc.PolygonCollider).points,a=e.convertToNodeSpaceAR(t);return a.x+=n.x,a.y+=n.y,cc.Intersection.pointInPolygon(a,i)}},cc._RF.pop()},{LoadResModule:"LoadResModule",LogCommon:"LogCommon",ObjModule:"ObjModule"}],EvaluatePanel:[function(e,t){"use strict";cc._RF.push(t,"c1abbtJzzRMKLEKZRJfhu4W","EvaluatePanel");var n=e("GameControl"),i=e("TimeModule"),a=e("StorageModule"),o=e("PanelBase"),s=e("NativePlatformCommon"),c=e("AudioModule");cc.Class({extends:o,properties:{starsNode:cc.Node},start:function(){this.stars=this.starsNode.children,this.isEvaluate=!1;for(var e=0;e<this.stars.length;e++)this.stars[e].children[0].active=!1},btnStar:function(e,t){var i=this;if(!this.isEvaluate){c.playEffect("click"),this.isEvaluate=!0;for(var o=t,r=0;r<this.stars.length;r++)this.stars[r].children[0].active=r<t;setTimeout(function(){if(5==o||4==o){var e=i,t=function(){console.log("\u597d\u8bc4\u5957\u88c5"+n.evaluateId),a.setData(n.evaluateId,1),a.setData("evaluate",2),n.evaluateFlag=2,e.node.active=!1};cc.sys.platform==cc.sys.DESKTOP_BROWSER?t():"apk"!=channel&&"ios"!=channel||s.evaluate(t)}else i.node.active=!1,n.remindPanelCtrl.showSimpleRemind("\u611f\u8c22\u60a8\u7684\u53cd\u9988"),a.setData("evaluate",1),n.evaluateFlag=1},500)}},btnClose:function(){c.playEffect("click"),n.evaluateDeltaDays=0,a.setData("evaluateDate",i.getCurrentDate()),this.node.destroy()}}),cc._RF.pop()},{AudioModule:"AudioModule",GameControl:"GameControl",NativePlatformCommon:"NativePlatformCommon",PanelBase:"PanelBase",StorageModule:"StorageModule",TimeModule:"TimeModule"}],FishingCtrl:[function(e,t){"use strict";cc._RF.push(t,"001e7ds3h1GN44vqIZJU5jq","FishingCtrl");var n=e("ToyBase"),i=e("MathModule"),a=e("EngineCommon");cc.Class({extends:n,properties:{},start:function(){this.animationIndex=0,this.animationName=["Idle","play"],this.init()},toyHandle:function(){this.playAnimationByState(1)},catHandle:function(){var e=i.rangeRandom(0,3),t=this.holder.children[0].getComponent("Cat");a.spineAnimationPlay(t.skeleton,["play-yutang","play-yutang2","play-yutang3"][e])}}),cc._RF.pop()},{EngineCommon:"EngineCommon",MathModule:"MathModule",ToyBase:"ToyBase"}],Flight:[function(e,t){"use strict";cc._RF.push(t,"db58eE9PTlOJ5v+ny+MQXkV","Flight");var n=e("ToyBase"),i=e("EngineCommon");cc.Class({extends:n,properties:{},start:function(){this.animationName=["Idle","play","play2"],this.init()},toyHandle:function(){this.isSuccess=Math.random()<.5,this.isSuccess?this.playAnimationByState(1):this.playAnimationByState(2)},catHandle:function(){var e=this.holder.children[0].getComponent("Cat");this.isSuccess?i.spineAnimationPlay(e.skeleton,"play-feixingke"):i.spineAnimationPlay(e.skeleton,"play-feixingke2")}}),cc._RF.pop()},{EngineCommon:"EngineCommon",ToyBase:"ToyBase"}],FreshFlowers:[function(e,t){"use strict";cc._RF.push(t,"d6040Dz2pxOMpKkJRQHmWwm","FreshFlowers");var n=e("ToyBase"),i=e("MathModule"),a=e("EngineCommon");cc.Class({extends:n,properties:{},start:function(){this.animationIndex=0,this.animationName=["Idle","play","play2","play3"],this.init()},toyHandle:function(){this.animationIndex=i.rangeRandom(1,4),this.playAnimationByState(this.animationIndex)},catHandle:function(){var e=this.holder.children[0].getComponent("Cat");a.spineAnimationPlay(e.skeleton,["","play-huatan","play-huatan2","play-huatan3"][this.animationIndex])}}),cc._RF.pop()},{EngineCommon:"EngineCommon",MathModule:"MathModule",ToyBase:"ToyBase"}],GIFSprite:[function(e,t,n){"use strict";cc._RF.push(t,"bf8beoVHfRB0rr8ezu6WQjy","GIFSprite"),Object.defineProperty(n,"__esModule",{value:!0});var i=e("GIF"),a=cc._decorator,o=a.ccclass,s=a.property,c=a.requireComponent,r=a.disallowMultiple,l=a.executeInEditMode,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._defaultSpriteFrame=null,t._path=null,t.sprite=null,t._length=0,t._index=0,t}return __extends(t,e),t.prototype.onLoad=function(){this.sprite=this.node.getComponent(cc.Sprite),this._defaultSpriteFrame=this.sprite.spriteFrame},t.prototype.start=function(){null!=this._path&&(this.clear(),this.applayChange())},t.prototype.onDestroy=function(){this.sprite.spriteFrame=this._defaultSpriteFrame},t.prototype.update=function(){this._inited,null==this._inited||this._inited||this._gif&&this._spriteFrames&&this._spriteFrames.length<this._length&&this._gif.getSpriteFrame(this._spriteFrames.length)},t.prototype.setDefaultSpriteFrame=function(e){this.sprite.spriteFrame=e},t.prototype.inited=function(){this._gif=null;var e=10*this._delays[this._index%this._length>=this._spriteFrames.length?this._spriteFrames.length-1:this._index%this._length]/1e3>.02?10*this._delays[this._index%this._length>=this._spriteFrames.length?this._spriteFrames.length-1:this._index%this._length]/1e3:.02;cc.tween(this.node).delay(e).call(function(){var e=this._spriteFrames[this._index++%this._spriteFrames.length];this.sprite.spriteFrame=e}.bind(this)).union().repeatForever().start()},t.prototype.applayChange=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(){return cc.loader.load(this._path,function(e,t){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(){return e={target:this,buffer:t.buffer,initOneSpriteFrameFunc:function(e){this._delays=e.delays,this._spriteFrames=e.spriteFrames,this._length=e.length,1==e.spriteFrames.length&&(this.setDefaultSpriteFrame(e.spriteFrames[0]),this._inited=!1,this.inited())}.bind(this),initFinishedFunc:function(e){this._delays=e.delays,this._spriteFrames=e.spriteFrames,this._inited=!0}.bind(this)},this._gif=new i.default(e),[2]})})}.bind(this)),[2]})})},t.prototype.clear=function(){this.node.stopAllActions(),this._gif=null,this._index=0,this._inited=null,this._delays=null,this._spriteFrames=null},__decorate([s({visible:!1})],t.prototype,"_defaultSpriteFrame",void 0),__decorate([s({visible:!1})],t.prototype,"_path",void 0),__decorate([o,l,r,c(cc.Sprite)],t)}(cc.Component);n.default=d,cc._RF.pop()},{GIF:"GIF"}],GIF:[function(e,t,n){"use strict";cc._RF.push(t,"f06c6/gdJlBVrnUd0eg6igm","GIF"),Object.defineProperty(n,"__esModule",{value:!0});var i=e("LZW"),a=function(){function e(e){this._offset=0,this._info={header:"",frames:[],comment:""},this._message=null,this._delays=[],this._spriteFrames=[],this._canvas=null,this._context=null,e&&e.buffer&&(this._message=e,this.buffer=e.buffer)}return Object.defineProperty(e.prototype,"buffer",{get:function(){return this._buffer},set:function(e){this.clear(),this._buffer=e,this._view=new Uint8Array(e),this.init()},enumerable:!1,configurable:!0}),e.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){var e,t;return __generator(this,function(){return e=(new Date).getTime(),this.getHeader(),this.getScrDesc(),this.getTexture(),t=(new Date).getTime(),console.log("total time : "+(t-e)+"ms"),[2]})})},e.prototype.getTexture=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(){return this.getSpriteFrame(0),[2]})})},e.prototype.getSpriteFrame=function(e){return this._spriteFrames[e]?this._spriteFrames[e]:this.decodeFrame2Texture(this._info.frames[e],e)},e.prototype.decodeFrame=function(e){var t=new ImageData(e.img.w,e.img.h);return e.img.m?this._tab=e.img.colorTab:this._tab=this._info.colorTab,i.default.decode(e.img.srcBuf,e.img.codeSize).forEach(function(n,i){t.data[4*i]=this._tab[3*n],t.data[4*i+1]=this._tab[3*n+1],t.data[4*i+2]=this._tab[3*n+2],t.data[4*i+3]=255,e.ctrl.t&&n==e.ctrl.tranIndex&&(t.data[4*i+3]=0)}.bind(this)),t},e.prototype.mergeFrames=function(e,t){var n=t;if(e)for(var i=0;i<n.data.length;i+=4)0==n.data[i+3]&&(n.data[i]=this._lastData.data[i],n.data[i+1]=this._lastData.data[i+1],n.data[i+2]=this._lastData.data[i+2],n.data[i+3]=this._lastData.data[i+3]);return n},e.prototype.dataUrl2SpriteFrame=function(e){var t=new cc.Texture2D,n=new cc.SpriteFrame,i=new Image;return i.src=e,t.initWithElement(i),n.setTexture(t),n},e.prototype.decodeFrame2Texture=function(e,t){return __awaiter(this,void 0,void 0,function(){var n,i,a,o,s;return __generator(this,function(){return this._context||(this._canvas=document.createElement("canvas"),this._context=this._canvas.getContext("2d"),this._canvas.width=e.img.w,this._canvas.height=e.img.h),n=this.decodeFrame(e),this._context.putImageData(n,e.img.x,e.img.y,0,0,e.img.w,e.img.h),i=this._context.getImageData(0,0,this._canvas.width,this._canvas.height),a=this._lastData,o=this.mergeFrames(a,i),this._context.putImageData(o,0,0),this._lastData=o,s=this._canvas.toDataURL("image/png"),this._delays[t]=e.ctrl.delay,this._spriteFrames[t]=this.dataUrl2SpriteFrame(s),this._spriteFrames.length==this._info.frames.length?this._message.initFinishedFunc({delays:this._delays,spriteFrames:this._spriteFrames,length:this._info.frames.length}):this._message.initOneSpriteFrameFunc({delays:this._delays,spriteFrames:this._spriteFrames,length:this._info.frames.length}),[2,this._spriteFrames[t]]})})},e.prototype.read=function(e){return this._view.slice(this._offset,this._offset+=e)},e.prototype.getHeader=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(){return this._info.header="",this.read(6).forEach(function(e){this._info.header+=String.fromCharCode(e)}.bind(this)),[2]})})},e.prototype.getScrDesc=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(){return e=this.read(7),this._info.w=e[0]+(e[1]<<8),this._info.h=e[2]+(e[3]<<8),this._info.m=1&e[4]>>7,this._info.cr=7&e[4]>>4,this._info.s=1&e[4]>>3,this._info.pixel=7&e[4],this._info.bgColor=e[5],this._info.radio=e[6],this._info.m&&(this._info.colorTab=this.read(3*(2<<this._info.pixel))),this.decode(),[2]})})},e.prototype.decode=function(){var e=[],t=this.read(1);switch(t[0]){case 33:this.extension();break;case 44:for(t=this.read(9),this._frame.img={x:t[0]+(t[1]<<8),y:t[2]+(t[3]<<8),w:t[4]+(t[5]<<8),h:t[6]+(t[7]<<8),colorTab:0},this._frame.img.m=1&t[8]>>7,this._frame.img.i=1&t[8]>>6,this._frame.img.s=1&t[8]>>5,this._frame.img.r=3&t[8]>>3,this._frame.img.pixel=7&t[8],this._frame.img.m&&(this._frame.img.colorTab=this.read(3*(2<<this._frame.img.pixel))),this._frame.img.codeSize=this.read(1)[0],e=[];;){if(!(t=this.read(1))[0]){this._frame.img.srcBuf=e,this.decode();break}this.read(t[0]).forEach(function(t){e.push(t)})}break;case 59:console.log("The end.",this._offset,this.buffer.byteLength)}},e.prototype.extension=function(){var e=this.read(1);switch(e[0]){case 255:if(11!=this.read(1)[0])throw new Error("\u89e3\u6790\u51fa\u9519");for(this._info.appVersion="",this.read(11).forEach(function(e){this._info.appVersion+=String.fromCharCode(e)}.bind(this));;){if(!(e=this.read(1))[0]){this.decode();break}this.read(e[0])}break;case 249:if(4!=this.read(1)[0])throw new Error("\u89e3\u6790\u51fa\u9519");if(e=this.read(4),this._frame={},this._frame.ctrl={disp:7&e[0]>>2,i:1&e[0]>>1,t:1&e[0],delay:e[1]+(e[2]<<8),tranIndex:e[3]},this._info.frames.push(this._frame),0!=this.read(1)[0])throw new Error("\u89e3\u6790\u51fa\u9519");this.decode();break;case 254:(e=this.read(1))[0]&&(this.read(e[0]).forEach(function(e){this._info.comment+=String.fromCharCode(e)}),0==this.read(1)[0]&&this.decode())}},e.prototype.clear=function(){this._tab=null,this._view=null,this._frame=null,this._offset=0,this._info={header:"",frames:[],comment:""},this._lastData=null,this._delays=[],this._spriteFrames=[],this._canvas=null,this._context=null},e}();n.default=a,cc._RF.pop()},{LZW:"LZW"}],GameCommon:[function(e,t){"use strict";cc._RF.push(t,"27408waaNBGZKE00a3Uu2s1","GameCommon"),window.channel="apk",window.subChannel="google",window.isHasAd=!0,window.bannerShowFlag=[],window.adHeight=0,window.serverPath="",window.sceneIndex=0,window.lastSceneIndex=0,window.isOnline=!0;var n=e("TimeModule"),i=e("LanguageModule"),a=e("ChannelCommon"),o=e("StatisticsModule"),s=e("AudioModule"),c=e("StorageModule"),r=e("NativePlatformCommon");t.exports={packageName:"",appId:"",isSupportShare:!0,isSupportSavePhoto:!0,isSupportPurchase:!0,isSupportEvaluate:!0,isSupportPush:!0,isSupportDesktopIcon:!1,isSupportTalkingData:!1,preHandle:function(){var e;"apk"!=channel||"google"!=subChannel&&"ios"!=channel?"wx"==channel&&(serverPath="https://cat-1254205301.file.myqcloud.com/CatMagicAcademy/"):serverPath="https://dressdiary-outsea-1254205301.file.myqcloud.com/MagicAcademy/",r.init(),"apk"==channel||"oppo"==channel?this.isSupportShare=!1:this.isSupportShare=!0,"oppo"==channel||"vivo"==channel||"tt"==channel||"qq"==channel||"huawei"==channel?this.isSupportDesktopIcon=!0:this.isSupportDesktopIcon=!1,"apk"==channel&&"google"==subChannel||"ios"==channel?this.isSupportPurchase=!0:this.isSupportPurchase=!1,"apk"==channel&&"google"==subChannel||"ios"==channel?this.isSupportEvaluate=!0:this.isSupportEvaluate=!1,"apk"==channel&&"google"==subChannel||"ios"==channel?this.isSupportPush=!0:this.isSupportPush=!1,isHasAd?"wx"==channel||"tt"==channel?adHeight=300:adHeight=180:adHeight=0,"ios"==channel||"apk"==channel&&"google"==subChannel?(e=cc.sys.os===cc.sys.OS_ANDROID||cc.sys.os===cc.sys.OS_IOS?r.getLanguage():i.language,2==i.languageMode&&(e=c.getData("language",e)),i.setLanguage(e)):(i.languageMode=0,i.setLanguage()),o.statisticsInit(),s.init(),r.closeSplash()},lastTime:0,isCanClick:function(e){return void 0===e&&(e=1e3),!(n.getNowTime()-this.lastTime<e||(this.lastTime=n.getNowTime(),0))},isHide:!1,handleEventPerScene:function(e,t){void 0===e&&(e=null),void 0===t&&(t=null),cc.game.off(cc.game.EVENT_SHOW),cc.game.on(cc.game.EVENT_SHOW,function(){this.isHide&&(this.isHide=!1,e&&e())}.bind(this)),cc.game.off(cc.game.EVENT_HIDE),cc.game.on(cc.game.EVENT_HIDE,function(){this.isHide=!0,t&&t()}.bind(this)),cc.sys.platform!=cc.sys.DESKTOP_BROWSER&&a.enableForward()}},cc._RF.pop()},{AudioModule:"AudioModule",ChannelCommon:"ChannelCommon",LanguageModule:"LanguageModule",NativePlatformCommon:"NativePlatformCommon",StatisticsModule:"StatisticsModule",StorageModule:"StorageModule",TimeModule:"TimeModule"}],GameConfig:[function(e,t){"use strict";cc._RF.push(t,"133f7fMY8BHwZfzx4dlkv3s","GameConfig");var n=e("LanguageModule"),i=e("StatisticsModule"),a=e("LogCommon"),o=e("GameCommon"),s=cc.Enum({qq:0,tt:1,wx:2,oppo:3,vivo:4,mi:5,huawei:6,apk:7,ios:8}),c=cc.Enum({oppo:0,vivo:1,mi:2,huawei:3,google:4,mintegral:5,pangle:6,cn:7,world:8}),r=cc.Enum({zh:0,en:1,"zh-f":2,es:3,ar:4,pt:5,ru:6,fr:7,de:8,ja:9,ko:10,tr:11,th:12,in:13});cc.Class({extends:cc.Component,editor:!1,properties:{channel:{default:s.wx,displayName:"\u6e20\u9053",type:s},subChannel:{default:c.oppo,displayName:"\u5b50\u6e20\u9053",type:c,visible:function(){return this.channel===s.apk||this.channel===s.ios}},isSystemLanguage:{default:!1,displayName:"\u662f\u5426\u6839\u636e\u7cfb\u7edf\u8bed\u8a00",visible:function(){return this.channel===s.apk&&this.subChannel===c.google||this.channel===s.ios}},language:{default:r.zh,displayName:"\u8bed\u8a00,\u4ec5\u7528\u4e8e\u6d4f\u89c8\u5668\u4e0a\u6d4b\u8bd5",type:r,visible:function(){return this.channel===s.apk&&this.subChannel===c.google||this.channel===s.ios}},appKey:{default:"",tooltip:"talkingdata\u5bf9\u5e94\u7684appkey",visible:function(){return this.channel!==s.apk&&this.channel!==s.ios}},appId:{default:"",tooltip:"appid,\u7528\u4e8e\u4e92\u63a8\u5254\u9664",visible:function(){return this.channel===s.ios}},packageName:{default:"",tooltip:"\u5305\u540d,\u7528\u4e8e\u4e92\u63a8\u5254\u9664",visible:function(){return this.channel===s.apk&&this.subChannel===c.google}}},onLoad:function(){channel=s[this.channel],subChannel=c[this.subChannel],"apk"==channel&&"google"==subChannel||"ios"==channel?n.languageMode=this.isSystemLanguage?1:2:n.languageMode=0,n.language=r[this.language],i.appKey=this.appKey,o.packageName=this.packageName,o.appid=this.appId,a.debug("channel="+channel+",subChannel="+subChannel+",language="+n.language)}}),cc._RF.pop()},{GameCommon:"GameCommon",LanguageModule:"LanguageModule",LogCommon:"LogCommon",StatisticsModule:"StatisticsModule"}],GameControl:[function(e,t){"use strict";cc._RF.push(t,"cb665UhnV9BdKg4IOd23wQT","GameControl");var n=e("StorageModule"),i=e("NativePlatformCommon"),a=e("ObjModule"),o=e("EngineCommon"),s=e("TimeModule"),c=e("GameCommon"),r=e("AdInfo"),l=e("LoadResModule"),d=e("StatisticsModule");t.exports={curScene:null,isTest:!1,panelNum:0,panelMsg:[],remindPanelCtrl:null,init:function(){n.getData("firstLoginDate")||n.setData("firstLoginDate",s.getCurrentDate()),c.isSupportEvaluate&&this.initEvaluate(),c.isSupportPurchase&&this.initPurchase(),"apk"==channel&&"google"==subChannel&&(bannerShowFlag[this.SceneName.game]=!0,bannerShowFlag[this.SceneName.jump]=!0,bannerShowFlag[this.SceneName.hotel]=!0,bannerShowFlag[this.SceneName.search]=!0)},showPanelHandle:function(e){this.panelNum+=1,this.panelMsg.push(e),console.log("showPanelHandle name="+e+",num="+this.panelNum),isHasAd&&!this.isForbid()&&(1==this.panelNum&&bannerShowFlag[sceneIndex]&&("rewardPanel"==e||"purchasePanel"==e?r.adsManager.showBanner(2):r.adsManager.showBanner(5)),"wx"==channel&&(r.adsManager.hideCustomAd(),r.adsManager.showCustomAd(0),r.adsManager.showCustomAd(1)))},hidePanelHandle:function(e){this.panelNum-=1,this.panelMsg.pop(),console.log("hidePanelHandle name="+e+",num="+this.panelNum),isHasAd&&!this.isForbid()&&(0==this.panelNum&&("ios"==channel||"apk"==channel&&"google"==subChannel)&&(bannerShowFlag[sceneIndex]?sceneIndex==this.SceneName.game||sceneIndex==this.SceneName.hotel?r.adsManager.showBanner(2):r.adsManager.showBanner():r.adsManager.hideBanner()),"wx"==channel&&this.curScene.adHandle())},getBannerPosFlag:function(){},loadingCtrl:null,showLoadingPanel:function(e,t,n){var i=this;void 0===e&&(e=null),void 0===t&&(t=1e3),void 0===n&&(n=0),this.loadingCtrl.loadingPanel.active=!0,0==n?this.loadingCtrl.anim.play("loading-in"):setTimeout(function(){i.loadingCtrl.anim.play("loading-in")},n),setTimeout(function(){e&&e()},n+t)},hideLoadingPanel:function(e,t){var n=this;void 0===e&&(e=null),void 0===t&&(t=1e3),t>1e3?setTimeout(function(){n.loadingCtrl.anim.play("loading-out")},t-1e3):this.loadingCtrl.anim.play("loading-out"),setTimeout(function(){n.loadingCtrl.loadingPanel.active=!1,e&&e()},t)},configName:{"apk-google":"config-google.json"},isLoadJson:!1,loadConfigFile:function(){var e=serverPath+channel+"/"+this.configName["apk"==channel?channel+"-"+subChannel:channel];if(cc.sys.platform==cc.sys.DESKTOP_BROWSER&&console.log(e),"apk"!=channel&&"ios"!=channel||0!=this.isLoadJson)this.isLoadJson=!0;else{if(cc.sys.os==cc.sys.OS_ANDROID){var t=i.getConfigName();e=serverPath+channel+"/"+t}l.loadRes(e,function(e){cc.sys.platform==cc.sys.DESKTOP_BROWSER&&console.log(e),r.interstitialShowInterval1=e.json.intVideoShowInterval,r.intAndVideoDeltaTime=e.json.intAndVideoDeltaTime,i.setAdParams(r.interstitialShowInterval1,r.intAndVideoDeltaTime)})}},catBundle:"catBundle231009",dressUpBundle:"dressUp231008",fishingBundle:"fishing231008",gameBundle:"game",hotelBundle:"hotel231009",jumpBundle:"jump231008",parkourBundle:"parkour231009",searchBundle:"search231008",toyBundle:"toys231009",RoomType:cc.Enum({classroom:0,shop:1,plant:2,dessert:3}),roomType:"",bellNum:0,curCatName:"r1",petalMsg:null,petalTrackNo:5,ToyType:cc.Enum({synthesize:1,wardrobe:2,flight:3,mysteryShop:4,potion:5,blackBoard:6,genie:7,arena:8,freshFlowers:9,magicVine:10,divination:11,magicEgg:12,magicBook:13,magicMirror:14,massage:15,bed:16,lounge:17,bathtub:18,piranha:19,transfiguration:20,slidePool:21,sketch:22,swing:23,harp:24,tree:25,fishing:26,balloon:27,boiler:28,dessertCabinet:29,candy:30,photograph:31,privateRoom:32,bubble:33,dollMachine:34,vending:35,candyFloss:36}),toyNum:0,toyUnlockData:null,toyMsg:null,getToyMsgByIndex:function(e,t){for(var n,i=this.toyMsg[this.RoomType[e]],a=0;a<i.length;a++)if(i[a].index==t){n=i[a];break}return n},displayNum:-1,isSave:!1,isAdd:!1,itemMsg:null,defaultDressUp:null,skeletonData:null,petalSkeletonData:null,maxCabinetNum:10,SceneName:cc.Enum({loading:0,home:1,main:2,game:3,jump:4,search:5,fishing:6,parkour:7,hotel:8,dressUp:9}),dressUpType:cc.Enum({clothes:1,necklace:2,handheld:3,headdress:4,tailTrim:5,texture:6,skin:7,shoe:8}),ActionType:cc.Enum({stand:0,move:1,interaction:2,target:3}),catState:{display:-12,happyWalk:-11,happyIdle:-10,happy:-9,talkEnd:-8,listen:-7,talk:-6,drop:-5,inAir:-4,drag:-3,born:-2,ready:-1,idle:0},updateBellNum:function(e,t){void 0===t&&(t=0),0!=t&&(this.bellNum=parseInt(this.bellNum)+t,n.setData("bellNum",this.bellNum)),e&&(e.string=""+this.bellNum)},updateRemindTimes:function(e,t,n,i){var a;a=e>=3600?s.timeFormat(e,!0,":"):s.timeFormat(e,!1,":"),t.string=a,i.fillRange=n},isCombination:function(e){return e==this.ToyType.massage||e==this.ToyType.lounge},isInBed:function(e){return e==this.ToyType.bed},changePartImage:function(e,t,n,i,a){void 0===n&&(n=""),void 0===i&&(i=""),void 0===a&&(a=null);var s=[];if(t==this.dressUpType.clothes?(s.push("clothes"),s.push("clothes_1"),s.push("clothes_2"),s.push("clothes_3")):t==this.dressUpType.handheld?(s.push("bag_R"),s.push("bag_L")):t==this.dressUpType.necklace?s.push("neck"):t==this.dressUpType.headdress?(s.push("Headdress"),s.push("Headdress_1"),s.push("Headdress_2")):t==this.dressUpType.tailTrim?s.push("Tail decoration"):t==this.dressUpType.texture?(s.push("Mapping1"),s.push("Mapping1_1"),s.push("Mapping1_2"),s.push("Mapping1_3")):t==this.dressUpType.shoe?(s.push("shoes_R"),s.push("shoes_L")):"petal"==t?(s.push("huabao"),s.push("huabao2"),s.push("huabao3")):"potion"==t?(s.push("shiguanye1"),s.push("yeti1"),s.push("shiguanye4"),s.push("yeti4")):"potion-result"==t&&(s.push("cg1"),s.push("cg1-1"),s.push("cg1-2"),s.push("cg1-3"),s.push("cg1-4"),s.push("cg1-5")),a)if(s.length==a.length)for(var c=0;c<a.length;c++)""==a[c]?o.changeSlot(e,s[c],this.clearFrame):o.changeSlotImage(e,s[c],n,i,a[c]);else console.log("\u8be5\u9aa8\u9abc\u90e8\u4f4d\u6570\u548cjson\u4e0d\u4e00\u81f4\uff0c\u8bf7\u68c0\u67e5");else for(var r=0;r<s.length;r++)o.changeSlot(e,s[r],this.clearFrame)},getCategoryTypeById:function(e){return Math.floor(parseInt(e)/1e4)},getIndexBySkinName:function(e){for(var t=-1,n=0;n<this.petalMsg.length;n++)if(this.petalMsg[n].name==e){t=this.petalMsg[n].index;break}return t},getIndexBySkinId:function(e){for(var t=-1,n=0;n<this.petalMsg.length;n++)if(this.petalMsg[n].id==e){t=this.petalMsg[n].index;break}return t},getIndexByDressUp:function(e){for(var t=-1,n=0;n<e.length;n++){var i=e[n];if(this.getCategoryTypeById(i)==this.dressUpType.skin){t=this.getIndexBySkinId(i);break}}return t},getSkinNameByIndex:function(e){for(var t,n=0;n<this.petalMsg.length;n++)if(this.petalMsg[n].index==e){t=this.petalMsg[n].name;break}return t},getSkinNameById:function(e){for(var t,n=0;n<this.petalMsg.length;n++)if(this.petalMsg[n].id==e){t=this.petalMsg[n].name;break}return t},getSkinIdByIndex:function(e){for(var t,n=0;n<this.petalMsg.length;n++)if(this.petalMsg[n].index==e){t=this.petalMsg[n].id;break}return t},getItemCountById:function(e){for(var t,n=0;n<this.itemMsg.length;n++)if(this.itemMsg[n].id==e){t=this.itemMsg[n].itemCount;break}return t},getLocalDressUp:function(e,t){var i=e;t>=0&&(i="display"+t);var a=n.getJsonData(i);return a||(e||(console.log("\u903b\u8f91\u6709\u95ee\u9898\uff0c\u6709diy\u5c55\u67dc\u4fe1\u606f\uff0c\u4f46\u786e\u6ca1\u6709\u88c5\u626e\u4fe1\u606f\uff0c\u8bf7\u68c0\u67e5"),e="r1"),a=this.defaultDressUp[e]),a},setLocalDressUp:function(e,t,i){var a=e;t>=0&&(a="display"+t),n.setJsonData(a,i)},initDressUp:function(e,t){if(e&&t){for(var n={},i=0;i<t.length;i++){var a=t[i];if(a){var o=this.getCategoryTypeById(a);if(n[o]=!0,o==this.dressUpType.skin){var s=this.getSkinNameById(a);e.setSkin(s)}else{var c=this.getItemCountById(a);this.changePartImage(e,o,"","parts/",c)}}}for(var r in this.dressUpType){var l=this.dressUpType[r];n[l]||(l!=this.dressUpType.skin?this.changePartImage(e,l):console.log("\u76ae\u80a4\u4e0d\u80fd\u4e3a\u7a7a\uff0c\u8bf7\u68c0\u67e5"))}}else console.log("\u9aa8\u9abc\u548c\u88c5\u626e\u4fe1\u606f\u4e0d\u80fd\u4e3a\u7a7a\uff0c\u8bf7\u68c0\u67e5")},getToyRoomType:function(e){var t=-1;for(var n in this.toyMsg)for(var i=this.toyMsg[n],a=0;a<i.length;a++)if(i[a].index==e){t=this.RoomType[n];break}return t},unlockGift:function(){for(var e=-1,t=2;t<=this.toyNum;t++)if(void 0===this.toyUnlockData[t]||null===this.toyUnlockData[t]){e=t;break}-1!=e&&(this.toyUnlockData[e]=0,n.setJsonData("toyUnlockData",this.toyUnlockData),this.roomType=this.getToyRoomType(e),d.eventStatistics("toy_"+this.ToyType[e]+"_unlock"))},platformRandNum:function(e){var t=Math.floor(Math.random()*e+1);return t>=1&&t<=6?0:t>6&&t<=8?1:t>8&&t<=10?2:void 0},fourToThree:function(e){for(var t=[],n=0;n<e.length;n++)switch(parseInt(e[n])){case 0:t.push(0);break;case 1:t.push(0),t.push(1);break;case 2:t.push(1),t.push(2);break;case 3:t.push(2)}return t=a.removeRepeat(t),a.arrSort(t)},threeToFour:function(e){for(var t=[],n=0;n<e.length;n++)switch(parseInt(e[n])){case 0:t.push(0),t.push(1);break;case 1:t.push(1),t.push(2);break;case 2:t.push(2),t.push(3)}return t=a.removeRepeat(t),a.arrSort(t)},handTipsTimer:0,hotelLevelNeedData:null,hotelPersonLayerJs:null,hotelPropLayerJs:null,hotelTimerLayerJs:null,signReward:null,isSupportEvaluate:!0,evaluateId:"",evaluateReward:"",evaluateDeltaDays:0,evaluateFlag:-1,isGetReward:!1,initEvaluate:function(){this.evaluateFlag=n.getData("evaluate");var e=n.getData("evaluateDate");this.evaluateDeltaDays=e?s.getDaysBetween(e,s.getCurrentDate()):1,this.isGetReward=1==this.evaluateFlag||2==this.evaluateFlag},unlockCatItem:!1,purchaseData:null,purchaseHandle:null,initPurchase:function(){r.noAd=parseInt(n.getData("NoAd",0)),this.unlockCatItem=1==n.getData("unlockCatItem"),console.log("jswrapper initPurchase:noAd="+r.noAd+this.unlockCatItem),this.setNoAd(r.noAd)},getBuyMsg:function(e){for(var t,n=0;n<this.purchaseData.length;n++)if(this.purchaseData[n].index==e){t=this.purchaseData[n];break}return t},setNoAd:function(e){i.setNoAd(e)},buyFinishMsgHandle:function(e){if(0==e.type){var t=e.noAd;if(console.log("pay-jsw:\u53bb\u5e7f\u544a"+t),1==t||3==t){for(var i=0;i<r.bannerShowFlag.length;i++)r.bannerShowFlag[i]=!1;r.adsManager.hideBanner()}3==r.noAd||3==t||1==t&&2==r.noAd||2==t&&1==r.noAd?r.noAd=3:r.noAd||(r.noAd=parseInt(e.noAd)),n.setData("NoAd",r.noAd),this.setNoAd(r.noAd),this.unlockCatItem=!0,n.setData("unlockCatItem",1),n.setData(e.id,1)}else if(1==e.type){var a="petal"+this.getIndexBySkinName(e.reward);n.setData(a,1),n.setData(e.id,1)}},tutorialStep:-1,isCanShowAd:!0,TutorialType:cc.Enum({buyPetal:0,clickPetal:1,miniGame:2,gift:3,DIY:4,dragToScene:5,dragToCabinet:6,switchScene:7,switchLastScene:8,finish:9}),isForbid:function(e){return this.tutorialStep!=this.TutorialType.finish&&(!e||-1==a.getIndexOfArr(e,this.tutorialStep))},pushCtl:null},cc._RF.pop()},{AdInfo:"AdInfo",EngineCommon:"EngineCommon",GameCommon:"GameCommon",LoadResModule:"LoadResModule",NativePlatformCommon:"NativePlatformCommon",ObjModule:"ObjModule",StatisticsModule:"StatisticsModule",StorageModule:"StorageModule",TimeModule:"TimeModule"}],Game:[function(e,t){"use strict";cc._RF.push(t,"b1fb4u9G+pE27M1EBlLCUbA","Game");var n=e("GameControl"),i=e("LoadResModule"),a=e("StorageModule"),o=e("MathModule"),s=e("EngineCommon"),c=e("AudioModule"),r=e("StatisticsModule"),l=e("GameCommon"),d=e("AdInfo"),h=e("TimeModule");cc.Class({extends:cc.Component,properties:{camera:cc.Camera,topCamera:cc.Camera,middlePanel:cc.Node,topPanel:cc.Node,maps:cc.Node,trackNode:cc.Node,bellLabel:cc.Label,effectPrefab:cc.Prefab,giftPrefab:cc.Prefab,petalPrefab:cc.Prefab,catPrefab:cc.Prefab,demandFrames:{type:cc.SpriteFrame,default:[]},roomIcon:{type:cc.SpriteFrame,default:[]}},onLoad:function(){n.curScene=this,lastSceneIndex=sceneIndex,sceneIndex=n.SceneName.game,l.handleEventPerScene(this.onShow,this.onHide),s.enableCollide(),s.disableMultiTouch(),this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),r.sceneStart("game"+n.roomType)},onDestroy:function(){r.sceneEnd(),n.curScene=null},start:function(){this.getData(),this.initUI(),this.initMap(),this.sizeFit(),this.adHandle(),this.evaluateHandle()},onShow:function(){if(l.isSupportEvaluate&&!n.isGetReward&&2==n.evaluateFlag){n.isGetReward=!0;for(var e=[],t=0;t<n.evaluateReward.length;t++)e[t]="partsIcon/"+n.evaluateReward[t];n.remindPanelCtrl.showRewardPanel("",e,-1,3,134,134)}n.curScene.isCatInit&&(n.curScene.deltaTimes=n.curScene.getOfflineTimes(),n.curScene.updateObjTimes())},onHide:function(){n.curScene.isCatInit&&n.curScene.saveHandle()},sizeFit:function(){var e=cc.find("Canvas/UI/leftHolder"),t=cc.find("Canvas/UI/rightHolder");e.x=-cc.winSize.width/2+100,t.x=cc.winSize.width/2-100,cc.winSize.width/cc.winSize.height>2.05&&(e.x+=80),this.leftStartPosX=e.x,this.rightStartPosX=t.x,this.bellStartPosY=this.bellLabel.node.parent.y;var n=cc.winSize.width-2*(cc.winSize.width/2+this.leftStartPosX+135);this.displayWindowCtrl.catScrollView.node.width=n,this.displayWindowCtrl.diyCatScrollView.content.getComponent("ScrollView").maxLen=n;var i=this.displayWindowCtrl.node.getChildByName("btnCat"),a=this.displayWindowCtrl.node.getChildByName("btnDiyCat");i.x=n/2,a.x=i.x+146,cc.winSize.width/cc.winSize.height<1.5&&(this.bellLabel.node.parent.x=-50)},adHandle:function(){d.adsManager.hideCustomAd(),isHasAd&&!n.isForbid()&&(n.isCanShowAd?(bannerShowFlag[sceneIndex]?d.adsManager.showBanner(2):d.adsManager.hideBanner(),lastSceneIndex!=n.SceneName.home&&(lastSceneIndex==sceneIndex?d.adsManager.showInterVideo("switch-room"):d.adsManager.showInterVideo(n.SceneName[lastSceneIndex]+"-to-game")),d.adsManager.showCustomAd(2)):n.isCanShowAd=!0),this.bellLabel.node.parent.getChildByName("add").active=isHasAd},getData:function(){var e=this;n.isAdd=!1,n.curCatName="r1",this.offlineTimes=0,this.gamePause=!1,this.jumpSpeed=500,this.posIndexArr=[],this.tracks=this.trackNode.children,this.displayWindowCtrl=cc.find("Canvas/UI/displayWindow").getComponent("DisplayWindow"),this.unionStep=0,this.windowFlag=2,this.windowMode=0,this.diyCabinetMsg=a.getJsonData("diyCabinetMsg",[]),n.bellNum=a.getData("bellNum",15),n.updateBellNum(this.bellLabel),this.offlineTimes=this.getOfflineTimes(),a.setData("offlineTime"+n.roomType,h.getNowSeconds()),this.schedule(this.saveHandle,60);var t=[];t[n.ToyType.wardrobe]=0,n.toyUnlockData=a.getJsonData("toyUnlockData",t),n.tutorialStep>=n.TutorialType.finish&&(void 0!==n.toyUnlockData[n.ToyType.synthesize]&&null!==n.toyUnlockData[n.ToyType.synthesize]||(n.toyUnlockData[n.ToyType.synthesize]=0,a.setJsonData("toyUnlockData",n.toyUnlockData))),i.loadLocalRes("item",function(t){e.emoteFrames=t.getSpriteFrames()},cc.SpriteAtlas)},hideLoadingPanel:function(){var e=this;this.maps.childrenCount>0&&this.displayWindowCtrl.diyCatScrollView.content.childrenCount>0&&this.displayWindowCtrl.catScrollView.content.childrenCount>0&&n.hideLoadingPanel(function(){e.displayWindowCtrl.node.active=!1,e.tutorialStartHandle(n.TutorialType.buyPetal),e.tutorialStartHandle(n.TutorialType.miniGame),e.tutorialStartHandle(n.TutorialType.DIY),n.tutorialStep==n.TutorialType.dragToScene&&(e.diyCabinetMsg.length>0?(e.windowMode=1,e.btnShowDisplayWindow()):(n.tutorialStep=parseInt(n.tutorialStep)+1,a.setData("tutorialStep",n.tutorialStep))),n.tutorialStep==n.TutorialType.dragToCabinet&&e.btnShowDisplayWindow()})},initUI:function(){var e=cc.find("Canvas/UI/rightHolder/btnSwitchRoom").children[0],t=parseInt(n.roomType)+1;4==t&&(t=0),e.getComponent(cc.Sprite).spriteFrame=this.roomIcon[t],e=cc.find("Canvas/UI/leftHolder/btnSwitchRoom").children[0],-1==(t=parseInt(n.roomType)-1)&&(t=3),e.getComponent(cc.Sprite).spriteFrame=this.roomIcon[t];var i=cc.find("Canvas/UI/rightHolder");i.getChildByName("btnShowCabinet").active=!0,i.getChildByName("btnHideCabinet").active=!1,this.displayWindowCtrl.node.active=!0,this.displayWindowCtrl.loadData(),this.displayWindowCtrl.node.y=-cc.winSize.height/2-this.displayWindowCtrl.node.height,this.signHandle(),n.isTest||(cc.find("Canvas/UI/bellHolder/add").active=isHasAd),cc.find("Canvas/UI/leftHolder/btnPurchase").active=l.isSupportPurchase},initMap:function(){var e=this;i.getBundleRes(n.gameBundle,"prefabs/"+n.RoomType[n.roomType],function(t){var n=cc.instantiate(t);n.parent=e.maps,n.position=cc.v2(0,0);for(var i=0,a=n.children,o=a.length-1;o>=0;o--)-1!=a[o].name.indexOf("wallpaper")&&(i+=a[o].width),-1!=a[o].name.indexOf("wood")&&(a[o].parent=cc.find("Canvas/mapsTop"));e.trackNode.x=-cc.winSize.width/2,e.maps.x=-cc.winSize.width/2,cc.find("Canvas/mapsTop").x=e.maps.x,e.node.x=-cc.winSize.width/2,e.centerPosX=i/2,e.camera.node.x=e.centerPosX-cc.winSize.width/2,e.topCamera.node.x=e.camera.node.x,e.node.width=i,e.node.height=cc.winSize.height,e.cameraMinX=0,e.cameraMaxX=i-cc.winSize.width,e.moveMinX=300,e.moveMaxX=i-300,e.moveMinY=-cc.winSize.height/2,e.moveMaxY=cc.winSize.height/2-250,e.loadResourcesFlag=0,e.initToy(),e.initDecoration(n)})},initCat:function(){console.log("init cat startTime="+h.getNowSeconds());for(var e=0;e<n.petalMsg.length;e++){var t=n.petalMsg[e].index,i="cat"+t,o=a.getJsonData(i);if(o){if(o.scene!=n.roomType)continue;this.updateTimes(i,o),this.generateObjByMsg(o,!1,{index:t})}}for(var s=0;s<n.maxCabinetNum;s++){var c="diy"+s,r=a.getJsonData(c);if(r){if(r.scene!=n.roomType)continue;this.updateTimes(c,r),this.generateObjByMsg(r,!0,{displayNum:s})}}console.log("init cat endTime="+h.getNowSeconds()),n.curScene.isCatInit=!0},updateTimes:function(e,t){if(1==t.isPetal){var i=0;void 0===t.times&&(i=1),0==i&&this.offlineTimes>0&&(t.times=t.times-this.offlineTimes,t.times<=0&&delete t.times,a.setJsonData(e,t))}else{var o=t.state;o&&n.isInBed(o)&&this.offlineTimes>0&&(t.times=t.times-this.offlineTimes,t.times=Math.max(0,t.times),a.setJsonData(e,t))}},generateObjByMsg:function(e,t,i){var a=i.index;if(1==e.isPetal){var s=0;void 0===e.times&&(s=1),0==s?this.generateOnePetal(a,s,e.posIndex,e.times):this.generateOnePetal(a,s,e.posIndex)}else{var c,r,l=i.displayNum,d=e.state;if(d&&n.isInBed(d)){c=this.findToyByIndex(d),this.generateOneCat(a,d,-1,c,null,e.displayNum);var h=this.getSleepTimes(a);c.getComponent("ToyBase").updateBed(h,e.times)}else{d=n.catState.idle;var u=o.rangeRandom(2,6),p=o.rangeRandom(0,this.tracks[0].height);c=this.tracks[u],(void 0===(r=e.x)||r<this.moveMinX||r>this.moveMaxX)&&(r=o.rangeRandom(this.moveMinX,this.moveMaxX)),this.generateOneCat(a,d,u,c,cc.v2(parseInt(r),parseInt(p)),l)}}},initToy:function(e){if(void 0===e&&(e=-1),-1==e){var t=n.toyMsg[n.RoomType[n.roomType]];this.unlockToyNum=0,this.loadFlag=[],this.loadFlag.length=t.length;for(var i=null,a=0;a<t.length;a++){var o=t[a],s=parseInt(o.index);if(0===n.toyUnlockData[s]){var c=cc.instantiate(this.giftPrefab);c.parent=this.tracks[o.trackIndex],c.name="toy"+o.index,c.getComponent("GiftCtrl").initItem(s),this.loadFlag[a]=1,-1==e&&(e=a,i=c)}else 1===n.toyUnlockData[s]?(this.openGiftHandle(s,a),this.unlockToyNum++):this.loadFlag[a]=1}!n.isForbid()&&e>=0&&this.changeCameraPosToObj(i),this.tutorialStartHandle(n.TutorialType.gift,i)}else if(0===n.toyUnlockData[e]){var r=n.getToyMsgByIndex(n.roomType,e),l=cc.instantiate(this.giftPrefab);l.parent=this.tracks[0],l.name="toy"+r.index,l.scale=0,l.getComponent("GiftCtrl").initItem(e);var d=cc.instantiate(n.curScene.effectPrefab);d.parent=cc.find("Canvas");var h=this.node.parent.convertToWorldSpaceAR(l.position);h=d.parent.convertToNodeSpaceAR(h),d.position=h}else 1===n.toyUnlockData[e]&&this.openGiftHandle(e)},initDecoration:function(e){for(var t=e.children,n=0;n<t.length;n++)if(-1!=t[n].name.indexOf("ornament")||-1!=t[n].name.indexOf("window")){var i=t[n].addComponent("DecorationItem");t[n].childrenCount>0?i.type=1:i.type=2}},signHandle:function(){for(var e=0,t=a.getJsonData("SignInDateAry",[]),n=0;n<t.length;n++)1==t[n]&&e++;7==e&&(cc.find("Canvas/UI/leftHolder/btnSign").active=!1)},evaluateHandle:function(){l.isSupportEvaluate&&n.evaluateDeltaDays>0&&n.isSave&&1!=n.evaluateFlag&&2!=n.evaluateFlag&&s.loadPanel(n.gameBundle,"evaluatePanel",n.curScene.topPanel)},openGiftHandle:function(e,t){var a=n.getToyMsgByIndex(n.roomType,e);i.getBundleRes(n.toyBundle,"prefabs/"+a.name,function(i){e==n.ToyType.slidePool&&s.enablePhysics();var o=cc.instantiate(i);if(o.parent=n.curScene.tracks[a.trackIndex],o.position=cc.v2(a.posX,a.posY),n.isCombination(e)){var c=o.getComponent("Combination");c.index=e;for(var r=0;r<c.toys.length;r++)c.toys[r].getComponent("ToyBase").index=e}else o.getComponent("ToyBase").index=e;isNaN(t)||(n.curScene.loadFlag[t]=1)})},saveObjMsg:function(e,t,i,o,s){if(0==e){var c=t.getComponent("Petal");if(5!=c.state){var r={isPetal:!0,scene:n.roomType,posIndex:c.posIndex};0==c.state&&(r.times=parseInt(c.remindTimes));var l="cat"+c.index;a.setJsonData(l,r)}}else if(1==e||2==e){var d,h=t.getComponent("Cat"),u={isPetal:!1,scene:n.roomType};d=-1==h.displayNum?"cat"+h.index:"diy"+h.displayNum,1==e?u.x=parseInt(t.x):2==e&&(u.x=parseInt(o),n.isInBed(i)&&(u.times=parseInt(s),u.state=i)),a.setJsonData(d,u)}},saveCatInToyMsg:function(e){var t,i=e.getComponent("ToyBase");n.isInBed(i.index)&&(t=i.remindTimes);var a=e.x;n.isCombination(i.index)&&(a=e.x+e.parent.x),i.holder.childrenCount>0&&this.saveObjMsg(2,i.holder.children[0],i.index,a,t),i.holder1&&i.holder1.childrenCount>0&&this.saveObjMsg(2,i.holder1.children[0],i.index,a)},getOfflineTimes:function(){var e=a.getData("offlineTime"+n.roomType,h.getNowSeconds()),t=h.getNowSeconds()-e;return Math.max(0,t)},saveHandle:function(){if(!n.curScene.isCatInit){a.setData("offlineTime"+n.roomType,h.getNowSeconds());for(var e=0;e<this.tracks.length;e++)for(var t=this.tracks[e].children,i=0;i<t.length;i++)if("petal"==t[i].group)this.saveObjMsg(0,t[i]);else if("cat"==t[i].group)this.saveObjMsg(1,t[i]);else if("toy"==t[i].group)if(n.isCombination(n.ToyType[t[i].name]))for(var o=t[i].getComponent("Combination").toys,s=0;s<o.length;s++)this.saveCatInToyMsg(o[s]);else this.saveCatInToyMsg(t[i])}},updateObjTimes:function(){for(var e=n.curScene.tracks,t=0;t<e.length;t++)for(var i=e[t].children,a=0;a<i.length;a++)if("petal"==i[a].group){var o=i[a].getComponent("Petal");0==o.state&&(o.remindTimes=o.remindTimes-n.curScene.offlineTimes,o.remindTimes=Math.max(0,o.remindTimes))}else if("toy"==i[a].group&&n.isInBed(n.ToyType[i[a].name])){var s=i[a].getComponent("ToyBase");2==s.state&&(s.remindTimes=s.remindTimes-n.curScene.offlineTimes,s.remindTimes=Math.max(0,s.remindTimes))}},setGameState:function(e){this.gamePause=e;for(var t=0;t<this.tracks.length;t++)for(var n=this.tracks[t].children,i=0;i<n.length;i++)if("toy"==n[t].group){var a=n[t].getComponent("ToyBase");a&&(a.skeleton&&(a.skeleton.paused=e),a.skeleton1&&(a.skeleton1.paused=e),a.holder.childrenCount>0&&(a.holder.children[0].getComponent("Cat").skeleton.paused=e),a.holder1&&a.holder1.childrenCount>0&&(a.holder1.children[0].getComponent("Cat").skeleton.paused=e))}},changeCameraPosToObj:function(e,t){var i=e.parent.convertToWorldSpaceAR(e.position);(i=cc.find("Canvas").convertToNodeSpaceAR(i)).x=o.clamp(n.curScene.cameraMinX,i.x,n.curScene.cameraMaxX);var a=Math.abs(n.curScene.camera.node.x-i.x)/3e3;a=o.clamp(.3,a,1),n.curScene.camera.node.stopAllActions(),cc.tween(n.curScene.camera.node).to(a,{x:i.x}).call(function(){n.curScene.camera.node.x=i.x,n.curScene.topCamera.node.x=i.x,t&&t(e)}).start()},getPetalPosIndex:function(){for(var e=-1,t=0;t<this.posIndexArr.length;t++)if(!this.posIndexArr[t]){e=t;break}return-1==e&&(e=this.posIndexArr.length),e},getPosX:function(e){var t=0;if(void 0!==e){var n=e%2==0?-1:1;0!=e&&(t=350*Math.ceil(e/2)*n),t+=this.centerPosX}else t=o.rangeRandom(this.moveMinX,this.moveMaxX);return t},getPosY:function(){return o.rangeRandom(0,this.tracks[0].height)},getDropMsg:function(e){for(var t=e.y+e.parent.y,n=6,i=1;i<this.tracks.length;i++)if(t>this.tracks[i].y){n=i;break}return e.y,1==n?n=o.rangeRandom(2,6):6==n&&(n=5),{trackNo:n,targetY:o.rangeRandom(0,this.tracks[0].height)}},getFlowerTimes:function(e){var t=0;switch(parseInt(e)){case 0:t=0;break;case 1:t=60;break;case 16:t=120;break;case 2:t=300;break;case 17:t=600;break;case 3:t=900;break;case 18:t=1200;break;case 4:t=2400;break;case 19:t=3600;break;case 5:t=5400;break;case 20:t=7200;break;case 6:t=10800;break;case 21:t=14400;break;case 7:t=18e3;break;case 22:t=21600;break;case 8:t=28800;break;case 23:t=36e3;break;case 9:t=43200;break;case 24:t=50400;break;case 10:t=57600;break;case 25:t=64800;break;case 11:case 26:case 12:case 13:case 14:case 15:case 27:case 28:case 29:t=72e3;break;default:t=80800}return t},getSleepTimes:function(e){var t=0;switch(parseInt(e)){case 0:case 1:case 16:t=10;break;case 2:t=20;break;case 17:t=30;break;case 3:t=40;break;case 18:t=50;break;case 4:t=60;break;case 19:t=70;break;case 5:t=90;break;case 20:t=110;break;case 6:t=130;break;case 21:t=150;break;case 7:t=170;break;case 22:t=200;break;case 8:t=230;break;case 23:t=260;break;case 9:t=290;break;case 24:t=330;break;case 10:t=370;break;case 25:t=410;break;case 11:t=450;break;case 26:t=490;break;case 12:t=530;break;case 13:t=580;break;case 14:t=630;break;case 15:t=680;break;case 27:t=730;break;case 28:t=790;break;case 29:t=850;break;default:t=970}return t},generateOnePetal:function(e,t,i,o){void 0===i&&(i=-1),void 0===o&&(o=-1);var c=!1;0==t&&-1==o&&(c=!0,o=this.getFlowerTimes(e),i=this.getPetalPosIndex());var r=cc.instantiate(this.petalPrefab);if(r.getComponent("Petal").skeleton.skeletonData=s.newSkeletonData(n.petalSkeletonData),r.parent=this.tracks[n.petalTrackNo],r.x=this.getPosX(i),r.y=0,r.getComponent("Petal").initItem(e,t,i,o),this.posIndexArr[i]=1,c){var l={isPetal:!0,scene:n.roomType,posIndex:i,times:o},d="cat"+e;a.setJsonData(d,l),this.changeCameraPosToObj(r)}0==e&&this.tutorialStartHandle(n.TutorialType.clickPetal,r)},generateOneCat:function(e,t,i,o,c,r){void 0===r&&(r=-1);var l=!1;if(t==n.catState.born&&-1==i&&(l=!0),l){var d="cat"+e,h={isPetal:!1,scene:n.roomType,x:parseInt(o.parent.x)};a.setJsonData(d,h)}var u=cc.instantiate(this.catPrefab),p=u.getComponent("Cat");p.skeleton.skeletonData=s.newSkeletonData(n.skeletonData),t==n.catState.born?l?(u.x=c.x,u.y=c.y,u.parent=o):(u.x=c.x,u.y=c.y,u.parent=this.tracks[i]):n.isInBed(t)?(u.parent=o.getComponent("ToyBase").holder,u.position=cc.v2(0,0)):(u.x=c.x,u.y=c.y,u.parent=o),p.initItem(e,t,i,r)},findRandomToy:function(){for(var e=[],t=0;t<n.curScene.tracks.length;t++)if(0==t)for(var i=n.curScene.tracks[t].children,a=0;a<i.length;a++)if("toy"==i[a].group){var s=n.ToyType[i[a].name];if(s==n.ToyType.synthesize||s==n.ToyType.wardrobe||s==n.ToyType.massage||s==n.ToyType.arena||s==n.ToyType.lounge)continue;e.push(i[a])}return 0==e.length?null:e[o.rangeRandom(0,e.length)]},findToyByIndex:function(e){for(var t=null,i=0;i<n.curScene.tracks.length;i++)if(0==i)for(var a=n.curScene.tracks[i].children,o=0;o<a.length;o++)if("toy"==a[o].group){if(n.isCombination(n.ToyType[a[o].name]))continue;var s=a[o].getComponent("ToyBase");if(s&&s.index==e){t=a[o];break}}return t},findCat:function(e,t){var i;void 0===t&&(t=!1);for(var a=n.curScene.tracks,o=0;o<a.length;o++){for(var s=a[o].children,c=0;c<s.length;c++){if("petal"==s[c].group)s[c].name==e&&(i=s[c]);else if("cat"==s[c].group)t||s[c].name!=e||(i=s[c]),t&&s[c].name=="display"+e&&(i=s[c]);else if("toy"==s[c].group){var r=n.ToyType[s[c].name];if(n.isCombination(r))for(var l=s[c].getComponent("Combination").toys,d=0;d<l.length&&!(i=this.findCatInToy(l[d],e,t));d++);else i=this.findCatInToy(s[c],e,t)}if(i)break}if(i)break}return i},findCatInToy:function(e,t,n){var i,a=e.getComponent("ToyBase"),o=a.holder.children[0];return!n&&o&&o.name==t&&(i=o),n&&o&&o.name=="display"+t&&(i=o),!i&&a.holder1&&(o=a.holder1.children[0],!n&&o&&o.name==t&&(i=o),n&&o&&o.name=="display"+t&&(i=o)),i},isCatCanDrag:function(e){return!!(e.state==n.catState.idle||e.state==n.catState.ready||e.state==n.catState.talk||e.state==n.catState.listen||e.state==n.catState.talkEnd||e.state==n.catState.display||e.state==n.ToyType.synthesize&&e.curColliderObj&&e.curColliderObj.state<3||e.state==n.ToyType.arena&&e.curColliderObj&&e.curColliderObj.state<3)},isToyFree:function(e,t){return void 0===t&&(t=0),e.index!=n.ToyType.synthesize&&e.index!=n.ToyType.arena&&0==e.state||(e.index==n.ToyType.synthesize||e.index==n.ToyType.arena)&&(0==e.state||1==e.state&&1==t||2==e.state&&0==t)},jumpIntoToy:function(e){var t=e.targetTool.getComponent("ToyBase");if(t)if(0==t.state){e.state=n.catState.inAir,e.curColliderObj=t,t.state=1;var i=t.holder.convertToWorldSpaceAR(cc.v2(0,0));i=e.node.parent.convertToNodeSpaceAR(i);var a=e.node.position.sub(i).mag()/n.curScene.jumpSpeed;a=o.clamp(.1,a,.5),cc.tween(e.node).to(a,{position:i}).call(function(){e.node.parent=e.curColliderObj.holder,e.node.position=cc.v2(0,0),e.node.scale=1}).delay(.3).call(function(){e.state=t.index,n.curScene.toyInteraction(e,!1)}).start(),e.playAnimationByState(n.catState.inAir)}else e.state=n.catState.idle;else e.state=n.catState.idle},toyInteraction:function(e,t){void 0===t&&(t=!0),e.curColliderObj&&(e.hideMoodProgress(),e.curColliderObj.handleAfterPlace(),t&&e.curColliderObj&&r.eventStatistics("toy_"+e.curColliderObj.name))},toyInteractionEnd:function(e){if(e){var t=e.getComponent("Cat");t.playAnimationByState(n.catState.inAir);var i=!0;t.curColliderObj&&n.ToyType[t.curColliderObj.node.name]==n.ToyType.synthesize&&5==t.curColliderObj.state&&(i=!1),t.curColliderObj=null,-1!=t.trackNo&&-2!=t.trackNo||(t.trackNo=4);var a=e.scaleX*e.parent.scaleX,s=e.parent.convertToWorldSpaceAR(e.position);s=this.tracks[t.trackNo].convertToNodeSpaceAR(s),e.parent=this.tracks[t.trackNo],e.scaleX=a,e.position=s;var c=this.getPosY(),r=cc.v2(s.x,c),l=s.sub(r).mag()/n.curScene.jumpSpeed;l=o.clamp(.1,l,.5),cc.tween(e).to(l,{position:r}).call(function(){t.isCanInteration=!1,t.state=n.catState.idle,t.playAnimationByState(n.catState.idle),i&&(t.showMoodProgress(),t.updateMoodProgress(!0,10))}).start()}},checkIsSynthesis:function(){for(var e=null,t=null,i=null,o=null,s=0;s<n.petalMsg.length;s++){var c=n.petalMsg[s];if(c.isSynthesis){var r=parseInt(a.getData("petal"+c.index));if(1===r||2===r)continue;var l=c.coin.split("&");if(!t&&2==a.getData("petal"+l[0])&&2==a.getData("petal"+l[1])){t="1&"+c.coin+"&"+c.index;break}i||2!=a.getData("petal"+l[0])&&2!=a.getData("petal"+l[1])||(i="2&"+c.coin+"&"+c.index),o||(o="3&"+c.coin+"&"+c.index)}}return t?e=t:i?e=i:o&&(e=o),e},interactionHandle:function(e){var t=this,i=cc.find("Canvas/UI/block");i.active=!0,this.pauseGame(!0,e.node),this.hideUI(),this.changeCameraPosToObj(e.node,function(){t.camera._zoomRatio=1.5,t.camera.node.y-=170,t.topCamera._zoomRatio=t.camera._zoomRatio,t.topCamera.node.y=t.camera.node.y,i.active=!1}),s.loadPanel(n.gameBundle,"demandNode",e.node,function(t){t.getComponent("DemandCtrl").init(e.demandIndex,e)})},interactionEndHandle:function(e){e.state=n.catState.idle,e.isCanInteration=!1,this.pauseGame(!1,e.node),this.camera._zoomRatio=1,this.camera.node.y=0,this.topCamera._zoomRatio=this.camera._zoomRatio,this.topCamera.node.y=this.camera.node.y,this.showUI()},hideUI:function(){var e=cc.find("Canvas/UI/leftHolder");cc.tween(e).by(.5,{x:-600}).start();var t=cc.find("Canvas/UI/rightHolder");cc.tween(t).by(.5,{x:600}).start(),cc.tween(this.bellLabel.node.parent).by(.5,{y:300}).start(),this.btnHideDisplayWindow()},showUI:function(){var e=cc.find("Canvas/UI/leftHolder");cc.tween(e).to(.5,{x:this.leftStartPosX}).start();var t=cc.find("Canvas/UI/rightHolder");cc.tween(t).to(.5,{x:this.rightStartPosX}).start(),cc.tween(this.bellLabel.node.parent).to(.5,{y:this.bellStartPosY}).start()},pauseGame:function(e,t){this.gamePause=e;for(var i=0;i<this.tracks.length;i++)for(var a=this.tracks[i].children,o=0;o<a.length;o++)if("toy"==a[o].group){var s=n.ToyType[a[o].name];if(n.isCombination(s))for(var c=a[o].getComponent("Combination"),r=0;r<c.toys.length;r++)this.toyPause(c.toys[r],e);else this.toyPause(a[o],e);a[o].active=!e}else if("cat"==a[o].group||"petal"==a[o].group){if(a[o].name==t.name){if(!e){var l=a[o].getComponent("Cat");l.showMoodProgress(),l.updateMoodProgress(!0,10)}continue}a[o].active=!e}},toyPause:function(e,t){var n=e.getComponent("ToyBase");n.skeleton&&(n.skeleton.paused=t),n.skeleton1&&(n.skeleton1.paused=t),n.holder.childrenCount>0&&(n.holder.children[0].getComponent("Cat").skeleton.paused=t,n.holder.children[0].active=!t),n.holder1&&n.holder1.childrenCount>0&&(n.holder1.children[0].getComponent("Cat").skeleton.paused=t,n.holder1.children[0].active=!t)},tutorialStartHandle:function(e,t){var i=this;if(n.tutorialStep==e)if(e==n.TutorialType.buyPetal){var o="\u901a\u8fc7\u8d2d\u4e70\u82b1\u82de\u6765\u83b7\u53d6\u4e00\u53ea\u732b\u54aa";0==this.unionStep?(t=cc.find("Canvas/UI/rightHolder/btnShowCabinet"),n.remindPanelCtrl.showTutorialHandle(t,o)):1==this.unionStep&&(t=this.displayWindowCtrl.catScrollView.content.children[0],n.remindPanelCtrl.showTutorialHandle(t,o))}else if(e==n.TutorialType.clickPetal||e==n.TutorialType.gift){if(e==n.TutorialType.gift&&!t)return n.tutorialStep=n.TutorialType.DIY,this.unionStep=0,a.setJsonData("tutorialStep",n.tutorialStep),void this.tutorialStartHandle(n.TutorialType.DIY);this.changeCameraPosToObj(t,function(e){n.remindPanelCtrl.showTutorialHandle(e,null,i.camera)})}else if(e==n.TutorialType.miniGame)0==this.unionStep?(t=cc.find("Canvas/UI/leftHolder/btnMiniGame"),n.remindPanelCtrl.showTutorialHandle(t,"\u901a\u8fc7\u5c0f\u6e38\u620f\u53ef\u4ee5\u89e3\u9501\u4e0d\u540c\u5a31\u4e50\u8bbe\u65bd")):n.remindPanelCtrl.showTutorialHandle(t);else if(e==n.TutorialType.DIY){var s="\u4e5f\u53ef\u4ee5\u901a\u8fc7DIY\u6765\u8bbe\u8ba1\u83b7\u5f97\u4e00\u53ea\u732b\u54aa";0==this.unionStep?(t=cc.find("Canvas/UI/rightHolder/btnShowCabinet"),n.remindPanelCtrl.showTutorialHandle(t,s)):1==this.unionStep?n.remindPanelCtrl.showTutorialHandle(this.displayWindowCtrl.diyCatBtn,s):2==this.unionStep&&(t=this.displayWindowCtrl.diyCatScrollView.content.children[0],n.remindPanelCtrl.showTutorialHandle(t,s))}else if(e==n.TutorialType.dragToScene)0==this.unionStep&&(t=this.displayWindowCtrl.diyCatScrollView.content.children[1],n.remindPanelCtrl.showTutorialHandle(t,"\u5c06\u732b\u54aa\u62d6\u5230\u623f\u95f4\u4e2d",null,!0,{type:1,moveY:500}));else if(e==n.TutorialType.dragToCabinet){var c;0==this.unionStep?(c="\u67e5\u627e\u732b\u54aa",t=this.displayWindowCtrl.catScrollView.content.children[0],n.remindPanelCtrl.showTutorialHandle(t,c)):1==this.unionStep&&(c="\u5c06\u732b\u54aa\u6536\u56de\u5c55\u67dc",n.remindPanelCtrl.showTutorialHandle(t,c,this.camera,!0,{type:1,moveY:-310}))}else e==n.TutorialType.switchScene?(t=cc.find("Canvas/UI/rightHolder/btnSwitchRoom"),n.remindPanelCtrl.showTutorialHandle(t,"\u5207\u6362\u5230\u65b0\u623f\u95f4")):e==n.TutorialType.switchLastScene&&(t=cc.find("Canvas/UI/leftHolder/btnSwitchRoom"),n.remindPanelCtrl.showTutorialHandle(t,"\u5207\u56de\u5b66\u9662"))},tutorialEndHandle:function(e,t){if(void 0===t&&(t=0),n.tutorialStep==e&&this.unionStep==t){e==n.TutorialType.buyPetal&&1==t&&this.btnHideDisplayWindow(),n.remindPanelCtrl.hideTutorialNode();var i=1;e==n.TutorialType.miniGame||e==n.TutorialType.DIY?i=3:e!=n.TutorialType.buyPetal&&e!=n.TutorialType.dragToCabinet||(i=2);for(var o=0;o<i;o++)t==i-1?(this.unionStep=0,n.tutorialStep=parseInt(e)+1,a.setJsonData("tutorialStep",n.tutorialStep)):this.unionStep=parseInt(t)+1;e==n.TutorialType.clickPetal||e==n.TutorialType.switchScene||e==n.TutorialType.dragToCabinet&&1==t?this.tutorialStartHandle(parseInt(e)+1):e==n.TutorialType.gift||e==n.TutorialType.DIY&&1==t?this.tutorialStartHandle(n.TutorialType.DIY):e==n.TutorialType.dragToScene&&this.displayWindowCtrl.btnCat(),n.tutorialStep==n.TutorialType.finish&&this.tutorialFinish()}},tutorialFinish:function(){this.displayWindowCtrl.catScrollView.horizontal=!0,this.displayWindowCtrl.diyCatScrollView.horizontal=!0,void 0!==n.toyUnlockData[n.ToyType.synthesize]&&null!==n.toyUnlockData[n.ToyType.synthesize]||(n.toyUnlockData[n.ToyType.synthesize]=0,a.setJsonData("toyUnlockData",n.toyUnlockData))},onTouchStart:function(e){this.gamePause||n.isForbid()||(this.lastPos=e.touch.getLocation())},onTouchMove:function(e){if(!this.gamePause&&!n.isForbid()){var t=e.touch.getLocation();null==this.lastPos&&(this.lastPos=t);var i=t.x-this.lastPos.x,a=this.camera.node.x-i;a=o.clamp(this.cameraMinX,a,this.cameraMaxX),this.camera.node.x=a,this.topCamera.node.x=a,this.lastPos=t}},forbidOperate:function(){cc.find("Canvas/UI/block").active=!0},enableOperate:function(){cc.find("Canvas/UI/block").active=!1},getBundleName:function(e){var t;switch(e){case"jump":t=n.jumpBundle;break;case"fishing":t=n.fishingBundle;break;case"search":t=n.searchBundle;break;case"parkour":t=n.parkourBundle;break;case"hotel":t=n.hotelBundle;break;case"dressUp":t=n.dressUpBundle}return t},loadScene:function(e){this.saveHandle();var t=n.SceneName[e];this.sceneName=t,this.bundleName=this.getBundleName(t),i.checkBundleIsLoad(this.bundleName)||("hotel"===t||"parkour"===t?i.loadBundle(this.bundleName,null,null,isOnline):i.loadBundle(this.bundleName)),e==n.SceneName.hotel&&(null==n.hotelLevelNeedData&&i.loadLocalRes("hotelLevelNeed",function(e){n.hotelLevelNeedData=e.json}),null==n.hotelNeedData&&i.loadLocalRes("hotelNeedData",function(e){n.hotelNeedData=e.json})),n.showLoadingPanel(),this.schedule(this.checkLoadScene,.5)},checkLoadScene:function(){i.checkBundleIsLoad(this.bundleName)&&(n.SceneName[this.sceneName]!=n.SceneName.hotel||n.hotelLevelNeedData&&n.hotelNeedData)&&(this.unschedule(this.checkLoadScene),cc.director.loadScene(this.sceneName))},btnShowDisplayWindow:function(e){var t=this;if(!(e&&n.isForbid([n.TutorialType.buyPetal,n.TutorialType.DIY])||1==this.windowFlag)){e&&c.playEffect("click"),this.windowFlag=1;var i=cc.find("Canvas/UI/rightHolder");i.getChildByName("btnShowCabinet").active=!1,i.getChildByName("btnHideCabinet").active=!0,this.displayWindowCtrl.node.active=!0,this.displayWindowCtrl.node.stopAllActions(),this.displayWindowCtrl.node.y=-cc.winSize.height/2-this.displayWindowCtrl.node.height,this.displayWindowCtrl.updateBtn(),cc.tween(this.displayWindowCtrl.node).to(.5,{y:-cc.winSize.height/2}).call(function(){t.tutorialStartHandle(n.TutorialType.buyPetal),t.tutorialStartHandle(n.TutorialType.DIY),t.tutorialStartHandle(n.TutorialType.dragToScene),t.tutorialStartHandle(n.TutorialType.dragToCabinet)}).start(),this.tutorialEndHandle(n.TutorialType.buyPetal,0),this.tutorialEndHandle(n.TutorialType.DIY,0),e&&r.eventStatistics("displayWindowShow")}},btnHideDisplayWindow:function(e){var t=this;if(!(e&&n.isForbid()||2==this.windowFlag)){e&&c.playEffect("click"),this.windowFlag=2;var i=cc.find("Canvas/UI/rightHolder");i.getChildByName("btnShowCabinet").active=!0,i.getChildByName("btnHideCabinet").active=!1,this.displayWindowCtrl.node.stopAllActions(),this.displayWindowCtrl.node.y=-cc.winSize.height/2,cc.tween(this.displayWindowCtrl.node).to(.5,{y:-cc.winSize.height/2-this.displayWindowCtrl.node.height}).call(function(){t.displayWindowCtrl.node.active=!1}).start(),e&&r.eventStatistics("displayWindowHide")}},btnSwitchRoom:function(e,t){n.isForbid([n.TutorialType.switchScene,n.TutorialType.switchLastScene])||(this.saveHandle(),c.playEffect("click"),n.roomType=parseInt(n.roomType)+parseInt(t),n.roomType>3?n.roomType=0:n.roomType<0&&(n.roomType=3),r.eventStatistics("switchRoom"+(1==t?"Right":"Left")),n.showLoadingPanel(function(){cc.director.loadScene("game")}),1==t&&n.tutorialStep==n.TutorialType.switchScene&&this.tutorialEndHandle(n.TutorialType.switchScene),-1==t&&n.tutorialStep==n.TutorialType.switchLastScene&&(n.isCanShowAd=!1,this.tutorialEndHandle(n.TutorialType.switchLastScene)))},btnMiniGame:function(){n.isForbid([n.TutorialType.miniGame])||(c.playEffect("click"),s.loadPanel(n.gameBundle,"miniGamePanel",n.curScene.topPanel),this.tutorialEndHandle(n.TutorialType.miniGame,0))},btnDailyGift:function(e){n.isForbid()||(e&&c.playEffect("click"),n.isTest?n.updateBellNum(this.bellLabel,1e3):s.loadPanel(n.gameBundle,"dailyGiftPanel",n.curScene.middlePanel,function(e){e.zIndex=1}))},btnSign:function(e){n.isForbid()||(e&&c.playEffect("click"),s.loadPanel(n.gameBundle,"signPanel",n.curScene.middlePanel))},btnPurchase:function(e){n.isForbid()||(e&&c.playEffect("click"),s.loadPanel(n.gameBundle,"purchasePanel",n.curScene.middlePanel))},btnSetting:function(){n.isForbid()||(c.playEffect("click"),n.remindPanelCtrl.showSetPanel())},btnBack:function(){n.isForbid()||(this.saveHandle(),c.playEffect("click"),n.showLoadingPanel(function(){cc.director.loadScene("main")}))},update:function(){if(0===this.loadResourcesFlag){for(var e=!0,t=0;t<this.loadFlag.length;t++)if(1!=this.loadFlag[t]){e=!1;break}e&&(this.loadResourcesFlag=1)}else 1===this.loadResourcesFlag&&(this.loadResourcesFlag=2,this.initCat());if(this.dragBgMove&&(this.bgMoveSpeed<0&&this.camera.node.x+this.bgMoveSpeed>=this.cameraMinX||this.bgMoveSpeed>0&&this.camera.node.x+this.bgMoveSpeed<=this.cameraMaxX)){this.camera.node.x+=this.bgMoveSpeed,this.topCamera.node.x=this.camera.node.x;var i=n.curScene.dragObj.x+this.bgMoveSpeed;i=o.clamp(this.moveMinX,i,this.moveMaxX),n.curScene.dragObj.x=i}!this.isDiyLoad&&this.displayWindowCtrl.diyCatScrollView.content.childrenCount>0&&this.displayWindowCtrl.catScrollView.content.childrenCount>0&&this.isCatInit&&(console.log("\u8d44\u6e90\u52a0\u8f7d\u5b8c\u6210"),this.isDiyLoad=!0,this.hideLoadingPanel())},btnAddCoin:function(){n.isTest&&n.updateBellNum(this.bellLabel,1e3)}}),cc._RF.pop()},{AdInfo:"AdInfo",AudioModule:"AudioModule",EngineCommon:"EngineCommon",GameCommon:"GameCommon",GameControl:"GameControl",LoadResModule:"LoadResModule",MathModule:"MathModule",StatisticsModule:"StatisticsModule",StorageModule:"StorageModule",TimeModule:"TimeModule"}],Genie:[function(e,t){"use strict";cc._RF.push(t,"7eacbI8jgFKF70YylSVkg3P","Genie");var n=e("ToyBase"),i=e("MathModule"),a=e("EngineCommon");cc.Class({extends:n,properties:{},start:function(){this.animationName=["Idle","play1","play2","play3"],this.init()},toyHandle:function(){this.animationIndex=i.rangeRandom(1,4),this.playAnimationByState(this.animationIndex)},catHandle:function(){var e=this.holder.children[0].getComponent("Cat");a.spineAnimationPlay(e.skeleton,["","play-xiaojingling","play-xiaojingling2","play-xiaojingling3"][this.animationIndex])}}),cc._RF.pop()},{EngineCommon:"EngineCommon",MathModule:"MathModule",ToyBase:"ToyBase"}],GiftCtrl:[function(e,t){"use strict";cc._RF.push(t,"31bd447iQFJSruyqu19MNX/","GiftCtrl");var n=e("MathModule"),i=e("LoadResModule"),a=e("StorageModule"),o=e("GameControl");cc.Class({extends:cc.Component,properties:{image:cc.Sprite},onLoad:function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this)},start:function(){this.isDestroy=!1},initItem:function(e){var t=this;this.index=e,i.loadLocalRes("gift",function(e){var i=e.getSpriteFrames(),a=n.rangeRandom(0,i.length);t.image.spriteFrame=i[a]},cc.SpriteAtlas);var a=o.getToyMsgByIndex(o.roomType,e);cc.tween(this.node).to(.5,{scale:1}).call(function(){cc.tween(t.node).by(.5,{scale:.05}).by(.5,{scale:-.05}).union().repeatForever().start()}).start(),this.node.position=cc.v2(a.posX,Math.min(a.posY,30))},onTouchStart:function(){if(!o.isForbid([o.TutorialType.gift])&&!this.isDestroy){var e=cc.instantiate(o.curScene.effectPrefab);e.parent=cc.find("Canvas");var t=this.node.parent.convertToWorldSpaceAR(this.node.position);t=e.parent.convertToNodeSpaceAR(t),e.position=t,o.curScene.openGiftHandle(this.index),o.toyUnlockData[this.index]=1,a.setJsonData("toyUnlockData",o.toyUnlockData),this.isDestroy=!0,this.node.destroy(),o.curScene.tutorialEndHandle(o.TutorialType.gift)}}}),cc._RF.pop()},{GameControl:"GameControl",LoadResModule:"LoadResModule",MathModule:"MathModule",StorageModule:"StorageModule"}],Ground:[function(e,t){"use strict";cc._RF.push(t,"ff466rNIzVAVLN0yBMjysWB","Ground"),cc.Class({extends:cc.Component,properties:{},start:function(){},onBeginContact:function(e,t,n){if("ball"==n.node.group){var i=n.node.parent.parent;"toy"==i.group&&i.emit("generateOneBall"),console.log("\u9500\u6bc1\u7403"),n.node.removeFromParent(),n.node.destroy()}}}),cc._RF.pop()},{}],Harp:[function(e,t){"use strict";cc._RF.push(t,"8f19djALlhG07zGeb65AdUN","Harp");var n=e("ToyBase"),i=e("GameControl"),a=e("AudioModule");cc.Class({extends:n,properties:{},start:function(){var e=this;this.animationIndex=0,this.animationName=["Idle","play"],this.init(),this.skeleton.setCompleteListener(function(t){"play"==(t.animation?t.animation.name:"")&&(console.log("\u9053\u5177\u4e92\u52a8\u7ed3\u675f"+e.node.name),e.interactionEnd())})},toyHandle:function(){this.playAnimationByState(1),setTimeout(function(){a.playEffect("harp")},3e3)},catHandle:function(){this.holder.children[0].getComponent("Cat").playAnimationByState(i.catState.happy)}}),cc._RF.pop()},{AudioModule:"AudioModule",GameControl:"GameControl",ToyBase:"ToyBase"}],Home:[function(e,t){"use strict";cc._RF.push(t,"5eadas8VA9ISo+IGN4oSWTl","Home");var n=e("GameControl"),i=e("LoadResModule"),a=e("AdInfo"),o=e("AdsManager"),s=e("AudioModule"),c=e("GameCommon");cc.Class({extends:cc.Component,properties:{},onLoad:function(){lastSceneIndex=sceneIndex,sceneIndex=n.SceneName.home,c.handleEventPerScene()},start:function(){n.init(),this.sizeFit(),this.loadRes(),this.adHandle(),this.pushHandle(),this.musicHandle(),n.hideLoadingPanel(),console.log("isHasAd",isHasAd),"wx"==channel&&(cc.find("Canvas/logo").active=!1)},pushHandle:function(){c.isSupportPush&&n.pushCtl.ShowMainMenu({singleBtnsMsg:[{x:750,y:0,scale:1,imageType:0}]})},musicHandle:function(){s.playMusic("bgm")},loadRes:function(){i.checkBundleIsLoad(n.gameBundle)||i.loadBundle(n.gameBundle,function(){console.log("loadbundle "+n.gameBundle+" suc")}),i.checkBundleIsLoad(n.catBundle)||i.loadBundle(n.catBundle,function(){console.log("loadbundle "+n.catBundle+" suc")},null,isOnline)},sizeFit:function(){cc.winSize.width/cc.winSize.height<=1.6&&(cc.find("Canvas/bg").scale=1/1.5)},adHandle:function(){isHasAd&&(null==a.adsManager&&(a.adsManager=new o,a.adsManager.initAd(function(){n.remindPanelCtrl.showSimpleRemind("\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25\uff0c\u8bf7\u68c0\u67e5\u7f51\u7edc\u540e\u91cd\u8bd5")})),bannerShowFlag[sceneIndex]?a.adsManager.showBanner():a.adsManager.hideBanner(),lastSceneIndex==n.SceneName.game&&a.adsManager.showInterVideo("game-main"))},btnStart:function(){s.playEffect("click"),n.showLoadingPanel(),c.isSupportPush&&n.pushCtl.HideMainMenu(),this.schedule(this.loadSceneHandle,.5)},loadSceneHandle:function(){i.checkBundleIsLoad(n.gameBundle)&&i.checkBundleIsLoad(n.catBundle)&&(this.unschedule(this.loadSceneHandle),cc.director.loadScene("main"))}}),cc._RF.pop()},{AdInfo:"AdInfo",AdsManager:"AdsManager",AudioModule:"AudioModule",GameCommon:"GameCommon",GameControl:"GameControl",LoadResModule:"LoadResModule"}],HuaweiAd:[function(e,t){"use strict";cc._RF.push(t,"02312ClW6dE2Jw8KWsMnsTW","HuaweiAd");var n=e("AdInfo"),i=e("TimeModule"),a=e("GameCommon");cc.Class({properties:{bannerAd:null,videoAd:null,interstitialAd:null,nativeAd:null,videoId:"h7toonwj0z",nativeBannerId:"p9nvdpgfgy",nativeInterId:"x6ram58230",bannerId:"h3m5w99y7z",interId:"v0p4e7ims9"},start:function(){},initAd:function(){cc.sys.platform!=cc.sys.DESKTOP_BROWSER&&(this.nativeAd=[],this.isInterLoad=!1,this.isVideoLoad=!1,this.showInterOrNative=0,this.deltaType=0,this.curMistakenTouchNum=0,this.isShowIntCurTime=!1,this.failNum=0,n.interstitialCloseTime=i.getNowSeconds(),n.systemInfo=qg.getSystemInfoSync(),console.log("jswrapper platform"+n.systemInfo.platformVersionCode),qg.getNetworkType({success:function(e){n.networkType=e.networkType,console.log("jsw networkType="+n.networkType)},fail:function(e){console.log(e.errMsg)},complete:function(){}}),qg.onNetworkStatusChange(function(e){n.networkType=e.networkType,console.log("jsw onNetworkStatusChange networkType="+n.networkType)}))},showBannerAndNative:function(e){0==this.showInterOrNative&&(!e&&(0==n.bannerType&&n.isBannerShow||1==n.bannerType&&n.isNativeBannerShow)||(0==n.bannerType?this.showBanner():1==n.bannerType&&(n.nativeControl.unschedule(this.showNativeBanner),n.isTest&&!this.isFirst?this.showBanner():this.showNativeBanner(),n.nativeControl.schedule(this.showNativeBanner,n.nativeIntervalTimes))))},showBanner:function(){if(qg.createBannerAd){var e=this;if(null==this.bannerAd){var t=n.systemInfo.safeArea.height;this.bannerAd=qg.createBannerAd({adUnitId:e.bannerId,style:{top:t-57,left:0,height:57,width:360},adIntervals:30}),setTimeout(function(){e.bannerAd.show()},1e3),this.bannerAd.onError(function(t){console.log("jswrapper banner error",t.errMsg+","+t.errCode),n.isBannerShow=!1,0==n.bannerType&&e.showNativeBanner()}),this.bannerAd.onLoad(function(){console.log("jswrapper banner onLoad"),n.isBannerShow=!0,e.isFirst=!0,e.hideNativeBanner()}),this.bannerAd.onClose(function(){n.isBannerShow=!1,console.log("jswrapper banner onClose")})}else this.bannerAd.show()}},bannerShowFail:function(e){0==e&&0==n.bannerType?n.adsManager.ads.showNativeBanner():1==e&&1==n.bannerType&&n.adsManager.ads.showBanner()},hideBannerAndNative:function(){this.hideBanner(),this.hideNativeBanner(),1==n.bannerType&&n.nativeControl.unschedule(n.adsManager.ads.showNativeBanner)},hideBanner:function(){null!=n.adsManager.ads.bannerAd&&(n.isBannerShow=!1,n.adsManager.ads.bannerAd.destroy(),n.adsManager.ads.bannerAd=null)},hideNativeBanner:function(){n.nativeControl.btnNativeAdClose(null,1)},initInterstitial:function(){if(qg.createInterstitialAd){var e=this;this.interstitialAd&&(this.interstitialAd.destroy(),this.interstitialAd=null),this.interstitialAd=qg.createInterstitialAd({adUnitId:e.interId}),this.interstitialAd.load(),this.interstitialAd.onLoad(function(t){console.log("jswrapper onLoad data "+JSON.stringify(t)),e.isInterLoad=!0}),this.interstitialAd.onError(function(t){e.isInterLoad=!1,console.log("jswrapper interstitialAd onError "+JSON.stringify(t))}),this.interstitialAd.onClose(function(){e.isInterLoad=!1,e.initInterstitial(),n.interstitialCloseTime=i.getNowSeconds(),e.showBannerAndNative(!0),e.showInterOrNative=0})}},showInterstitial:function(){if(!qg.createInterstitialAd)return this.interAndNativeShowFail(0),void console.log("jswrapper qg.createInterstitialAd\u65b9\u6cd5\u4e0d\u652f\u6301");if(this.interstitialAd&&this.isInterLoad){if(1==this.deltaType&&i.getNowSeconds()-n.interstitialCloseTime<n.interstitialShowInterval1||2==this.deltaType&&i.getNowSeconds()-n.interstitialCloseTime<n.interstitialShowInterval2||3==this.deltaType&&i.getNowSeconds()-n.interstitialCloseTime<n.interstitialShowInterval3)return;this.interstitialAd.show(),this.showInterOrNative=1,this.isShowIntCurTime=!1,this.failNum=0,this.hideBannerAndNative()}else this.interstitialAd?this.interstitialAd.load():this.initInterstitial(),this.interAndNativeShowFail(0)},interAndNativeShowFail:function(e){if(0==e&&0==n.interType?n.adsManager.ads.showNativeInter():1==e&&1==n.interType&&n.adsManager.ads.showInterstitial(),2==n.interType){if(1==n.adsManager.ads.deltaType&&i.getNowSeconds()-n.interstitialCloseTime<n.interstitialShowInterval1||2==n.adsManager.ads.deltaType&&i.getNowSeconds()-n.interstitialCloseTime<n.interstitialShowInterval2||3==n.adsManager.ads.deltaType&&i.getNowSeconds()-n.interstitialCloseTime<n.interstitialShowInterval3)return;n.adsManager.ads.failNum++,n.adsManager.ads.failNum>=2&&(n.adsManager.ads.isShowIntCurTime=!n.adsManager.ads.isShowIntCurTime,n.adsManager.ads.failNum=0)}},initVideo:function(){var e=this;qg.createRewardedVideoAd?(this.videoAd=qg.createRewardedVideoAd({adUnitId:e.videoId,success:function(){console.log("jswrapper ad demo : loadAndShowVideoAd createRewardedVideoAd: success")},fail:function(e,t){console.log("jswrapper ad demo : loadAndShowVideoAd createRewardedVideoAd fail: "+e+","+t)},complete:function(){console.log("jswrapper ad demo : loadAndShowVideoAd createRewardedVideoAd complete")}}),this.videoAd.onLoad(function(){console.log("jswrapper:\u534e\u4e3a\u89c6\u9891\u5e7f\u544a\u52a0\u8f7d\u6210\u529f"),e.isVideoLoad=!0}),this.videoAd.onError(function(t){console.error("jswrapper:\u534e\u4e3a\u89c6\u9891\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25"+JSON.stringify(t)),e.isVideoLoad=!1}),this.videoAd.onClose(function(t){e.isVideoLoad=!1,t&&t.isEnded?rewardCallBack():console.log("jswrapper \u4e2d\u9014\u9000\u51fa"),e.videoAd.load(),videoCloseBack()}),this.videoAd&&this.videoAd.load()):console.log("qg.createRewardedVideoAd\u65b9\u6cd5\u4e0d\u652f\u6301")},showVideo:function(){if(!this.videoAd)return videoFailCallBack(),void this.initVideo();this.isVideoLoad?(this.videoAd&&this.videoAd.show(),videoShowCallBack()):(videoFailCallBack(),this.videoAd.load())},showInterAndNative:function(e){void 0===e&&(e=1),console.log("jsw showInterAndNative isShowIntCurTime="+this.isShowIntCurTime+",AdInfo.interType="+n.interType),this.deltaType=e,0==n.interType?this.showInterstitial():1==n.interType?this.showNativeInter():2==n.interType&&(this.isShowIntCurTime?this.showInterstitial():this.showNativeInter())},showNativeBanner:function(){console.log("jsw showNativeBanner this.showInterOrNative="+this.showInterOrNative),0==this.showInterOrNative&&n.adsManager.ads.showNativeAd(1,1,n.nativeControl.showNativeBanner)},showNativeIcon:function(){n.adsManager.ads.showNativeAd(0,1,n.nativeControl.showNativeIcon)},showNativeInter:function(){1==this.deltaType&&i.getNowSeconds()-n.interstitialCloseTime<n.interstitialShowInterval1||2==this.deltaType&&i.getNowSeconds()-n.interstitialCloseTime<n.interstitialShowInterval2||3==this.deltaType&&i.getNowSeconds()-n.interstitialCloseTime<n.interstitialShowInterval3||n.adsManager.ads.showNativeAd(2,2,n.nativeControl.showNativeInter)},showNativeAd:function(e,t,i){var o=this,s="";1==e?s=o.nativeBannerId:2==e&&(s=o.nativeInterId),this.nativeAd[e]&&(this.nativeAd[e].offLoad(),this.nativeAd[e].offError()),this.nativeAd[e]=qg.createNativeAd({adUnitId:s,success:function(){o.nativeAd[e].load(),o.nativeAd[e].onLoad(function(s){var c;if(console.log("jswrapper loadNativeAd onload:"+e),o.nativeAd[e]&&s&&s.adList&&s.adList[0]){if(c=s.adList[0],0==t)i(c.adId,c.icon);else if(1==t)n.isNativeBannerShow=!0,n.nativeBannerAdId=c.adId.toString(),i(c.adId,c.title,c.source),o.hideBanner();else if(2==t){var r;r=c.imgUrlList&&c.imgUrlList[0]?c.imgUrlList[0]:c.icon,i(c.adId,c.title,c.source,r),o.showInterOrNative=2,o.isShowIntCurTime=!0,o.failNum=0,o.hideBannerAndNative(),o.curMistakenTouchNum++,n.nativeInterAdId=c.adId.toString(),console.log("jswrapper curMistakenTouchNum="+o.curMistakenTouchNum),0==a.isInForbiddenArea()&&o.curMistakenTouchNum<=n.mistakenTouchNum?n.nativeControl.disableNativeInterCloseBtn():n.nativeControl.enableNativeInterCloseBtn()}c.adId&&o.nativeAd[e].reportAdShow({adId:c.adId.toString()})}}),o.nativeAd[e].onError(function(t){console.log("jswrapper native error:"+t.errMsg),1==e?o.bannerShowFail(1):2==e?o.interAndNativeShowFail(1):console.log("jswrapper native error:"+t.errMsg)})},fail:function(e,t){console.log("jswrapper loadNativeAd fail: "+e+","+t)},complete:function(){}})},reportShowNativeAd:function(){console.log("jswrapper reportShowNativeAd:nativeBannerAdId="+n.nativeBannerAdId+",nativeInterAdId="+n.nativeInterAdId),n.nativeBannerAdId&&this.nativeAd[1]&&this.nativeAd[1].reportAdShow({adId:n.nativeBannerAdId.toString()}),n.nativeInterAdId&&this.nativeAd[2]&&this.nativeAd[2].reportAdShow({adId:n.nativeInterAdId.toString()})},clickNativeAd:function(e,t){console.log("jswrapper clicknativead"),this.nativeAd[t]&&this.nativeAd[t].reportAdClick({adId:""+e}),this.hideNativeAd(t,!0)},hideNativeAd:function(e,t){void 0===t&&(t=!1),this.nativeAd[e]&&(console.log("jswrapper hideNativeAd"+e+",isAuto="+t),this.nativeAd[e]&&(this.nativeAd[e].offLoad(),this.nativeAd[e].offError()),this.nativeAd[e].destroy(),this.nativeAd[e]=null,1==e?(n.nativeBannerAdId=null,n.isNativeBannerShow=!1):2==e&&(n.nativeInterAdId=null,this.showInterOrNative=0,n.interstitialCloseTime=i.getNowSeconds(),console.log("jswrapper hideNativeAd interstitialCloseTime="+n.interstitialCloseTime),this.showBannerAndNative(!0)),t&&n.nativeControl.btnNativeAdClose(null,e))}}),cc._RF.pop()},{AdInfo:"AdInfo",GameCommon:"GameCommon",TimeModule:"TimeModule"}],IOSAd:[function(e,t){"use strict";cc._RF.push(t,"35888ctYyRPIpuy39eCM00B","IOSAd"),e("AdInfo"),cc.Class({initAd:function(){},showBanner:function(e){void 0===e&&(e=!1),jsb.reflection.callStaticMethod("AppController","showBannerAd")},hideBanner:function(){jsb.reflection.callStaticMethod("AppController","hideBannerAd")},showInterstitial:function(e,t){void 0===e&&(e=0),jsb.reflection.callStaticMethod("AppController","showInt::",e,t)},showInterstitialVideo:function(e,t){void 0===e&&(e=1),console.log("jsw="+e+t),jsb.reflection.callStaticMethod("AppController","showIntVideo::",e,t)},showVideo:function(){jsb.reflection.callStaticMethod("AppController","showVideo")}}),cc._RF.pop()},{AdInfo:"AdInfo"}],LZW:[function(e,t,n){"use strict";cc._RF.push(t,"0d0ecwPMbtMOrnmEdsK2lZn","LZW"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){}return e.decode=function(e,t){var n=1<<t,i=n+1,a=t+1,o=[],s=0;function c(){var e;for(o=[],a=t+1,e=0;e<n;e++)o[e]=[e];o[n]=[],o[i]=null}function r(t){var n,i=0;for(n=0;n<t;n++)e[s>>3]&1<<(7&s)&&(i|=1<<n),s++;return i}return function(){for(var e,t,s=[];;)if(t=e,(e=r(a))!=n){if(e==i)break;if(e<o.length)t!==n&&o.push(o[t].concat(o[e][0]));else{if(e!==o.length)throw new Error("LZW\u89e3\u6790\u51fa\u9519");o.push(o[t].concat(o[t][0]))}s.push.apply(s,o[e]),o.length===1<<a&&a<12&&a++}else c();return s}()},e}();n.default=i,cc._RF.pop()},{}],LanguageComponet:[function(e,t){"use strict";cc._RF.push(t,"24e31mldGRDJ6BLcfLstnid","LanguageComponet");var n=e("LanguageModule");cc.Class({extends:cc.Component,properties:{isImage:{default:!1,tooltip:"\u662f\u4e0d\u662f\u56fe\u7247"},images:{type:cc.SpriteFrame,default:[],tooltip:"\u4e0d\u540c\u8bed\u8a00\u7684\u56fe\u7247\u6570\u7ec4",visible:function(){return this.isImage}},labelName:{default:"",tooltip:"\u9700\u8981\u7ffb\u8bd1\u7684\u6587\u5b57\u952e\uff0c\u9ed8\u8ba4\u53d6Label\u503c",visible:function(){return!this.isImage}}},start:function(){if(this.isImage&&"zh"!=n.language){var e=this.images[n.languageIndex-1];e?this.node.getComponent(cc.Sprite).spriteFrame=e:this.images[0]&&(this.node.getComponent(cc.Sprite).spriteFrame=this.images[0])}else if(!this.isImage){this.labelName||(this.labelName=this.node.getComponent(cc.Label).string);var t=n.languageData[this.labelName];if(!t)return void console.log("Localization\u672a\u627e\u5230'"+this.labelName+"'\u6587\u672c\u7684\u7ffb\u8bd1\uff0c\u8bf7\u68c0\u67e5");t[n.languageIndex]?this.node.getComponent(cc.Label).string=t[n.languageIndex]:t[1]&&(this.node.getComponent(cc.Label).string=t[1])}}}),cc._RF.pop()},{LanguageModule:"LanguageModule"}],LanguageModule:[function(e,t){"use strict";cc._RF.push(t,"f38f5Y6IPVGq460gS7+ZwYZ","LanguageModule");var n=e("StorageModule");t.exports={language:"en",languageIndex:-1,languageName:"",languageMode:0,languageData:null,languageKeys:["zh","en","zh-f","es","ar","pt","ru","fr","de","ja","ko","tr","th","in"],languageDesc:["\u7b80\u4f53\u4e2d\u6587","English","\u7e41\u9ad4\u4e2d\u6587","Espa\xf1ol","\u0628\u0627\u0644\u0639\u0631\u0628\u064a\u0629","Portugu\xeas","\u0420\u0443\u0441\u0441\u043a\u0438\u0439","Fran\xe7ais","Deutsch","\u65e5\u672c\u8a9e","\ud55c\uad6d\uc5b4","T\xfcrk dili","\u0e20\u0e32\u0e29\u0e32\u0e44\u0e17\u0e22","Indonesia"],setLanguage:function(e){0==this.languageMode&&(e="zh"),2==this.languageMode&&n.setData("language",e),this.language=e,this.languageIndex=this.getLanguageIndex(),this.languageName=this.languageDesc[this.languageIndex],console.log("language="+this.language+",languageIndex="+this.languageIndex+",languageName="+this.languageName)},getLanguageIndex:function(e){void 0===e&&(e=this.language);for(var t=-1,n=0;n<this.languageKeys.length;n++)if(e==this.languageKeys[n]){t=n;break}return t},getLanguageByIndex:function(e){return void 0===e&&(e=0),this.languageKeys[e]},getLanguageNameByIndex:function(e){return void 0===e&&(e=0),this.languageDesc[e]},translateString:function(e){if(-1==this.languageIndex)return e;var t;try{t="zh"!=this.language&&"en"!=this.language?this.languageData[e][this.languageIndex]?this.languageData[e][this.languageIndex]:this.languageData[e][this.getLanguageIndex("en")]:this.languageData[e][this.languageIndex]}catch(n){console.log("key\u503c\u6709\u95ee\u9898"+n.toString()),console.log("label="+e),t=e}return t}},cc._RF.pop()},{StorageModule:"StorageModule"}],LoadResModule:[function(e,t){"use strict";cc._RF.push(t,"481845S8rZJ9rqhbq352FAP","LoadResModule"),t.exports={loadLocalRes:function(e,t,n){void 0===n&&(n=null),n?cc.resources.load(e,n,function(e,n){null==e&&null!=n?t&&t(n):console.log("melesdk loadResModule:loadLocalRes\u8d44\u6e90\u52a0\u8f7d\u9519\u8bef:"+e)}):cc.resources.load(e,function(e,n){null==e&&null!=n?t&&t(n):console.log("melesdk loadResModule:loadLocalRes\u8d44\u6e90\u52a0\u8f7d\u9519\u8bef:"+e)})},loadLocalResArray:function(e,t,n){void 0===n&&(n=null);for(var i=new Array,a=0,o=function(o){n?cc.resources.load(e[o],n,function(n,s){i[o]=s,null==n&&null!=i[o]?++a>=e.length&&t&&t(i):console.log("melesdk loadResModule:loadLocalResArray\u8d44\u6e90\u52a0\u8f7d\u9519\u8bef:"+n)}):cc.resources.load(e[o],function(n,s){i[o]=s,null==n&&null!=i[o]?++a>=e.length&&t&&t(i):console.log("melesdk loadResModule:loadLocalResArray\u8d44\u6e90\u52a0\u8f7d\u9519\u8bef:"+n)})},s=0;s<e.length;s++)o(s)},loadRes:function(e,t){cc.assetManager.loadRemote(e,function(e,n){null==e&&null!=n?t&&t(n):console.log("melesdk loadResModule\uff1aloadRes\u8d44\u6e90\u52a0\u8f7d\u9519\u8bef:"+e)})},loadResArray:function(e,t){for(var n=new Array,i=0,a=function(a){cc.assetManager.loadRemote(e[a],function(o,s){n[a]=s,null==o&&null!=n[a]?++i>=e.length&&t&&t(n):console.log("melesdk loadResModule\uff1aloadResArray\u8d44\u6e90\u52a0\u8f7d\u9519\u8bef:"+o)})},o=0;o<e.length;o++)a(o)},xhrLoad:function(e,t){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4==n.readyState&&n.status>=200&&n.status<400){var i=e.indexOf(".json")?JSON.parse(n.responseText):n.responseText;t&&t(i),n.abort()}else 4==n.readyState&&console.log("melesdk loadResModule\uff1axhrLoad \u8d44\u6e90\u52a0\u8f7d\u9519\u8bef")},n.onerror=function(e){return console.log("loadResModule\uff1axhrLoad onerror:"+JSON.stringify(e))},n.open("GET",e,!0),n.send()},loadBundle:function(e,t,n,i){if(void 0===t&&(t=null),void 0===n&&(n=null),void 0===i&&(i=!1),!this.checkBundleIsLoad(e)){var a=this;if(n)cc.assetManager.loadBundle(e,n,function(o,s){if(null!=o||null==s)return console.log("melesdk loadResModule\uff1aloadBundle err:"+o),void setTimeout(function(){a.loadBundle(e,t,n,i)},5);t&&t(s)});else if(i&&cc.sys.platform!==cc.sys.DESKTOP_BROWSER){var o=serverPath+"remote/"+e;cc.assetManager.loadBundle(o,function(s,c){if(null!=s||null==c)return console.log("melesdk loadResModule\uff1aloadBundle err:"+s),void setTimeout(function(){a.loadBundle(o,t,n,i)},5);console.log(e+"\u670d\u52a1\u5668\u52a0\u8f7d\u6210\u529f-----"),t&&t(c)})}else cc.assetManager.loadBundle(e,function(o,s){if(null!=o||null==s)return console.log("melesdk loadResModule\uff1aloadBundle err:"+o),void setTimeout(function(){a.loadBundle(e,t,n,i)},5);console.log(e+"\u672c\u5730\u52a0\u8f7d\u6210\u529f-----"),t&&t(s)})}},checkBundleIsLoad:function(e){if(e){var t=e.split("/");return!!cc.assetManager.getBundle(t[t.length-1])}console.log("melesdk loadResModule\uff1a\u8bf7\u4f20\u5165bundle\u540d\u5b57")},getBundleRes:function(e,t,n,i,a){if(void 0===i&&(i=null),void 0===a&&(a=null),"string"==typeof e&&(e=cc.assetManager.getBundle(e)),e)if(i==cc.SceneAsset)e.loadScene(t,function(e,t){null==e&&null!=t?n(t):console.log("melesdk loadResModule\uff1agetBundle err:"+e)});else if(i==cc.Director){if(!a)return void console.log("melesdk loadResModule\uff1a\u8bf7\u4f20\u5165\u76ee\u5f55\u5185\u8d44\u6e90\u6240\u5bf9\u5e94\u7684\u7c7b\u578b");e.loadDir(t,a,function(e,t){null==e&&null!=t?n(t):console.log("melesdk loadResModule\uff1agetBundle err:"+e)})}else e.load(t,i,function(e,t){null==e&&null!=t?n(t):console.log("melesdk loadResModule\uff1agetBundle err:"+e)});else console.log("melesdk loadResModule\uff1agetBundleRes:\u5f53\u524d\u8d44\u6e90\u6240\u5728"+e+"bundle\u672a\u52a0\u8f7d\uff0c\u8bf7\u5148\u52a0\u8f7d")},removeBundle:function(e){"string"==typeof e&&(e=cc.assetManager.getBundle(e)),e?(e.releaseAll(),cc.assetManager.removeBundle(e)):console.log("melesdk loadResModule\uff1a\u672a\u627e\u5230\u91ca\u653e\u7684bundle\u8d44\u6e90")}},cc._RF.pop()},{}],LoadingCtrl:[function(e,t){"use strict";cc._RF.push(t,"e2ceakyYUNBhqPKMflgGeRj","LoadingCtrl");var n=e("GameControl");cc.Class({extends:cc.Component,properties:{loadingPanel:cc.Node,anim:cc.Animation},onLoad:function(){cc.game.addPersistRootNode(this.node),n.loadingCtrl=this},start:function(){}}),cc._RF.pop()},{GameControl:"GameControl"}],Loading:[function(e,t){"use strict";cc._RF.push(t,"199c0IdshpGKIDv9oxD5rfU","Loading");var n=e("GameCommon"),i=e("LoadResModule"),a=e("GameControl"),o=e("AudioModule"),s=e("LanguageModule");cc.Class({extends:cc.Component,properties:{},onLoad:function(){n.preHandle(),sceneIndex=a.SceneName.loading,a.isTest&&(isHasAd=!1,n.isSupportPurchase=!1)},start:function(){this.loadRes(),this.pushHandle(),this.schedule(this.loadSceneHandle,.5)},loadRes:function(){if(s.languageData||i.loadLocalRes("Localization",function(e){s.languageData=e.json}),a.itemMsg||i.loadLocalRes("catMsg",function(e){a.itemMsg=e.json.parts,a.defaultDressUp=e.json.catDressUp}),!a.petalMsg){var e="message";n.isSupportPurchase&&(e="message-purchase"),i.loadLocalRes(e,function(e){a.petalMsg=e.json.petalMsg,a.evaluateId=e.json.evaluate.id,a.evaluateReward=e.json.evaluate.reward,a.purchaseData=e.json.purchaseData,a.signReward=e.json.signReward})}null==a.toyMsg&&i.loadLocalRes("toyMsg",function(e){a.toyMsg=e.json;var t=0,n={};for(var i in a.toyMsg)for(var o=a.toyMsg[i],s=0;s<o.length;s++)n[o[s].name]||(t++,n[o[s].name]=1);a.toyNum=t}),a.loadConfigFile()},pushHandle:function(){if(n.isSupportPush&&null==a.pushCtl){var t=e("PushControl");a.pushCtl=new t,"ios"==channel?a.pushCtl.Init("outsea",n.appId,0):"apk"==channel&&a.pushCtl.Init("outsea",n.packageName,0)}},loadSceneHandle:function(){a.itemMsg&&s.languageData&&o.isAudioBundleLoad&&a.petalMsg&&a.toyMsg&&(this.unschedule(this.loadSceneHandle),a.loadingCtrl.node.zIndex=1,cc.director.loadScene("home"))}}),cc._RF.pop()},{AudioModule:"AudioModule",GameCommon:"GameCommon",GameControl:"GameControl",LanguageModule:"LanguageModule",LoadResModule:"LoadResModule",PushControl:"PushControl"}],LogCommon:[function(e,t){"use strict";cc._RF.push(t,"e397ae1Cq9Gf7I3pfJfVz7H","LogCommon"),t.exports={log:function(e){console.log(e)},warn:function(e){console.warn(e)},error:function(e){console.error(e)},debug:function(){}},cc._RF.pop()},{}],Lounge:[function(e,t){"use strict";cc._RF.push(t,"a5beeZXjyJGkI/N2ZMG4RrL","Lounge");var n=e("ToyBase"),i=e("EngineCommon");cc.Class({extends:n,properties:{},start:function(){this.init()},toyHandle:function(){this.dex=this.node.name[this.node.name.length-1],this.node.parent.emit("occupy",this.dex)},catHandle:function(){var e=this.holder.children[0].getComponent("Cat");0==this.animationIndex?i.spineAnimationPlay(e.skeleton,"play-tangyi-sleep"):i.spineAnimationPlay(e.skeleton,"play-tangyi-eat"+this.animationIndex)},interactionEnd:function(){this._super(),this.node.parent.emit("free",this.dex)}}),cc._RF.pop()},{EngineCommon:"EngineCommon",ToyBase:"ToyBase"}],MagicBook:[function(e,t){"use strict";cc._RF.push(t,"fd25dBXwBREorNI5jCdZJNy","MagicBook");var n=e("ToyBase"),i=e("MathModule"),a=e("EngineCommon"),o=e("AudioModule");cc.Class({extends:n,properties:{},start:function(){this.animationName=["Idle","play1","play2","play3"],this.init()},toyHandle:function(){this.animationIndex=i.rangeRandom(1,4),this.playAnimationByState(this.animationIndex),o.playEffect("magicBook")},catHandle:function(){var e=this.holder.children[0].getComponent("Cat");a.spineAnimationPlay(e.skeleton,"play-yuepu-"+this.animationIndex)}}),cc._RF.pop()},{AudioModule:"AudioModule",EngineCommon:"EngineCommon",MathModule:"MathModule",ToyBase:"ToyBase"}],MagicEgg:[function(e,t){"use strict";cc._RF.push(t,"46a5eu2kKFBaI38fOqepg/g","MagicEgg");var n=e("ToyBase"),i=e("MathModule"),a=e("EngineCommon");cc.Class({extends:n,properties:{},start:function(){this.animationIndex=0,this.animationName=["Idle","play-hua","play-shuimu","play-youling"],this.init()},toyHandle:function(){this.animationIndex=i.rangeRandom(1,4),this.playAnimationByState(this.animationIndex)},catHandle:function(){var e=this.holder.children[0].getComponent("Cat");a.spineAnimationPlay(e.skeleton,["","play-xiaotan-hua","play-xiaotan-shuimu","play-xiaotan-youling"][this.animationIndex])}}),cc._RF.pop()},{EngineCommon:"EngineCommon",MathModule:"MathModule",ToyBase:"ToyBase"}],MagicMirror:[function(e,t){"use strict";cc._RF.push(t,"6dcfeDcPBpMApdjs6FUO3XK","MagicMirror");var n=e("ToyBase"),i=e("MathModule"),a=e("EngineCommon");cc.Class({extends:n,properties:{},start:function(){this.animationName=["normal","angel","demon","Poor god"],this.init()},toyHandle:function(){this.animationIndex=i.rangeRandom(1,4),this.playAnimationByState(this.animationIndex)},catHandle:function(){var e=this.holder.children[0].getComponent("Cat");a.spineAnimationPlay(e.skeleton,["","play-jingzi-angel","play-jingzi-demon","play-jingzi-poorgod"][this.animationIndex])}}),cc._RF.pop()},{EngineCommon:"EngineCommon",MathModule:"MathModule",ToyBase:"ToyBase"}],MagicVine:[function(e,t){"use strict";cc._RF.push(t,"50cbeh+VpZNebMeO/eNS5gd","MagicVine");var n=e("ToyBase"),i=e("MathModule"),a=e("EngineCommon");cc.Class({extends:n,properties:{},start:function(){this.animationName=["Idle","play1","play2","play3"],this.init()},toyHandle:function(){this.animationIndex=i.rangeRandom(1,4),this.playAnimationByState(this.animationIndex)},catHandle:function(){var e=this.holder.children[0].getComponent("Cat");a.spineAnimationPlay(e.skeleton,"play-penzai"+this.animationIndex)}}),cc._RF.pop()},{EngineCommon:"EngineCommon",MathModule:"MathModule",ToyBase:"ToyBase"}],Main:[function(e,t){"use strict";cc._RF.push(t,"093e0VPui9Io5w1ZBYjKh4d","Main");var n=e("MathModule"),i=e("GameControl"),a=e("AudioModule"),o=e("GameCommon"),s=e("StorageModule"),c=e("AdInfo"),r=e("LoadResModule"),l=e("StatisticsModule");cc.Class({extends:cc.Component,properties:{bg:cc.Node},onLoad:function(){i.curScene=this,o.handleEventPerScene(),this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchBegan,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this)},onDestroy:function(){i.curScene=null},start:function(){var e=this;i.tutorialStep=s.getData("tutorialStep",-1),i.tutorialStep==i.TutorialType.switchLastScene&&(i.tutorialStep=i.TutorialType.finish,s.setData("tutorialStep",i.tutorialStep));for(var t=this.bg.children,n=3;n<t.length;n++)i.isForbid()?t[n].children[0].active=!0:t[n].children[0].active=!1;this.sizeFit(),this.adHandle(),this.loadRes(),i.hideLoadingPanel(function(){e.bgMove()})},sizeFit:function(){cc.find("Canvas/block").active=!0,this.minX=-this.bg.width/2+cc.winSize.width/2,this.maxX=this.bg.width/2-cc.winSize.width/2,this.bg.x=this.minX,cc.winSize.width/cc.winSize.height>2.1&&(cc.find("Canvas/leftHolder").getComponent(cc.Widget).left=180)},adHandle:function(){isHasAd&&(bannerShowFlag[sceneIndex]?c.adsManager.showBanner():c.adsManager.hideBanner(),c.adsManager.hideCustomAd(),c.adsManager.showCustomAd(0),c.adsManager.showCustomAd(1))},loadRes:function(){r.checkBundleIsLoad(i.toyBundle)||r.loadBundle(i.toyBundle,function(){console.log("loadbundle "+i.toyBundle+" suc")},null,isOnline),i.skeletonData||r.getBundleRes(i.catBundle,"maomi",function(e){console.log("\u732b\u54aa\u9aa8\u9abc\u52a0\u8f7d\u6210\u529f"),i.skeletonData=e},sp.SkeletonData),i.petalSkeletonData||r.getBundleRes(i.gameBundle,"huabao",function(e){console.log("\u82b1\u82de\u9aa8\u9abc\u52a0\u8f7d\u6210\u529f"),i.petalSkeletonData=e},sp.SkeletonData),i.clearFrame||r.loadLocalRes("clearFrame",function(e){i.clearFrame=e},cc.SpriteFrame)},bgMove:function(){var e=this;cc.tween(this.bg).to(1,{x:this.maxX}).call(function(){cc.find("Canvas/block").active=!1,-1==i.tutorialStep&&i.remindPanelCtrl.showTutorialHandle(e.bg.children[2])}).start()},onTouchBegan:function(e){this._moveFlag=!1,this.startPos=e.touch.getLocation(),this.lastPos=e.touch.getLocation()},onTouchMove:function(e){var t=e.touch.getLocation();if(this.lastPos||(this.lastPos=t),this.startPos||(this.startPos=t),0==this._moveFlag&&Math.abs(t.x-this.startPos.x)>5&&Math.abs(t.y-this.startPos.y)>5&&(this._moveFlag=!0),-1!=i.tutorialStep){var a=t.x-this.lastPos.x,o=n.clamp(this.minX,this.bg.x+a,this.maxX);this.bg.x=o,this.lastPos=t}},onTouchEnd:function(e){var t=e.touch.getLocation();if(0==this._moveFlag){var n=this.judgeArea(t);if(0!=n&&i.isForbid())return;this.clickAreaHandle(n)}this._moveFlag=!1},judgeArea:function(e){e=this.bg.convertToNodeSpaceAR(e);for(var t=-1,n=2;n<this.bg.childrenCount;n++)if(Math.abs(e.x-this.bg.children[n].x)<this.bg.children[n].width/2&&Math.abs(e.y-this.bg.children[n].y)<this.bg.children[n].height/2){t=n-2;break}return t},clickAreaHandle:function(e){-1!=e&&(a.playEffect("click"),i.roomType=e,i.showLoadingPanel(),-1==i.tutorialStep&&(i.tutorialStep=i.TutorialType.buyPetal,s.setData("tutorialStep",i.tutorialStep),i.remindPanelCtrl.hideTutorialNode()),l.eventStatistics("room"+e),this.schedule(this.loadScene,.5))},loadScene:function(){r.checkBundleIsLoad(i.toyBundle)&&i.skeletonData&&i.petalSkeletonData&&i.clearFrame&&(this.unschedule(this.loadScene),cc.director.loadScene("game"))},btnBack:function(){a.playEffect("click"),i.showLoadingPanel(function(){cc.director.loadScene("home")})},btnSet:function(){a.playEffect("click"),i.remindPanelCtrl.showSetPanel()}}),cc._RF.pop()},{AdInfo:"AdInfo",AudioModule:"AudioModule",GameCommon:"GameCommon",GameControl:"GameControl",LoadResModule:"LoadResModule",MathModule:"MathModule",StatisticsModule:"StatisticsModule",StorageModule:"StorageModule"}],Massage:[function(e,t){"use strict";cc._RF.push(t,"e5446Bk1m9GfL8U62Hk+K1j","Massage");var n=e("ToyBase"),i=e("EngineCommon");cc.Class({extends:n,properties:{},start:function(){this.animationName=[null,"play"],this.init()},toyHandle:function(){this.playAnimationByState(1),this.dex=this.node.name[this.node.name.length-1],this.node.parent.emit("occupy",this.dex)},catHandle:function(){var e=this.holder.children[0].getComponent("Cat"),t=Math.random()<.5?0:1;i.spineAnimationPlay(e.skeleton,["play-anmo1","play-anmo2"][t])},interactionEnd:function(){this._super(),console.log("\u5b50\u7c7b"),this.node.parent.emit("free",this.dex)}}),cc._RF.pop()},{EngineCommon:"EngineCommon",ToyBase:"ToyBase"}],MathModule:[function(e,t){"use strict";cc._RF.push(t,"b781ew7SUZPH5KH+aTnKIVZ","MathModule"),t.exports={rangeRandom:function(e,t){if(e=Math.floor(e),(t=Math.floor(t))<e){var n=e;e=t,t=n}if(e==t)return e;var i=t-e;return Math.floor(Math.random()*i)+e},getRandomResult:function(e,t){for(var n=[],i=0;i<e.length;i++)for(var a=0;a<e[i];a++)t?n.push(t[i]):n.push(i);return n[this.rangeRandom(0,n.length)]},getRandomArr:function(e,t){for(var n=[],i=0;i<t;i++){var a=this.rangeRandom(0,e.length);n.push(e[a]),e.splice(a,1)}return n},clamp01:function(e){return e<0?0:e<1?e:1},clamp:function(e,t,n){return t<e?t=e:t>n&&(t=n),t},getAngle:function(e,t){var n=t.x-e.x,i=t.y-e.y;return-cc.v2(n,i).signAngle(cc.v2(1,0))/Math.PI*180}},cc._RF.pop()},{}],MiniGamePanel:[function(e,t){"use strict";cc._RF.push(t,"cdd07VyNYNDVrynU+Nvh6te","MiniGamePanel");var n=e("PanelBase"),i=e("EngineCommon"),a=e("GameControl"),o=e("AudioModule"),s=e("GameCommon"),c=e("StatisticsModule");cc.Class({extends:n,properties:{},start:function(){this.sizeFit(),this.initPanel()},sizeFit:function(){if(cc.winSize.width/cc.winSize.height<1.8){var e=cc.winSize.width/this.node.getChildByName("bottom").width;this.node.scale=e,this.node.getChildByName("splash").scale=1/e}else isHasAd&&("apk"==channel&&"google"==subChannel||"ios"==channel)&&(this.node.scale=.95,this.node.getChildByName("splash").scale=1/.95,this.node.y+=50,this.node.getChildByName("splash").y-=50)},initPanel:function(){for(var e=cc.find("games",this.node).children,t=0;t<e.length;t++)if("btnStayTuned"!=e[t].name){var n=e[t].name.substr(3).toLocaleLowerCase();i.addClickEvent(e[t],this.node,"MiniGamePanel","btnGame",n),0==t&&a.curScene.tutorialStartHandle(a.TutorialType.miniGame,e[t])}},btnGame:function(e,t){a.SceneName[t]==a.SceneName.jump&&a.isForbid([a.TutorialType.miniGame])||a.SceneName[t]!=a.SceneName.jump&&a.isForbid()||s.isCanClick()&&(o.playEffect("click"),c.eventStatistics("miniGame_"+t),a.SceneName[t]==a.SceneName.jump||a.SceneName[t]==a.SceneName.parkour||a.SceneName[t]==a.SceneName.fishing?(a.curScene.sceneName=t,i.loadPanel(a.gameBundle,"chooseCatPanel",a.curScene.topPanel),this.node.active=!1,a.curScene.tutorialEndHandle(a.TutorialType.miniGame,1)):a.curScene.loadScene(a.SceneName[t]))},btnClose:function(e){e&&a.isForbid()||(o.playEffect("click"),this.node.active=!1)}}),cc._RF.pop()},{AudioModule:"AudioModule",EngineCommon:"EngineCommon",GameCommon:"GameCommon",GameControl:"GameControl",PanelBase:"PanelBase",StatisticsModule:"StatisticsModule"}],MiniGameRemindPanel:[function(e,t){"use strict";cc._RF.push(t,"f8006mi+k9EGLLwFvQTVGhm","MiniGameRemindPanel");var n=e("GameControl"),i=e("EngineCommon"),a=e("GameCommon"),o=e("AudioModule"),s=e("AdInfo"),c=e("LanguageModule"),r=e("PanelBase");cc.Class({extends:r,properties:{anim:cc.Animation,revivePanel:cc.Node,endPanel:cc.Node,pausePanel:cc.Node},onLoad:function(){this.scaleTween=cc.tween().repeatForever(cc.tween().to(.5,{scale:1.2}).to(.5,{scale:1}))},start:function(){this.sizeFit()},sizeFit:function(){isHasAd&&("apk"==channel&&"google"==subChannel||"ios"==channel?(this.revivePanel.scale=.94,this.endPanel.scale=.94,this.pausePanel.scale=.94,this.revivePanel.getChildByName("splash").scale=1/.94,this.endPanel.getChildByName("splash").scale=1/.94,this.pausePanel.getChildByName("splash").scale=1/.94,this.revivePanel.y+=40,this.endPanel.y+=40,this.pausePanel.y+=40,this.revivePanel.getChildByName("splash").y-=40,this.endPanel.getChildByName("splash").y-=40,this.pausePanel.getChildByName("splash").y-=40):(this.revivePanel.scale=.95,this.endPanel.scale=.95,this.pausePanel.scale=.95,this.revivePanel.getChildByName("splash").scale=1/.95,this.endPanel.getChildByName("splash").scale=1/.95,this.pausePanel.getChildByName("splash").scale=1/.95))},initPanel:function(e){this.updateMusicBtn(),this.updateAudioBtn(),this.node.getChildByName("holder").scale=0;var t=cc.find("left",this.revivePanel).getComponent(sp.Skeleton);t.skeletonData=e,(t=cc.find("right",this.revivePanel).getComponent(sp.Skeleton)).skeletonData=e,(t=cc.find("player",this.endPanel).getComponent(sp.Skeleton)).skeletonData=e},showPanel:function(e){if(this.node.active||(console.log("\u64ad\u653e\u52a8\u753b"),this.node.active=!0,this.anim.play("show")),console.log("showPanel name="+e),"success"==e||"fail"==e){this.endPanel.active=!0,this.pausePanel.active=!1,this.revivePanel.active=!1;var t=this.endPanel.getChildByName("sucHolder"),a=this.endPanel.getChildByName("failHolder");"success"==e?(t.active=!0,a.active=!1,isHasAd?this.scaleTween.clone(t.getChildByName("videoBtn")).start():(t.getChildByName("videoBtn").active=!1,t.getChildByName("backBtn").x=0),o.playEffect("success"),n.unlockGift()):(t.active=!1,a.active=!0);var s=cc.find("player",this.endPanel).getComponent(sp.Skeleton);s.setSkin(n.curCatName),"success"==e?s.setAnimation(0,"dance",!0):s.setAnimation(0,"sad",!0);var c=cc.find("coin/num",this.endPanel).getComponent(cc.Label),r=cc.find("score/num",this.endPanel).getComponent(cc.Label),l=cc.find("highScore/num",this.endPanel).getComponent(cc.Label);sceneIndex==n.SceneName.search?(l.node.parent.active=!1,r.node.parent.y=-80,c.node.parent.y=-180):(l.node.parent.active=!0,r.node.parent.y=-60,c.node.parent.y=-205),n.curScene.updatePanel&&n.curScene.updatePanel(c,r,l,e)}else if("pause"==e)console.log("\u663e\u793a\u6682\u505c\u9875\u9762"),this.endPanel.active=!1,this.pausePanel.active=!0,this.revivePanel.active=!1;else if("revive"==e){this.endPanel.active=!1,this.pausePanel.active=!1,this.revivePanel.active=!0;var d=cc.find("left",this.revivePanel).getComponent(sp.Skeleton);d.setSkin(n.curCatName);var h=cc.find("right",this.revivePanel).getComponent(sp.Skeleton);h.setSkin(n.curCatName),sceneIndex==n.SceneName.jump?(i.spineAnimationPlay(d,"sad-loop",!0),i.spineAnimationPlay(h,["happy","jiangluosan"],!0)):sceneIndex==n.SceneName.parkour?(i.spineAnimationPlay(d,"sad-loop",!0),i.spineAnimationPlay(h,["happy","paoku-Idle"],!0)):(i.spineAnimationPlay(d,"sad-loop",!0),i.spineAnimationPlay(h,"happy",!0))}},hidePanel:function(){this.node.active=!1},updateMusicBtn:function(){var e=cc.find("music",this.pausePanel);o.musicOn?(e.children[0].getChildByName("selected").active=!0,e.children[1].getChildByName("selected").active=!1):(e.children[0].getChildByName("selected").active=!1,e.children[1].getChildByName("selected").active=!0)},updateAudioBtn:function(){var e=cc.find("audio",this.pausePanel);o.audioOn?(e.children[0].getChildByName("selected").active=!0,e.children[1].getChildByName("selected").active=!1):(e.children[0].getChildByName("selected").active=!1,e.children[1].getChildByName("selected").active=!0)},btnMusic:function(){o.playEffect("click"),o.setMusicFlag(!o.musicOn),o.musicOn?o.playMusic():o.stopMusic(),this.updateMusicBtn()},btnAudio:function(){o.playEffect("click"),o.setAudioFlag(!o.audioOn),this.updateAudioBtn()},btnRevive:function(){var e=this;if(a.isCanClick()){o.playEffect("click");var t=n.SceneName[sceneIndex];s.adsManager.showVideo(t+"Revive",function(t){t&&(e.hidePanel(),n.curScene.reviveHandle())})}},btnCloseRevive:function(){o.playEffect("click"),this.showPanel("fail")},btnReplay:function(){o.playEffect("click");var e=n.SceneName[sceneIndex];n.showLoadingPanel(function(){cc.director.loadScene(e)})},btnBack:function(){o.playEffect("click"),n.showLoadingPanel(function(){cc.director.loadScene("game")})},btnContinue:function(){o.playEffect("click"),this.hidePanel(),n.curScene.continueHandle&&n.curScene.continueHandle()},btnAddCoin:function(e){if(a.isCanClick()){o.playEffect("click");var t=n.SceneName[sceneIndex];s.adsManager.showVideo(t+"Coin50",function(t){if(t){var i="\u606d\u559c\u83b7\u5f97&1\u4e2a\u94c3\u94db";i=(i=c.translateString(i)).replace("&1",50),n.remindPanelCtrl.showSimpleRemind(i,!1),n.remindPanelCtrl.coinMoveFunc(n.curScene.bellLabel.node,function(){n.updateBellNum(n.curScene.bellLabel,50)},e.target),n.showLoadingPanel(function(){cc.director.loadScene("game")},1e3,1500)}})}}}),cc._RF.pop()},{AdInfo:"AdInfo",AudioModule:"AudioModule",EngineCommon:"EngineCommon",GameCommon:"GameCommon",GameControl:"GameControl",LanguageModule:"LanguageModule",PanelBase:"PanelBase"}],MoveItem:[function(e,t){"use strict";cc._RF.push(t,"7b201R1hixKDbIOPo6lJY4L","MoveItem");var n=e("GameControl");cc.Class({extends:cc.Component,properties:{type:0},onLoad:function(){},start:function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this),this.startPos=this.node.position,this.init(),this.lastPosition=cc.v2(0,0),this.isForbidTouch=!1},init:function(){var e=this;1==this.type?(this.curStep=0,this.areaNode=this.node.parent.getChildByName("area"),this.endPoints=this.node.parent.getChildByName("endPoint").children,this.feedAnimationName=["feed1","feed2","feed3"],this.animation=this.node.getComponent(cc.Animation),this.animation.on(cc.Animation.EventType.FINISHED,function(){e.curStep++,e.curStep<3?(e.node.children[0].position=cc.v2(0,0),e.node.position=e.startPos,n.curScene.demandCtrl.playAnimation(0),n.curScene.demandCtrl.showTutorial(e.node,e.areaNode)):e.node.children[0].getComponent(cc.Sprite).spriteFrame=null,n.curScene.demandCtrl.setProgress(e.curStep/3),e.isForbidTouch=!1},this.node)):2==this.type?(this.curStep=0,this.leafDrop=this.node.parent.getChildByName("leafDrop"),this.leaf=this.node.parent.getChildByName("leaf").children,this.stain=this.node.parent.getChildByName("stain"),this.detectionArea=this.node.getChildByName("detectionArea"),this.areaNode=this.node.parent.getChildByName("area")):3==this.type&&(this.curStep=0,this.playState=0,this.animation=this.node.getComponent(cc.Animation),this.bubbleNode=this.node.parent.getChildByName("bubbles"),this.bubbles=this.bubbleNode.children,this.water=this.node.parent.getChildByName("water"),this.areaNode=this.node.parent.getChildByName("area"),this.animation.on(cc.Animation.EventType.PLAY,function(t,n){"rag1"==n._name&&(e.playState=1)},this.node),this.animation.on(cc.Animation.EventType.PAUSE,function(t,n){"rag1"==n._name&&(e.playState=2)},this.node),this.animation.on(cc.Animation.EventType.RESUME,function(t,n){"rag1"==n._name&&(e.playState=1)},this.node)),n.curScene.demandCtrl.showTutorial(this.node,this.areaNode)},onTouchStart:function(e){3==this.type&&2==this.curStep&&(this.curStep=3,this.isForbidTouch=!1),this.isForbidTouch||n.curScene.demandCtrl.isFinish||(this.lastPosition=e.touch.getLocation(),(2==this.type||this.curStep>2||3==this.type)&&n.curScene.demandCtrl.checkTouchMove(),n.curScene.demandCtrl.hideTutorial())},onTouchMove:function(e){if(!this.isForbidTouch&&!n.curScene.demandCtrl.isFinish){var t=e.touch.getLocation();this.lastPosition||(this.lastPosition=t);var i=t.x-this.lastPosition.x,a=t.y-this.lastPosition.y,o=this.node.x+i,s=this.node.y+a;if(this.node.position=cc.v2(o,s),2==this.type&&this.curStep<=2){var c=this.isCoincide();if(c>=0){this.curStep++,3==this.curStep&&n.curScene.demandCtrl.checkTouchMove();var r=this.leaf[c];r.parent=this.leafDrop,cc.tween(r).by(1,{y:-200,opacity:200}).call(function(){r.destroy()}).start(),n.curScene.demandCtrl.playAnimation(0),n.curScene.demandCtrl.setProgress(this.curStep/6)}}else if(2==this.type||3==this.type&&4==this.curStep)this.isInArea(this.node,this.areaNode)?n.curScene.demandCtrl.isMove=!0:n.curScene.demandCtrl.isMove=!1;else if(3==this.type&&0==this.curStep){this.isInArea(this.node,this.areaNode)?n.curScene.demandCtrl.isMove=!0:n.curScene.demandCtrl.isMove=!1;var l=this.isInAreas(this.node,this.bubbles);l>=0&&!this.bubbles[l].active&&(this.bubbles[l].active=!0,this.water.active||(n.curScene.demandCtrl.playAnimation(0),this.water.active=!0))}else if(3==this.type&&3==this.curStep){this.curStep=4;for(var d=0;d<this.bubbles.length;d++)this.bubbles[d].getComponent(cc.ParticleSystem).duration=4}this.lastPosition=t}},onTouchEnd:function(){var e=this;if(!this.isForbidTouch&&!n.curScene.demandCtrl.isFinish){if(n.curScene.demandCtrl.isMove=!1,this.isForbidTouch=!0,1==this.type&&this.isInArea(this.node,this.areaNode)){this.node.position=this.endPoints[this.curStep].position;var t=this.feedAnimationName[this.curStep];return this.animation.play(t),void n.curScene.demandCtrl.playAnimation(1)}var i=this.node.position.sub(this.startPos).mag()/1e3;i=Math.max(i,.1),cc.tween(this.node).to(i,{position:this.startPos}).call(function(){e.isForbidTouch=!1,3==n.curScene.demandCtrl.moveItemCtrl.type&&4==n.curScene.demandCtrl.moveItemCtrl.curStep&&1==n.curScene.demandCtrl.moveItemCtrl.playState&&n.curScene.demandCtrl.moveItemCtrl.animation.play("rag0")}).start()}},isInArea:function(e,t){var n=!1,i=e.parent.convertToWorldSpaceAR(e.position);return i=t.convertToNodeSpaceAR(i),Math.abs(i.x)<t.width/2&&Math.abs(i.y)<t.height/2&&(n=!0),n},isInAreas:function(e,t){for(var n=-1,i=0;i<t.length;i++){var a=t[i];if(Math.abs(a.x-this.node.x)<a.width/2&&Math.abs(a.y-this.node.y)<a.height/2){n=i;break}}return n},isCoincide:function(){for(var e=-1,t=0;t<this.leaf.length;t++){var n=this.detectionArea.x+this.node.x,i=this.detectionArea.y+this.node.y;Math.abs(n-this.leaf[t].x)<this.detectionArea.width/2+this.leaf[t].width/2&&Math.abs(i-this.leaf[t].y)<this.detectionArea.height/2+this.leaf[t].height/2&&(e=t)}return e},update:function(e){var t=this;if(!n.curScene.demandCtrl.isFinish&&n.curScene.demandCtrl.isMove)if(2==this.type&&this.curStep>2)n.curScene.demandCtrl.setProgress(e/8,1),this.stain.opacity=255-(n.curScene.demandCtrl.progressBar.progress-.5)/.5*255,n.curScene.demandCtrl.isFinish&&this.stain.destroy();else if(3==this.type)if(0==this.curStep){if(n.curScene.demandCtrl.progressBar.progress>=.5)return this.curStep=1,this.isForbidTouch=!0,void cc.tween(this.node).to(.1,{position:this.startPos}).call(function(){t.animation.play("rag0"),t.curStep=2,n.curScene.demandCtrl.showTutorial(t.node,t.areaNode)}).start();n.curScene.demandCtrl.setProgress(e/8,1)}else 4==this.curStep&&(0==this.playState?this.animation.play("rag1"):2==this.playState&&this.animation.resume("rag1"),n.curScene.demandCtrl.setProgress(e/8,1),this.water.opacity=255-(n.curScene.demandCtrl.progressBar.progress-.5)/.5*255,n.curScene.demandCtrl.isFinish&&this.water.destroy())}}),cc._RF.pop()},{GameControl:"GameControl"}],MyProgressBar:[function(e,t){"use strict";cc._RF.push(t,"2e8e85GEO5LLaUehOqscPi5","MyProgressBar");var n=e("MathModule"),i=cc.Enum({HORIZONTAL:0,VERTICAL:1,FILLED:2});cc.Class({extends:cc.ProgressBar,properties:{mask:cc.Node,indicators:cc.Node},_updateBarStatus:function(){if(this.mask){var e,t,a,o=this.mask;if(!o)return;var s=o.getAnchorPoint(),c=o.getContentSize(),r=o.getPosition(),l=cc.v2(0,.5),d=n.clamp01(this.progress),h=this.totalLength*d;switch(this.mode){case i.HORIZONTAL:this.reverse&&(l=cc.v2(1,.5)),e=cc.size(h,c.height),t=this.totalLength,a=c.height;break;case i.VERTICAL:l=this.reverse?cc.v2(.5,1):cc.v2(.5,0),e=cc.size(c.width,h),t=c.width,a=this.totalLength}var u=l.x-s.x,p=l.y-s.y,m=cc.v2(t*u,a*p);o.setPosition(r.x+m.x,r.y+m.y),o.setAnchorPoint(l),o.setContentSize(e),this.indicators&&(this.indicators.x=h-this.totalLength/2)}}}),cc._RF.pop()},{MathModule:"MathModule"}],MysteryShop:[function(e,t){"use strict";cc._RF.push(t,"026f5zjT/9E5YwEsvkbO73n","MysteryShop");var n=e("ToyBase"),i=e("MathModule"),a=e("EngineCommon");cc.Class({extends:n,properties:{},start:function(){this.animationName=["Idle","play1","play2","play3"],this.init()},toyHandle:function(){this.animationIndex=i.rangeRandom(1,4),this.playAnimationByState(this.animationIndex)},catHandle:function(){var e=this.holder.children[0].getComponent("Cat");1==this.animationIndex?a.spineAnimationPlay(e.skeleton,"play-shenmishangdian"):a.spineAnimationPlay(e.skeleton,"play-shenmishangdian"+this.animationIndex)}}),cc._RF.pop()},{EngineCommon:"EngineCommon",MathModule:"MathModule",ToyBase:"ToyBase"}],NativeControl:[function(e,t){"use strict";cc._RF.push(t,"7e658BtlORBX4ujq0zX+K91","NativeControl");var n=e("AdInfo");cc.Class({extends:cc.Component,properties:{nativeIconBtn:cc.Button,nativeIcon:cc.Sprite,nativeBanner:cc.Sprite,nativeBannerBtn:cc.Button,nativeInterNode:cc.Node,nativeInterBtn:cc.Button,title:cc.Label,desc:cc.Label,title1:cc.Label,desc1:cc.Label,nativeInterImage:cc.Sprite},onLoad:function(){"oppo"==channel||"vivo"==channel||"huawei"==channel?(cc.game.addPersistRootNode(this.node),n.nativeControl=this):this.node.destroy()},onDestroy:function(){n.nativeControl=null},start:function(){},showNativeIcon:function(e,t){n.nativeControl.nativeIconBtn.node.active=!1,t&&cc.loader.load(t,function(t,i){try{if(t)return void console.log(t);n.nativeControl.nativeIconBtn.node.active=!0,n.nativeControl.nativeIcon.spriteFrame=new cc.SpriteFrame(i);var a=new cc.Component.EventHandler;a.target=n.nativeControl.node,a.component="NativeControl",a.handler="btnNativeAdClick";var o=e+"&0";a.customEventData=o,n.nativeControl.nativeIconBtn.clickEvents=[],n.nativeControl.nativeIconBtn.clickEvents.push(a)}catch(s){}})},showNativeBanner:function(e,t,i,a){n.nativeControl.nativeBanner.spriteFrame=null,a&&cc.loader.load(a,function(e,t){try{if(e)return void console.log(e);n.nativeControl.nativeBanner.spriteFrame=new cc.SpriteFrame(t)}catch(i){}}),n.nativeControl.nativeBannerBtn.node.active=!0,n.nativeControl.title.string=t,n.nativeControl.desc.string=i;var o=new cc.Component.EventHandler;o.target=n.nativeControl.node,o.component="NativeControl",o.handler="btnNativeAdClick";var s=e+"&1";o.customEventData=s,n.nativeControl.nativeBannerBtn.clickEvents=[],n.nativeControl.nativeBannerBtn.clickEvents.push(o)},showNativeInter:function(e,t,i,a){a&&cc.loader.load(a,function(e,t){try{if(e)return void console.log(e);var i=n.nativeControl.nativeInterNode.width/t.width,a=n.nativeControl.nativeInterNode.height/t.height,o=i<a?i:a;n.nativeControl.nativeInterImage.node.scale=o,n.nativeControl.nativeInterImage.spriteFrame=new cc.SpriteFrame(t)}catch(s){}}),n.nativeControl.nativeInterNode.active=!0,n.nativeControl.title1.string=t,n.nativeControl.desc1.string=i;var o=new cc.Component.EventHandler;o.target=n.nativeControl.node,o.component="NativeControl",o.handler="btnNativeAdClick";var s=e+"&2";o.customEventData=s,n.nativeControl.nativeInterBtn.clickEvents=[],n.nativeControl.nativeInterBtn.clickEvents.push(o)},btnNativeAdClick:function(e,t){var i=t.split("&");n.adsManager.clickNativeAd(i[0],i[1])},btnNativeAdClose:function(e,t){n.adsManager.hideNativeAd(t),0==t&&n.nativeControl.nativeIconBtn?n.nativeControl.nativeIconBtn.node.active=!1:1==t&&n.nativeControl.nativeBannerBtn?n.nativeControl.nativeBannerBtn.node.active=!1:2==t&&n.nativeControl.nativeInterNode&&(n.nativeControl.nativeInterNode.active=!1)},disableNativeInterCloseBtn:function(){n.nativeControl.nativeInterNode.getChildByName("btnClose").getComponent(cc.Button).enabled=!1},enableNativeInterCloseBtn:function(){n.nativeControl.nativeInterNode.getChildByName("btnClose").getComponent(cc.Button).enabled=!0}}),cc._RF.pop()},{AdInfo:"AdInfo"}],NativePlatformCommon:[function(e,t){"use strict";cc._RF.push(t,"d0555duRzRLI7RmL1F9dQGy","NativePlatformCommon"),t.exports={className:"org/cocos2dx/javascript/AppActivity",adClassName:"org/cocos2dx/javascript/AppActivity",purchaseClassName:"org/cocos2dx/javascript/AppActivity",init:function(){"ios"==channel&&(this.className="AppController",this.purchaseClassName="AppController",this.adClassName="AppController")},closeSplash:function(){cc.sys.os===cc.sys.OS_ANDROID&&"apk"===channel&&jsb.reflection.callStaticMethod(this.className,"removeSplashImage","()V")},getConfigName:function(){if(cc.sys.os===cc.sys.OS_ANDROID&&"apk"===channel)return jsb.reflection.callStaticMethod(this.className,"GetConfigName","()Ljava/lang/String;")},setAdParams:function(e,t){cc.sys.os===cc.sys.OS_ANDROID&&"apk"===channel&&jsb.reflection.callStaticMethod(this.className,"SetAdParams","(II)V",e,t)},getLanguage:function(){var e;return console.log("00000000"+cc.sys.os),cc.sys.os===cc.sys.OS_ANDROID&&"apk"===channel?(console.log("11111111"),e=jsb.reflection.callStaticMethod(this.className,"GetLanguage","()Ljava/lang/String;")):cc.sys.os===cc.sys.OS_IOS&&"ios"===channel&&(console.log("222222"),e=jsb.reflection.callStaticMethod(this.className,"GetLanguage")),e},saveImageToPhoto:function(){cc.sys.os!==cc.sys.OS_ANDROID&&cc.sys.os!==cc.sys.OS_IOS||"apk"!==channel&&"ios"!==channel||(cc.sys.os===cc.sys.OS_ANDROID?1!=jsb.reflection.callStaticMethod(this.className,"CheckPermission","()I")&&(console.log("lqr:","\u6ca1\u6709\u6743\u9650"),jsb.reflection.callStaticMethod(this.className,"RequestPermission","()V")):cc.sys.os===cc.sys.OS_IOS&&jsb.reflection.callStaticMethod(this.className,"saveToAlbum"))},share:function(){cc.sys.os===cc.sys.OS_IOS&&"ios"===channel&&jsb.reflection.callStaticMethod(this.className,"Share:title:","\u5206\u4eab","message")},evaluate:function(e){cc.sys.os!==cc.sys.OS_ANDROID&&cc.sys.os!==cc.sys.OS_IOS||"apk"!==channel&&"ios"!==channel||(cc.sys.os===cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod(this.className,"EvaluateHandle","()Z")&&e&&e():cc.sys.os===cc.sys.OS_IOS&&(jsb.reflection.callStaticMethod(this.className,"GoToEvaluatePanel"),e&&e()))},eventStatistics:function(e,t){cc.sys.os!==cc.sys.OS_ANDROID&&cc.sys.os!==cc.sys.OS_IOS||"apk"!==channel&&"ios"!==channel||(cc.sys.os===cc.sys.OS_ANDROID?void 0!==t&&"undefined"!==t?jsb.reflection.callStaticMethod(this.className,"EventAnalytics","(Ljava/lang/String;Ljava/lang/String;)V",e,t):jsb.reflection.callStaticMethod(this.className,"EventAnalytics","(Ljava/lang/String;)V",e):cc.sys.os===cc.sys.OS_IOS&&(void 0!==t&&"undefined"!==t?jsb.reflection.callStaticMethod(this.className,"EventAnalytics:name:value",e,t):jsb.reflection.callStaticMethod(this.className,"EventAnalytics:name",e)))},buyHandle:function(e){cc.sys.os!==cc.sys.OS_ANDROID&&cc.sys.os!==cc.sys.OS_IOS||"apk"!==channel&&"ios"!==channel||(cc.sys.os===cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod(this.purchaseClassName,"PurchaseHandle","(I)V",e):cc.sys.os===cc.sys.OS_IOS&&jsb.reflection.callStaticMethod(this.purchaseClassName,"PurchaseHandle:",e))},resumeHandle:function(){cc.sys.os!==cc.sys.OS_ANDROID&&cc.sys.os!==cc.sys.OS_IOS||"apk"!==channel&&"ios"!==channel||(cc.sys.os===cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod(this.purchaseClassName,"ResumePurchase","()V"):cc.sys.os===cc.sys.OS_IOS&&jsb.reflection.callStaticMethod(this.purchaseClassName,"restorePurchase"))},setNoAd:function(e){cc.sys.os!==cc.sys.OS_ANDROID&&cc.sys.os!==cc.sys.OS_IOS||"apk"!==channel&&"ios"!==channel||(cc.sys.os===cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod(this.purchaseClassName,"SetNoAd","(I)V",parseInt(e)):cc.sys.os===cc.sys.OS_IOS&&jsb.reflection.callStaticMethod(this.purchaseClassName,"setNoAd:",parseInt(e)))}},cc._RF.pop()},{}],OPPOAd:[function(e,t){"use strict";cc._RF.push(t,"ec3f5zmmBVMf55tP3OmO5Os","OPPOAd");var n=e("AdInfo");e("TimeModule"),cc.Class({properties:{bannerAd:null,videoAd:null,nativeAd:null,gamePortalAd:null,OPPOGamePortalId:"594048",OPPOAppId:"30859345",OPPOBannerId:"594045",OPPOInterId:"",OPPOVideoId:"594047",OPPONativeBannerId:"594049",OPPONativeIconId:""},initAd:function(){cc.sys.platform!=cc.sys.DESKTOP_BROWSER&&(this.nativeAd=[],this.initVideo(),qg.getNetworkType({success:function(e){n.networkType=e.networkType},fail:function(e){console.log(e.errMsg)},complete:function(){}}),qg.onNetworkStatusChange(function(e){n.networkType=e.networkType}))},showBannerAndNative:function(e){!e&&(0==n.bannerType&&n.isBannerShow||1==n.bannerType&&n.isNativeBannerShow)||(0==n.bannerType?this.showBanner():(n.nativeControl.unschedule(this.showNativeBanner),this.showNativeBanner(),n.nativeControl.schedule(this.showNativeBanner,n.nativeIntervalTimes)))},showBanner:function(){var e=this;null==this.bannerAd?(this.bannerAd=qg.createBannerAd({adUnitId:e.OPPOBannerId}),e.bannerAd&&e.bannerAd.show().then(function(){n.isBannerShow=!0,e.hideNativeBanner()}),this.bannerAd&&this.bannerAd.onHide(function(){n.isShowBanner=!1}),this.bannerAd&&this.bannerAd.onLoad(function(){console.log("banner OnLoad\u6210\u529f---")}),this.bannerAd&&this.bannerAd.onError(function(t){n.isShowBanner=!1,console.log("banner\u5931\u8d25--"+t),0==n.bannerType&&e.bannerShowFail()})):this.bannerAd.show().then(function(){n.isBannerShow=!0,n.nativeControl.btnNativeAdClose(null,1)})},bannerShowFail:function(){0==n.bannerType?n.adsManager.ads.showNativeBanner():n.adsManager.ads.showBanner()},hideBannerAndNative:function(){this.hideBanner(),this.hideNativeBanner(),1==n.bannerType&&n.nativeControl.unschedule(n.adsManager.ads.showNativeBanner)},hideBanner:function(){null!=n.adsManager.ads.bannerAd&&(n.isShowBanner=!1,n.adsManager.ads.bannerAd.destroy(),n.adsManager.ads.bannerAd=null)},hideNativeBanner:function(){n.nativeControl.btnNativeAdClose(null,1)},initVideo:function(){var e=this;this.videoAd&&(this.videoAd.destroy(),this.videoAd=null),this.videoAd=qg.createRewardedVideoAd({adUnitId:e.OPPOVideoId}),this.videoAd&&this.videoAd.onError(function(e){n.isVideoLoad=!1,console.log("video onerror:"+e.errMsg)}),this.videoAd&&this.videoAd.load(),this.videoAd&&this.videoAd.onLoad(function(){console.log("video onload"),n.isVideoLoad=!0}),console.log("initvideo444444"),this.videoAd&&this.videoAd.onClose(function(t){console.log(t.isEnded),t.isEnded?rewardCallBack():console.log("\u4e2d\u9014\u9000\u51fa"),videoCloseBack(),n.isVideoLoad=!1,e.initVideo()})},showVideo:function(){var e=this;return 0==n.isVideoLoad?(videoFailCallBack(),void this.initVideo()):"none"==n.networkType?(videoFailCallBack(),void(n.isVideoLoad=!1)):void(this.videoAd&&this.videoAd.show().then(function(){console.log("video show suc"),n.isVideoLoad=!1,videoShowCallBack()}).catch(function(t){console.log(t),n.isVideoLoad=!1,videoFailCallBack(),e.initVideo()}))},showNativeBanner:function(){n.adsManager.ads.showNativeAd(1,1,n.nativeControl.showNativeBanner)},showNativeIcon:function(){n.adsManager.ads.showNativeAd(0,1,n.nativeControl.showNativeIcon)},showNativeInter:function(){n.adsManager.ads.showNativeAd(2,2,n.nativeControl.showNativeInter)},showNativeAd:function(e,t,i){var a=this,o="";0==e?o=a.OPPONativeIconId:1==e&&(o=a.OPPONativeBannerId),this.nativeAd[e]&&(console.log("\u9500\u6bc1\u4e4b\u524d\u7684\u539f\u751f"),this.nativeAd[e].destroy(),this.nativeAd[e]=null),this.nativeAd[e]=qg.createNativeAd({adUnitId:o}),this.nativeAd[e]&&this.nativeAd[e].onLoad(function(o){console.log("native onload"),i&&o.adList.length>0&&(0==t?i(o.adList[0].adId,o.adList[0].icon):1==t?i(o.adList[0].adId,o.adList[0].title,o.adList[0].desc):2==t&&i(o.adList[0].adId,o.adList[0].title,o.adList[0].desc,o.adList[0].icon),a.nativeAd[e].reportAdShow({adId:o.adList[0].adId}),1==e&&(n.isNativeBannerShow=!0,a.hideBanner(),n.nativeBannerAdId=o.adList[0].adId))}),this.nativeAd[e]&&this.nativeAd[e].onError(function(t){1==e&&1==n.bannerType&&a.bannerShowFail(),a.nativeAd[e]&&(a.nativeAd[e].destroy(),a.nativeAd[e]=null),console.log("native Onerror"+e),console.log(t.errMsg)}),this.nativeAd[e]&&this.nativeAd[e].load()},clickNativeAd:function(e,t){this.nativeAd[t]&&this.nativeAd[t].reportAdClick({adId:e})},hideNativeAd:function(e){console.log("hideNativeAd"),this.nativeAd[e]&&(this.nativeAd[e].destroy(),this.nativeAd[e]=null,1==e&&(n.nativeBannerAdId=null,n.isNativeBannerShow=!1))},showGamePortal:function(){var e=this;null!=this.gamePortalAd&&(this.gamePortalAd.destroy(),this.gamePortalAd=null),this.gamePortalAd=qg.createGamePortalAd({adUnitId:e.OPPOGamePortalId}),this.gamePortalAd.load(),this.gamePortalAd.onError(function(e){console.log("\u4e5d\u5bab\u683conError",e)}),this.gamePortalAd.onLoad(function(){e.gamePortalAd.show().then(function(){e.hideBannerAndNative()}).catch(function(){qg.showModal({title:"\u63d0\u793a",content:"\u8d44\u6e90\u52a0\u8f7d\u5931\u8d25\uff01",showCancel:!1})})}),this.gamePortalAd.onClose(function(){e.showBannerAndNative()})},showGameBanner:function(){qg.getSystemInfoSync().platformVersionCode<1076||(null!=this.gameBannerAd&&(this.gameBannerAd.destroy(),this.gameBannerAd=null),this.gameBannerAd=qg.createGameBannerAd({adUnitId:this.OPPOGameBannerId}),this.gameBannerAd.show(),this.gameBannerAd.onError(function(e){console.log("\u6a2a\u5e45\u5e7f\u544aerr",e)}),this.gameBannerAd.onLoad(function(){}))},hideGameBanner:function(){null!=this.gameBannerAd&&(this.gameBannerAd.destroy(),this.gameBannerAd=null)}}),cc._RF.pop()},{AdInfo:"AdInfo",TimeModule:"TimeModule"}],ObjModule:[function(e,t){"use strict";function n(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=i(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0;return function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}cc._RF.push(t,"a95d7jSqRJKwbYboKtLdUYG","ObjModule"),t.exports={checkType:function(e){return Object.prototype.toString.call(e).slice(8,-1)},clone:function(e){var t=this;if("Object"===this.checkType(e)){var i={};for(var a in e)i[a]=this.clone(e[a]);return i}if("Array"===this.checkType(e)){for(var o=[],s=0,c=e.length;s<c;s++)o[s]=this.clone(e[s]);return o}if("Function"===this.checkType(e))return new Function("return "+e.toString()).call(this);if("Date"===this.checkType(e))return new Date(e.valueOf());if("RegExp"===this.checkType(e))return new RegExp(e);if("Map"===this.checkType(e)){var r=new Map;return e.forEach(function(e,n){r.set(n,t.clone(e))}),r}if("Set"===this.checkType(e)){for(var l,d=new Set,h=n(e.values());!(l=h()).done;){var u=l.value;d.add(this.clone(u))}return d}return e},getObjectKey:function(e,t){return Object.keys(e).find(function(n){return e[n]==t})},getIndexOfArr:function(e,t){var n=-1;if("Array"!==this.checkType(e))return console.log("\u8bf7\u4f20\u5165\u6570\u7ec4"),n;if(null==t)return console.log("\u8bf7\u4f20\u5165\u9700\u8981\u4ea7\u627e\u7684\u503c"),n;for(var i=0;i<e.length;i++)if(e[i]==t){n=i;break}return n},getNumInArr:function(e,t){var n=0;if("Array"!==this.checkType(e))return console.log("\u8bf7\u4f20\u5165\u6570\u7ec4"),null;if(void 0===t)return console.log("\u8bf7\u4f20\u5165\u9700\u8981\u4ea7\u627e\u7684\u503c"),null;for(var i=0;i<e.length;i++)e[i]==t&&n++;return n},arrSort:function(e,t){void 0===t&&(t=!0);var n=t?1:-1;return e.sort(function(e,t){return n*(e-t)}),e},removeRepeat:function(e){for(var t=0;t<e.length;t++)for(var n=t+1;n<e.length;n++)if(e[t]==e[n]){var i=n;e.splice(i,1)}return e},shuffleArr:function(e){return e?(e.sort(function(){return.5-Math.random()}),e):null},simplifiedArr:function(e,t){if(void 0===t&&(t=-1),!e)return null;for(var n=[],i=0;i<e.length;i++)e[i]&&e[i]!=t&&n.push(e[i]);return n},removeDuplicatesFromArray:function(e,t){return e.filter(function(e){return e!==t})}},cc._RF.pop()},{}],PanelBase:[function(e,t){"use strict";cc._RF.push(t,"3f7deaLzmdAJIdgz2mzr8vq","PanelBase");var n=e("GameControl");cc.Class({extends:cc.Component,properties:{},start:function(){},onEnable:function(){console.log("onEnable= "+this.node.name),n.showPanelHandle(this.node.name)},onDisable:function(){console.log("onDisable= "+this.node.name),n.hidePanelHandle(this.node.name)}}),cc._RF.pop()},{GameControl:"GameControl"}],Petal:[function(e,t){"use strict";cc._RF.push(t,"2e5ccVBuQxKzLkT22G0lr21","Petal");var n=e("GameControl"),i=e("EngineCommon"),a=e("StorageModule"),o=e("StatisticsModule");cc.Class({extends:cc.Component,properties:{skeleton:sp.Skeleton,petalBack:cc.Sprite,catHolder:cc.Node,timeLabel:cc.Label,progressSprite:cc.Sprite},onLoad:function(){var e=this;this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.accelerateTimes=a.getData("accelerateTimes",0),this.skeleton.setCompleteListener(function(t){try{"open"==(t.animation?t.animation.name:"")&&(e.petalBack.node.active=!0)}catch(n){console.log(n)}})},start:function(){},initItem:function(e,t,i,a){void 0===a&&(a=-1),this.state=t,this.posIndex=i,this.index=e,0==t&&(this.totalTimes=n.curScene.getFlowerTimes(e),this.timeLabel.node.parent.active=!0,-1==a&&(a=this.totalTimes),this.updateRemindTimes(a)),this.node.name=n.getSkinNameByIndex(e),this.setSkin(e),this.playAnimationByState(t)},setSkin:function(e){for(var t=n.getSkinIdByIndex(e),a=[],o=1;o<4;o++)a[o-1]=t+"_"+o;n.changePartImage(this.skeleton,"petal","","petalPart/",a),isOnline?i.loadImage(this.petalBack,"","petalPart/",t+"_4.png",null,!isOnline):i.loadImage(this.petalBack,"","petalPart/",t+"_4")},playAnimationByState:function(e){var t,n;switch(e){case 0:case 1:t="Idle",n=!0;break;case 2:case 3:case 4:t="clik",n=!1;break;case 5:t="open",n=!1}this.skeleton.setAnimation(0,t,n),i.spineAnimationPlay(this.skeleton,t,n)},updateRemindTimes:function(e,t,i){if(void 0===t&&(t=!0),this.remindTimes=e,this.remindTimes<=0)this.state=1,this.playAnimationByState(1),this.timeLabel.node.parent.active=!1;else if(t||!t&&Math.ceil(e)!=Math.ceil(i)){var a=(this.totalTimes-this.remindTimes)/this.totalTimes;a=a.toFixed(2),n.updateRemindTimes(Math.ceil(this.remindTimes),this.timeLabel,a,this.progressSprite)}},accelerateHandle:function(e){this.updateRemindTimes(e),this.accelerateTimes=parseInt(this.accelerateTimes)+1,a.setData("accelerateTimes",this.accelerateTimes)},onTouchStart:function(e){n.curScene.onTouchStart(e),this.startPosition=e.touch.getLocation(),this.isMove=!1},onTouchMove:function(e){n.curScene.onTouchMove(e);var t=e.touch.getLocation();null==this.startPosition&&(this.startPosition=t),(Math.abs(t.x-this.startPosition.x)>10||Math.abs(t.y-this.startPosition.y)>10)&&(this.isMove=!0)},onTouchEnd:function(){var e=this;if(0==this.isMove){if(5==this.state)return;if(0==this.state)return void(isHasAd?(n.curScene.curAccelerateEgg=this,i.loadPanel(n.gameBundle,"acceleratePanel",n.curScene.topPanel,function(t){t.getComponent("AcceleratePanel").initPanel(e)})):this.remindTimes=0);var t=parseInt(this.state)+1;if(4==this.state)try{this.state=t;var s="petal"+this.index;a.setData(s,2),n.curScene.posIndexArr[parseInt(this.posIndex)]=0,n.curScene.generateOneCat(this.index,n.catState.born,-1,this.catHolder,cc.v2(0,0)),this.catHolder.children[0].scale=0;var c=n.curScene.findToyByIndex(n.ToyType.synthesize);c&&c.getComponent("Synthesize").checkRemindState(),n.curScene.displayWindowCtrl.updateCabinetItem(),0==this.index&&n.curScene.tutorialEndHandle(n.TutorialType.clickPetal);var r=cc.instantiate(n.curScene.effectPrefab);r.parent=cc.find("Canvas");var l=this.node.parent.convertToWorldSpaceAR(this.node.position);return l.y+=this.node.height/2,l=r.parent.convertToNodeSpaceAR(l),r.position=l,setTimeout(function(){try{e.playAnimationByState(e.state)}catch(t){console.log(t)}},100),setTimeout(function(){try{e.catHolder.children[0].scale=1}catch(t){console.log(t)}},200),void o.eventStatistics("cat"+this.index)}catch(h){console.log(h)}this.state=t,this.playAnimationByState(this.state);var d=cc.instantiate(n.curScene.effectPrefab);d.parent=this.node,d.setPosition(0,this.node.height/2)}this.isMove=!1},update:function(e){if(0==this.state){var t=this.remindTimes;this.remindTimes-=e,this.updateRemindTimes(this.remindTimes,!1,t)}}}),cc._RF.pop()},{EngineCommon:"EngineCommon",GameControl:"GameControl",StatisticsModule:"StatisticsModule",StorageModule:"StorageModule"}],Photograph:[function(e,t){"use strict";cc._RF.push(t,"338b2+SBipDhYTHJzZl/lby","Photograph");var n=e("ToyBase"),i=e("EngineCommon"),a=e("AudioModule");cc.Class({extends:n,properties:{},start:function(){this.animationName=["Idle","play"],this.init(),this.skeleton.setStartListener(function(e){"play"==(e.animation?e.animation.name:"")&&(setTimeout(function(){a.playEffect("photo")},2e3),setTimeout(function(){a.playEffect("photo")},5e3),setTimeout(function(){a.playEffect("photo")},7e3),setTimeout(function(){a.playEffect("photo")},9e3))})},toyHandle:function(){this.playAnimationByState(1)},catHandle:function(){var e=this.holder.children[0].getComponent("Cat");i.spineAnimationPlay(e.skeleton,"play-paizhao")}}),cc._RF.pop()},{AudioModule:"AudioModule",EngineCommon:"EngineCommon",ToyBase:"ToyBase"}],Piranha:[function(e,t){"use strict";cc._RF.push(t,"442c8AnWvJEpIGgyGISam2Y","Piranha");var n=e("ToyBase"),i=e("MathModule"),a=e("EngineCommon");cc.Class({extends:n,properties:{},start:function(){this.animationIndex=0,this.animationName=["Idle","play","play2"],this.init()},toyHandle:function(){this.animationIndex=i.rangeRandom(1,3),this.playAnimationByState(this.animationIndex)},catHandle:function(){var e=this.holder.children[0].getComponent("Cat");a.spineAnimationPlay(e.skeleton,["","play-shirenhua1","play-shirenhua2"][this.animationIndex])}}),cc._RF.pop()},{EngineCommon:"EngineCommon",MathModule:"MathModule",ToyBase:"ToyBase"}],Potion:[function(e,t){"use strict";cc._RF.push(t,"5083dHZIYRFFZldAbFya3GA","Potion");var n=e("ToyBase"),i=e("GameControl"),a=e("MathModule"),o=e("EngineCommon");cc.Class({extends:n,properties:{},start:function(){this.animationName=["Idle","play-cg","play-sb"],this.init()},toyHandle:function(){this.randomPotion(),this.randomResult()},randomPotion:function(){console.log("randomPotion");for(var e=a.getRandomArr([1,2,3,4],2),t=[],n=0;n<e.length;n++)t.push("shiguanye"+e[n]),t.push("yeti"+e[n]);i.changePartImage(this.skeleton,"potion","","toys/",t)},randomResult:function(){if(console.log("randomResult"),this.isSuccess=Math.random()<.5,this.playAnimation(),this.isSuccess){for(var e=[],t=a.rangeRandom(1,4),n=0;n<6;n++)0==n?e.push("cg"+t):e.push("cg"+t+"-"+n);i.changePartImage(this.skeleton,"potion-result","","toys/",e)}},playAnimation:function(){this.isSuccess?this.playAnimationByState(1):this.playAnimationByState(2)},catHandle:function(){var e=this.holder.children[0].getComponent("Cat");this.isSuccess?o.spineAnimationPlay(e.skeleton,"play-yaoshui-cg"):o.spineAnimationPlay(e.skeleton,"play-yaoshui-sb")}}),cc._RF.pop()},{EngineCommon:"EngineCommon",GameControl:"GameControl",MathModule:"MathModule",ToyBase:"ToyBase"}],PrivateRoom:[function(e,t){"use strict";cc._RF.push(t,"12425FDhxdND59g58p7wuGN","PrivateRoom");var n=e("ToyBase"),i=e("MathModule"),a=e("EngineCommon");cc.Class({extends:n,properties:{skeleton1:sp.Skeleton},start:function(){this.animationName=["animation"],this.init()},playAnimationByState:function(e){0==e&&(this.skeleton.setAnimation(0,"Idle",!1),this.skeleton1.setAnimation(0,"animation",!1))},toyHandle:function(){},catHandle:function(){var e=i.rangeRandom(0,2),t=this.holder.children[0].getComponent("Cat");a.spineAnimationPlay(t.skeleton,["play-baojian-eat","play-baojian-sleep"][e])}}),cc._RF.pop()},{EngineCommon:"EngineCommon",MathModule:"MathModule",ToyBase:"ToyBase"}],PurchaseItem:[function(e,t){"use strict";cc._RF.push(t,"8eee0r9j59J8pc9b0oKV+uV","PurchaseItem");var n=e("NativePlatformCommon"),i=e("GameCommon"),a=e("StorageModule");cc.Class({extends:cc.Component,properties:{image:cc.Sprite,finishNode:cc.Node},onLoad:function(){},start:function(){this.moveFlag=!1,this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this)},initItem:function(e,t){!this.image&&(this.image=this.node.parent.getComponent(cc.Sprite)),!this.finishNode&&(this.finishNode=this.node.parent.getChildByName("finishNode")),this.index=t.index,this.id=t.id,this.finishNode.position=this.node.position,this.updateItem(t)},updateItem:function(e){0!=e.type&&1!=e.type||(1==a.getData(this.id)?(this.node.active=!1,this.finishNode.active=!0):this.finishNode.active=!1)},onTouchStart:function(e){this.lastPosition=e.touch.getLocation(),this.moveFlag=!1},onTouchMove:function(e){var t=e.touch.getLocation();this.lastPosition||(this.lastPosition=t),(Math.abs(t.x-this.lastPosition.x)>5||Math.abs(t.y-this.lastPosition.y)>5)&&(this.moveFlag=!0)},onTouchEnd:function(){if(console.log("ontouchend"),0==this.moveFlag){if(!i.isCanClick())return;cc.sys.platform==cc.sys.DESKTOP_BROWSER?(console.log("\u8d2d\u4e70"),PurchaseCallback(this.index)):n.buyHandle(this.index)}this.moveFlag=!1}}),cc._RF.pop()},{GameCommon:"GameCommon",NativePlatformCommon:"NativePlatformCommon",StorageModule:"StorageModule"}],PurchasePanel:[function(e,t){"use strict";cc._RF.push(t,"9a254r4NAdJZadA2H2lBLi7","PurchasePanel");var n=e("GameControl"),i=e("MathModule"),a=e("EngineCommon"),o=e("GameCommon"),s=e("StorageModule"),c=e("LanguageModule"),r=e("NativePlatformCommon"),l=e("PanelBase"),d=e("AudioModule");window.PurchaseCallback=function(e,t){void 0===t&&(t=0),console.log("callback:PayCallback"+e);var i=n.getBuyMsg(e);if(1==i.type&&sceneIndex==n.SceneName.game)for(var a=0;a<i.reward.length;a++){var o=n.getIndexBySkinName(i.reward[a]),c="petal"+o;s.getData(c)||n.curScene.generateOnePetal(o,0)}n.buyFinishMsgHandle(i),n.purchaseHandle&&n.purchaseHandle.buyFinishUIHandle(e,i,t)},window.showToast=function(e){n.remindPanelCtrl.showSimpleRemind(e)},cc.Class({extends:l,properties:{barNode:cc.Node,btnHolder:cc.Node,scrollView:cc.ScrollView},onLoad:function(){n.purchaseHandle=this,this.scrollView.node.on("scroll-began",this.scrollBegin,this)},onDestroy:function(){n.purchaseHandle=null},start:function(){this.startY=[0],this.mode=0,this.scrollBarH=this.barNode.parent.height-this.barNode.height,this.scrollH=this.scrollView.content.height-this.scrollView.node.height,this.scrollPercent=0,this.initItem(),this.initModeBtn(),this.sizeFit()},sizeFit:function(){if(cc.winSize.width<this.node.width){var e=cc.winSize.width/this.node.width;this.node.scale=e,this.node.height/=e,this.node.getChildByName("bottom").scale=1/e,cc.find("top/btnClose",this.node).x=(-cc.winSize.width/2+cc.find("top/btnClose",this.node).width/2)/e}else cc.find("top/btnClose",this.node).x=-cc.winSize.width/2+70},initItem:function(){for(var e=1,t=0,i=this.scrollView.content.children,a=0;a<n.purchaseData.length;a++)i[a].getChildByName("btnBuy").addComponent("PurchaseItem").initItem(a,n.purchaseData[a]),t!=n.purchaseData[a].type&&(t=n.purchaseData[a].type,this.startY[e]=Math.abs(i[a].y+i[a].height/2),this.startY[e]=Math.min(this.startY[e],this.scrollH-3),e++)},initModeBtn:function(){for(var e=0;e<this.btnHolder.childrenCount;e++)a.addClickEvent(this.btnHolder.children[e],this.node,"PurchasePanel","btnSwitchMode",e);this.updateMode(this.mode)},updateMode:function(e){for(var t=0;t<this.btnHolder.childrenCount;t++)this.btnHolder.children[t].children[0].active=t==e},btnSwitchMode:function(e,t){if(this.mode!=t){d.playEffect("click"),this.mode=t;var n=-Math.floor(this.startY[t]/this.scrollH*100)/100*this.scrollBarH;cc.tween(this.scrollView.content).to(.2,{y:this.startY[t]}).start(),cc.tween(this.barNode).to(.2,{y:n}).start(),this.updateMode(t)}},btnResumePurchase:function(){if(cc.sys.platform==cc.sys.DESKTOP_BROWSER)return console.log("\u6062\u590d\u8d2d\u4e70\u6210\u529f"),void PurchaseCallback(1,1);o.isCanClick()&&(d.playEffect("click"),r.resumeHandle())},buyFinishUIHandle:function(e,t,i){if(n.purchaseHandle.unLockItemHandle(t),1!=i)if(1==t.type){for(var a=[],o=0;o<t.reward.length;o++)a[o]="cats/"+t.reward[o];n.remindPanelCtrl.showRewardPanel(n.catBundle,a,1,1)}else if(2==t.type){n.updateBellNum(n.curScene.bellLabel,t.reward);var s=c.translateString("\u606d\u559c\u83b7\u5f97&1\u4e2a\u94c3\u94db");s=s.replace("&1",t.reward.toString()),n.remindPanelCtrl.showSimpleRemind(s,!1)}},unLockItemHandle:function(e){for(var t=n.purchaseHandle.scrollView.content.children,i=0;i<t.length;i++){var a=t[i].getChildByName("btnBuy").getComponent("PurchaseItem");if(a.id==e.id){a.updateItem(e);break}}},scrollBegin:function(){this.scrollView.content.stopAllActions(),this.barNode.stopAllActions()},onScrollView:function(){var e;for(e=2;e>=0&&!(this.scrollView.content.y>=this.startY[e]);e--);this.mode!=e&&(this.mode=e,this.updateMode(this.mode));var t=Math.floor(this.scrollView.content.y/this.scrollH*100);(t=i.clamp(0,t,100))!=this.scrollPercent&&(this.barNode.y=-t/100*this.scrollBarH,this.scrollPercent=t)},btnClose:function(){d.playEffect("click"),this.node.active=!1}}),cc._RF.pop()},{AudioModule:"AudioModule",EngineCommon:"EngineCommon",GameCommon:"GameCommon",GameControl:"GameControl",LanguageModule:"LanguageModule",MathModule:"MathModule",NativePlatformCommon:"NativePlatformCommon",PanelBase:"PanelBase",StorageModule:"StorageModule"}],PushConfig:[function(e,t){"use strict";cc._RF.push(t,"41082qJgTJO8IfRHpvidR8Q","PushConfig"),t.exports={bannerInBottom:!0,retryNum:0,loadJsonFlag:0,isLoadResources:!1,styleProgress:[-1],pushMsg:null,appId:null,channel:"",appType:0,typeName:["dress","eliminate","other"],isRandom:!1,curIndex:0,gameBtn:null,singleBtns:[],moreImage:null,animationTimes:30,cutOverImageTimes:60,showMoreGameFlag:0,params:{singleBtnsMsg:[]},configName:"PushMsgNew",serverPath:"https://push.melemoe.com/",serverPathOutSea:"https://outsea.melemoe.com/push/",IndexOf:function(e,t){if(null==e||null==e)return-1;for(var n=-1,i=0;i<e.length;i++)if(e[i].ID==t){n=i;break}return n},RangeRandom:function(e,t,n){if(void 0===n&&(n=!1),1!=n&&0!=n&&(n=!1),e=Math.floor(e),(t=Math.floor(t))<e){var i=e;e=t,t=i}if(e==t)return e;var a=t-e+(1==n?1:0);return Math.floor(Math.random()*a)+e},LoadDragonBones:function(e,t,n){var i="gifs/"+(e=(parseInt(e)+10).toString())+"_ske",a="gifs/"+e+"_tex",o="gifs/"+e+"_tex";n?(i=this.serverPath+i+".json",a=this.serverPath+a+".json",o=this.serverPath+o+".png"):(i="push/outsea/"+i+".json",a="push/outsea/"+a+".json",o="push/outsea/"+o+".png");var s={bone_ske:i,bone_tex:a,bone_tex_img:o};try{var c=t.getComponent("PushGameBtn");c.image.spriteFrame=null,c.MyRemove(),n&&cc.assetManager.loadRemote(s.bone_tex_img,function(e,n){try{var i=new XMLHttpRequest;i.onreadystatechange=function(){if(4==i.readyState&&200==i.status){var e=i.responseText,a=new XMLHttpRequest;a.onreadystatechange=function(){if(4==a.readyState&&200==a.status){var i=a.responseText,o=new dragonBones.DragonBonesAtlasAsset;o.atlasJson=e,o.texture=n;var s=new dragonBones.DragonBonesAsset;s.dragonBonesJson=i;var c=new cc.Node,r=c.addComponent(dragonBones.ArmatureDisplay);r.dragonAtlasAsset=o,r.dragonAsset=s,r.buildArmature("Armature",c),r.timeScale=1,r.playAnimation("newAnimation",0),t.addChild(c),a.abort()}},a.open("GET",s.bone_ske,!0),a.send(),i.abort()}},i.open("GET",s.bone_tex,!0),i.send()}catch(a){}})}catch(r){console.log(r)}},loadImage:function(e,t){cc.assetManager.loadRemote(e,function(e,n){if(e)return console.log(e),void t(null);if(n){var i=new cc.SpriteFrame(n);t(i)}else t(null)})},downloadRemoteImageAndSave:function(e,t){if(null!=e&&""!=e){var n,i=this;if(null==window.jsb)this.loadImage(e,t);else{var a=jsb.fileUtils.getWritablePath()+"pushImage/",o=e.split("/"),s=o[o.length-2]+"-"+o[o.length-1];if(null==s||""==s)return void t(null);var c=a+s;if(this.isValidCommonSuffix(this.getSuffixFromPath(c))||(c+=".png"),n=function(n){console.log("\u7f13\u5b58\u56fe\u7247"),window.jsb&&n?(jsb.fileUtils.isDirectoryExist(a)||(console.log("\u521b\u5efa\u76ee\u5f55"),jsb.fileUtils.createDirectory(a)),jsb.fileUtils.writeDataToFile(new Uint8Array(n),c)?(console.log("\u5199\u56fe\u7247\u5230\u672c\u5730"),i.loadImage(c,t)):(console.log("\u5199\u56fe\u7247\u5230\u672c\u5730\u5931\u8d25\u76f4\u63a5\u52a0\u8f7d\u670d\u52a1\u5668\u8d44\u6e90"),i.loadImage(e,t))):t(null)},jsb.fileUtils.isFileExist(c))return console.log("\u56fe\u7247\u5b58\u5728\uff0c\u76f4\u63a5\u52a0\u8f7d"),void i.loadImage(c,t)}var r=new XMLHttpRequest;r.onreadystatechange=function(){4===r.readyState&&(200===r.status?n&&n(r.response):n&&n(null))}.bind(this),r.responseType="arraybuffer",r.open("GET",e,!0),r.send()}},convertPathRemoveDirectory:function(e){if(null==e)return"";var t=e.length;return(e=e.substr(8,t)).replace(/\//g,"__")},getSuffixFromPath:function(e){var t=e.lastIndexOf(".");return t<0?"":e.substr(t)},isValidCommonSuffix:function(e){return"string"==typeof e&&""!=e&&"unknown"!=e&&!(e.length>4)&&-1!=e.indexOf(".")}},cc._RF.pop()},{}],PushControl:[function(e,t){"use strict";cc._RF.push(t,"83298rXMbxEB66/kmYxK4L/","PushControl");var n=e("PushConfig");cc.Class({extends:cc.Component,properties:{},onLoad:function(){},Init:function(e,t,i){if(null!=t&&null!=i){if(n.appType=i,n.appId=t,n.channel=e,"outsea"==n.channel&&(n.serverPath=n.serverPathOutSea,-1==n.appId.indexOf(".")&&(n.configName="PushMsgIOS")),!n.pushNodeCtrl){var a=new cc.Node;a.position=cc.find("Canvas").position,cc.game.addPersistRootNode(a),n.pushNodeCtrl=a.addComponent("PushNode"),n.retryNum=0,n.pushNodeCtrl.LoadResource(),n.pushNodeCtrl.schedule(n.pushNodeCtrl.LoadResource,5)}}else console.log("\u4f20\u5165\u53c2\u6570\u6709\u8bef\uff0c\u8bf7\u4f20\u5165\u5f53\u524d\u6e38\u620fappId\u4ee5\u53ca\u6e38\u620f\u7c7b\u578b")},start:function(){},ShowMainMenu:function(e){if(null!=n.appId){if(e&&"[object Object]"===Object.prototype.toString.call(e))for(var t in e)n.params[t]=e[t];if(null!=n.pushMsg){if(1==n.styleProgress[0]){n.pushNodeCtrl.node.position=cc.find("Canvas").position;var i=n.pushNodeCtrl.node.getChildByName("pushPanel");return i.active=!0,i.position=cc.v2(0,0),void n.pushNodeCtrl.InitPanel()}0!=n.styleProgress[0]&&(n.styleProgress[0]=0,cc.resources.load("pushPanel",function(e,t){if(e)console.log(e);else{n.pushNodeCtrl.node.position=cc.find("Canvas").position;var i=cc.instantiate(t);i.parent=n.pushNodeCtrl.node,i.position=cc.v2(0,0),n.styleProgress[0]=1,n.gameBtn=i.getChildByName("gameBtn"),n.pushPanel=i.getChildByName("moreGamePanel"),n.curImage=n.pushPanel.getChildByName("image").getComponent(cc.Sprite),n.pushPanel.zIndex=1,n.pushItem=i.getChildByName("pushItem"),n.moreImage=i.getComponent("PushPanel").moreImage,n.pushNodeCtrl.InitPanel(),1==n.showMoreGameFlag?n.pushNodeCtrl.MoreGameClick():2==n.showMoreGameFlag&&1!=cc.sys.localStorage.getItem("showMoreGame")&&(n.pushNodeCtrl.MoreGameClick(),cc.sys.localStorage.setItem("showMoreGame",1))}}))}}else console.log("\u672a\u521d\u59cb\u5316,\u8bf7\u5148\u8c03\u7528Init\u65b9\u6cd5")},HideMainMenu:function(){n.pushNodeCtrl&&n.pushNodeCtrl.node.children&&n.pushNodeCtrl.node.children[0]&&(n.pushNodeCtrl.node.children[0].active=!1)},ShowMoreGame:function(){n.pushNodeCtrl.MoreGameClick()},ShowGameBtn:function(e){n.singleBtns[e]&&(n.singleBtns[e].active=!0)},HideGameBtn:function(e){n.singleBtns[e]&&(n.singleBtns[e].active=!1)},StartGame:function(e){if(this.HideMainMenu(),1==n.styleProgress[1]){n.pushNodeCtrl.node.position=cc.find("Canvas").position;var t=n.pushNodeCtrl.node.getChildByName("treasureChest");return cc.find("Canvas").getComponent(cc.Canvas).fitWidth?n.pushNodeCtrl.scale=cc.find("Canvas").getComponent(cc.Canvas).designResolution.width/720:n.pushNodeCtrl.scale=cc.find("Canvas").getComponent(cc.Canvas).designResolution.height*cc.winSize.width/cc.winSize.height/720,t.scale=n.pushNodeCtrl.scale,t.active=!0,t.position=cc.v2(0,0),t.getComponent(cc.Animation).play("scale"),void(n.callBack=e)}0!=n.styleProgress[1]&&(n.styleProgress[1]=0,cc.resources.load("treasureChest",function(t,i){if(t)console.log(t);else{var a=cc.instantiate(i);a.parent=n.pushNodeCtrl.node,cc.find("Canvas").getComponent(cc.Canvas).fitWidth?n.pushNodeCtrl.scale=cc.find("Canvas").getComponent(cc.Canvas).designResolution.width/720:n.pushNodeCtrl.scale=cc.find("Canvas").getComponent(cc.Canvas).designResolution.height*cc.winSize.width/cc.winSize.height/720,a.scale=n.pushNodeCtrl.scale,a.position=cc.v2(0,0),n.styleProgress[1]=1,a.getComponent(cc.Animation).play("scale"),n.callBack=e}}))},BtnMoreGame:function(){n.pushNodeCtrl&&n.pushNodeCtrl.BtnMoreGame()}}),cc._RF.pop()},{PushConfig:"PushConfig"}],PushGameBtn:[function(e,t){"use strict";cc._RF.push(t,"469a6LdOyxIcrg08ZAlNX06","PushGameBtn");var n=e("PushConfig");cc.Class({extends:cc.Component,properties:{image:cc.Sprite},onLoad:function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this)},start:function(){},Init:function(e){this.lastType=this.imageType,this.imageType=e,0!=e?(this.PlayAnimation(1),this.LoadImage(),this.CutOverImage(),1==e||2==e?this.node.getChildByName("select").active=!0:(this.node.getChildByName("select").active=!1,this.image.spriteFrame=null),this.image.node.getChildByName("red").active=!1):(this.index=-1,this.MyRemove(),this.image.spriteFrame=n.moreImage,this.node.getChildByName("select").active=!1,this.image.node.getChildByName("red").active=!0)},MyRemove:function(){if(!(this.node.childrenCount<3))for(var e=this.node.children,t=e.length-1;t>1;t--)e[t].destroy()},LoadImage:function(){var e=n.RangeRandom(0,n.pushMsg.length),t=n.pushMsg[e].isServer;if(e!=this.index||this.lastType!=this.imageType)if(1==this.imageType||2==this.imageType)if(t){var i=n.serverPath+"icons/"+n.pushMsg[e].icon+".png";cc.assetManager.loadRemote(i,function(t,n){t?console.log(t):(this.index=e,this.MyRemove(),this.image.spriteFrame=new cc.SpriteFrame(n))}.bind(this))}else{var a="push/outsea/icons/"+n.pushMsg[e].icon;cc.resources.load(a,cc.SpriteFrame,function(t,n){t?console.log(t):(this.index=e,this.MyRemove(),this.image.spriteFrame=n)}.bind(this))}else 3!=this.imageType&&4!=this.imageType||(this.index=e,n.LoadDragonBones(this.index.toString(),this.node,!0))},CutOverImage:function(){this.unschedule(this.LoadImage),this.schedule(this.LoadImage,n.cutOverImageTimes)},PlayAnimation:function(e){0==e?this.node.getComponent(cc.Animation).play("pushAnimDefault"):this.node.getComponent(cc.Animation).play("PushIconAnim")},AnimationFinish:function(){this.scheduleOnce(function(){this.PlayAnimation(1)}.bind(this),n.animationTimes)},onTouchStart:function(e){this.lastPosition=e.touch.getLocation(),this.moveFlag=!1},onTouchMove:function(e){var t=e.touch.getLocation();(Math.abs(t.x-this.lastPosition.x)>5||Math.abs(t.y-this.lastPosition.y)>5)&&(this.moveFlag=!0)},onTouchEnd:function(){var e=this;if(0==this.moveFlag)if(0==this.imageType||1==this.imageType||3==this.imageType){var t;cc.sys.os==cc.sys.OS_ANDROID&&(t=0==this.imageType?"MoreGameBtn":"ImageMoreGameBtn",jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","EventAnalytics","(Ljava/lang/String;)V",t)),n.pushNodeCtrl.MoreGameClick(),this.image.node.getChildByName("red").active&&(this.image.node.getChildByName("red").active=!1,this.scheduleOnce(function(){e.image.node.getChildByName("red").active=!0},60))}else n.pushNodeCtrl.JumpToStoreClick(this.index)}}),cc._RF.pop()},{PushConfig:"PushConfig"}],PushItemRemark:[function(e,t){"use strict";cc._RF.push(t,"a1b6bwwPilJMJJT3n610S5Q","PushItemRemark");var n=e("PushConfig");cc.Class({extends:cc.Component,properties:{type:0,maxSize:7,fontNum:2,backNum:4,itemSpace1:20,objectScale:1},onLoad:function(){this.startPos=0,this.moveDirection=1,this.node.parent.parent.getComponent(cc.ScrollView).vertical?this.diretorFlag=!0:this.diretorFlag=!1,this.node.parent.parent.on("scroll-began",this.ScrollBegin,this),this.node.parent.parent.on("scroll-ended",this.ScrollEnd,this)},start:function(){},ScrollBegin:function(){this.unscheduleAllCallbacks(),this.moveFlag=!1},ScrollEnd:function(){this.scheduleOnce(function(){this.moveFlag=!0}.bind(this),3)},LoadData:function(e,t){this.pushMsg=e,this.unitNum=t,this.isScrollChange=!1,this.curDex=0,this.maxDex=Math.floor((this.pushMsg.length-1)/this.unitNum)*this.unitNum;for(var n=this.node.children,i=0;i<this.unitNum*this.maxSize&&i<this.pushMsg.length;i++)this.InitItemMsg(i,n[i-this.curDex]);this.pushMsg.length-this.curDex>=this.unitNum*(this.maxSize-1)&&(this.pushMsg.length-this.curDex>this.unitNum*this.maxSize&&(this.isScrollChange=!0,2==this.type&&(console.log("\u8bbe\u7f6e\u4e3atrue"),this.moveFlag=!0)),this.bottomIndex=this.unitNum*(this.maxSize-1)),this.lastIndex=0,this.topIndex=0},InitItemMsg:function(e,t){if(e>this.pushMsg.length-1)null==t&&null==t||(t.active=!1);else if(!(e<0)){var i=null;null!=t||null!=t?i=t:(i=cc.instantiate(n.pushItem)).parent=this.node,i.scale=this.objectScale,i.active=!0;var a=i.getComponent("PushItem");if(2==this.type&&(a.nameLabel.node.active=!1),a.InitItem(e,this.pushMsg[e].ID,this.pushMsg[e].name,this.pushMsg[e].icon,this.pushMsg[e].isServer,!1,this.pushMsg[e].path),0==e){this.itemW=i.width*this.objectScale,this.itemH=i.height*this.objectScale;var o=Math.ceil(this.pushMsg.length/this.unitNum);if(1==this.diretorFlag){1==this.unitNum?this.itemSpace=0:this.itemSpace=(this.node.width-2*this.itemSpace1-this.itemW*this.unitNum)/(this.unitNum-1);var s=(this.itemH+this.itemSpace1)*o+this.itemSpace1;this.node.height=s}else{1==this.unitNum?this.itemSpace=0:this.itemSpace=(this.node.height-2*this.itemSpace1-this.itemW*this.unitNum)/(this.unitNum-1);var c=(this.itemW+this.itemSpace1)*o+this.itemSpace1;this.node.width=c}}if(1==this.diretorFlag){var r=-this.itemSpace1-this.itemH/2-Math.floor(e/this.unitNum)*(this.itemH+this.itemSpace1),l=-this.node.width/2+this.itemSpace1+this.itemW/2+e%this.unitNum*(this.itemW+this.itemSpace);1==this.unitNum&&(l=0),i.setPosition(l,r)}else{var d=this.itemSpace1+this.itemW/2+Math.floor(e/this.unitNum)*(this.itemW+this.itemSpace1),h=-this.node.height/2+this.itemH/2+e%this.unitNum*(this.itemH+this.itemSpace)+this.itemH/2;1==this.unitNum&&(h=0),i.setPosition(d,h)}}},UpdateTwoRowItem:function(e){var t=this.node.children;if(0==e){var n=t[this.topIndex].getComponent("PushItem").index+this.unitNum*this.maxSize;if(n>=this.pushMsg.length)return;for(var i=this.topIndex;i<this.topIndex+this.unitNum;i++,n++)this.InitItemMsg(n,t[i]);this.bottomIndex=this.topIndex,this.topIndex+=this.unitNum,this.topIndex>this.unitNum*(this.maxSize-1)&&(this.topIndex=0)}else if(1==e){var a=t[this.bottomIndex].getComponent("PushItem").index-this.unitNum*this.maxSize;if(a<0)return;for(var o=this.bottomIndex;o<this.bottomIndex+this.unitNum;o++,a++)this.InitItemMsg(a,t[o]);this.topIndex=this.bottomIndex,this.bottomIndex-=this.unitNum,this.bottomIndex<0&&(this.bottomIndex=this.unitNum*(this.maxSize-1))}},OnScrollRectScrolled:function(){if(0!=this.isScrollChange)if(1==this.diretorFlag){if(this.node.y<this.startPos)return void(this.moveDirection=1);if(this.node.y>=this.node.height-this.node.parent.height)return void(this.moveDirection=-1);var e=Math.floor((this.node.y-this.startPos)/(this.itemH+this.itemSpace1))*this.unitNum;if(e==this.lastIndex)return;this.UpdateScrollView(e)}else{if(this.node.x>this.startPos)return;var t=Math.floor((this.startPos-this.node.x)/(this.itemW+this.itemSpace1))*this.unitNum;if(t==this.lastIndex)return;this.UpdateScrollView(t)}},UpdateScrollView:function(e){if(e<this.lastIndex){if(e>this.maxDex-(this.backNum+1)*this.unitNum)return;this.UpdateTwoRowItem(1)}else if(e>this.lastIndex){if(e<(this.fontNum+1)*this.unitNum)return;this.UpdateTwoRowItem(0)}this.lastIndex=e},update:function(e){if(this.isScrollChange&&0==this.diretorFlag&&this.moveFlag){e>.5&&(e=0);var t=this.node.x-80*e*this.moveDirection;t<=-this.node.width+this.node.parent.width?(this.node.x=-this.node.width+this.node.parent.width,this.moveDirection=-1,this.scheduleOnce(function(){this.moveFlag=!0}.bind(this),2)):t>=0?(this.node.x=0,this.moveFlag=!1,this.moveDirection=1,this.scheduleOnce(function(){this.moveFlag=!0}.bind(this),2)):this.node.x=t,this.OnScrollRectScrolled()}},SetAllUnSelectState:function(){for(var e=this.node.children,t=0;t<e.length;t++)e[t].getComponent("PushItem").selectNode.active=!1}}),cc._RF.pop()},{PushConfig:"PushConfig"}],PushItem:[function(e,t){"use strict";cc._RF.push(t,"014cdyxoItPlK929RlWS6y2","PushItem");var n=e("PushConfig");cc.Class({extends:cc.Component,properties:{type:0,image:cc.Sprite,nameLabel:cc.Label},onLoad:function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.selectNode=this.node.getChildByName("select")},start:function(){this.moveFlag=!1,this.lastPosition=cc.v2(0,0)},InitItem:function(e,t,i,a,o,s,c){try{if(this.index=e,this.appId=t,this.appName=i,this.icon=a,this.isServer=o,c&&(this.path=c),this.nameLanel&&(this.nameLanel.string=this.appName),null==this.hotNode&&(this.hotNode=this.node.getChildByName("hotNode")),1==this.type&&s){var r=Math.random()<.5;this.hotNode.getComponent(cc.Sprite).spriteFrame=r?n.pushNodeCtrl.hot1:n.pushNodeCtrl.hot2}this.hotNode.active=s,this.LoadImage(this.index),this.index==n.curIndex&&n.pushNodeCtrl.LoadImage(this.index)}catch(l){}},LoadImage:function(e){if(this.isServer){var t=n.serverPath+"icons/"+this.icon+".png";n.downloadRemoteImageAndSave(t,function(t){this.image&&(this.image.spriteFrame=t),n.curIndex==e?this.selectNode.active=!0:this.selectNode.active=!1}.bind(this))}else{var i="push/outsea/icons/"+this.icon;cc.resources.load(i,cc.SpriteFrame,function(t,i){try{if(e!=this.index)return;if(t)return console.log(t),void(this.image&&(this.image.spriteFrame=null));this.image&&(this.image.spriteFrame=i),n.curIndex==e?this.selectNode.active=!0:this.selectNode.active=!1}catch(a){console.log(a)}}.bind(this))}},onTouchStart:function(e){this.lastPosition=e.touch.getLocation(),this.moveFlag=!1},onTouchMove:function(e){var t=e.touch.getLocation();(Math.abs(t.x-this.lastPosition.x)>5||Math.abs(t.y-this.lastPosition.y)>5)&&(this.moveFlag=!0)},onTouchEnd:function(){if(0==this.moveFlag){if(n.curIndex==this.index)return;n.curIndex=this.index,this.node.parent.getComponent("PushItemRemark").SetAllUnSelectState(),this.selectNode.active=!0,n.pushNodeCtrl.LoadImage(this.index,this.isServer)}}}),cc._RF.pop()},{PushConfig:"PushConfig"}],PushNode:[function(e,t){"use strict";cc._RF.push(t,"664b6+OHTJDoq4vGKzfIPrY","PushNode");var n=e("PushConfig");cc.Class({extends:cc.Component,properties:{},start:function(){},LoadResource:function(){if(console.log("\u52a0\u8f7d\u4e92\u63a8\u6587\u4ef6"),null==n.pushMsg||2!=n.loadJsonFlag){if(1==n.loadJsonFlag)return;if(n.retryNum++,20==n.retryNum)return console.log("\u6700\u591a\u5c1d\u8bd520\u6b21"),void n.pushNodeCtrl.unschedule(n.pushNodeCtrl.LoadResource);var e="push/outsea/"+n.configName;0==n.loadJsonFlag&&cc.resources.load(e,function(e,t){if(e)console.log(e);else if(null==n.pushMsg){for(var i=n.typeName[n.appType],a=t.json.body[i],o=a.length-1;o>=0;o--)a[o].ID==n.appId?a.splice(o,1):a[o].IDS&&-1===a[o].IDS.indexOf(n.appId)&&a.splice(o,1);n.showMoreGameFlag=t.json.showMoreGameFlag,n.pushMsg=a}}),n.loadJsonFlag=1,e=n.serverPath+n.channel+"/"+n.configName+".json";var t=new XMLHttpRequest;t.onreadystatechange=function(){if(4==t.readyState&&t.status>=200&&t.status<400){var e=t.responseText;"{"!=e[0]&&(e=e.substr(1));for(var i=JSON.parse(e),a=n.typeName[n.appType],o=i.body[a],s=o.length-1;s>=0;s--)o[s].ID==n.appId?o.splice(s,1):o[s].IDS&&-1===o[s].IDS.indexOf(n.appId)&&o.splice(s,1);n.showMoreGameFlag=i.showMoreGameFlag,n.loadJsonFlag=2,n.pushMsg=o,n.pushNodeCtrl.unschedule(n.pushNodeCtrl.LoadResource),console.log("\u670d\u52a1\u5668\u52a0\u8f7d\u5b8c\u6210"),n.pushPanel&&n.pushPanel.active&&n.pushNodeCtrl.MoreGameClick(),t.abort()}else 4==t.readyState&&(n.loadJsonFlag=3)},t.open("GET",e,!0),t.send()}},InitPanel:function(){n.pushPanel.getChildByName("image").scale=1;for(var e=0;e<n.singleBtns.length;e++)n.singleBtns[e]&&(n.singleBtns[e].active=!1);for(var t=0;t<n.params.singleBtnsMsg.length;t++)if(n.params.singleBtnsMsg[t]){if(!n.singleBtns[t]){var i=cc.instantiate(n.gameBtn);n.singleBtns[t]=i,i.parent=n.gameBtn.parent}n.params.singleBtnsMsg[t].x?n.singleBtns[t].x=n.params.singleBtnsMsg[t].x:n.singleBtns[t].x=0,n.params.singleBtnsMsg[t].y?n.singleBtns[t].y=n.params.singleBtnsMsg[t].y/n.pushNodeCtrl.scale:n.singleBtns[t].y=0,n.params.singleBtnsMsg[t].zIndex?n.singleBtns[t].zIndex=n.params.singleBtnsMsg[t].zIndex:n.singleBtns[t].zIndex=0,n.params.singleBtnsMsg[t].scale?n.singleBtns[t].scale=n.params.singleBtnsMsg[t].scale:n.singleBtns[t].scale=1,n.params.singleBtnsMsg[t].imageType?n.singleBtns[t].getComponent("PushGameBtn").Init(n.params.singleBtnsMsg[t].imageType):n.singleBtns[t].getComponent("PushGameBtn").Init(0),n.singleBtns[t].active=!0}n.bannerInBottom||(cc.winSize.height/cc.winSize.width<1.7?n.pushPanel.getChildByName("image").y=0:n.pushPanel.getChildByName("image").y=20)},RandomSort:function(){if(0==n.isRandom)return n.pushMsg;for(var e=new Array,t=new Array,i=0;i<n.pushMsg.length;i++){var a=n.RangeRandom(1,65536);e[i]=a,t[i]=n.pushMsg[i]}for(var o=0;o<n.pushMsg.length;o++)for(var s=1;s<n.pushMsg.length;s++)if(e[s]<e[s-1]){var c=t[s];t[s]=t[s-1],t[s-1]=c,c=e[s],e[s]=e[s-1],e[s-1]=c}return t},MoreGameClick:function(){if(null!=n.pushPanel){n.pushPanel.active=!0;var e=cc.find("horBotPanel/horItemRemark",n.pushPanel).getComponent(cc.ScrollView).content;0!=e.childrenCount&&e.getComponent("PushItemRemark").pushMsg.length==n.pushMsg.length||(this.LoadImage(0),e.getComponent("PushItemRemark").LoadData(n.pushNodeCtrl.RandomSort(),1))}},JumpToStoreClick:function(e){var t=n.pushMsg[e].ID,i=n.pushMsg[e].name;console.log("\u8df3\u8f6c\u6e38\u620f",t,i),cc.sys.os==cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","JumpToStore","(Ljava/lang/String;Ljava/lang/String;)V",t,i):cc.sys.os==cc.sys.OS_IOS&&jsb.reflection.callStaticMethod("AppController","GoToAppStore:",t)},LoadImage:function(e){if(n.pushMsg[e].isServer){var t=n.serverPath+"panel/"+n.pushMsg[e].icon+".png";n.downloadRemoteImageAndSave(t,function(e){n.curImage.spriteFrame=e})}else{var i="push/outsea/panel/"+n.pushMsg[e].icon;cc.resources.load(i,cc.SpriteFrame,function(e,t){e?console.log(e):n.curImage.spriteFrame=t})}}}),cc._RF.pop()},{PushConfig:"PushConfig"}],PushPanel:[function(e,t){"use strict";cc._RF.push(t,"5df83xhZSZGaKKijjgiidHJ","PushPanel");var n=e("PushConfig");cc.Class({extends:cc.Component,properties:{moreImage:cc.SpriteFrame},start:function(){},ShowGameBtn:function(e){n.singleBtns[e]&&(n.singleBtns[e].active=!0)},HideGameBtn:function(e){n.singleBtns[e]&&(n.singleBtns[e].active=!1)},BtnCloseMoreGamePanel:function(){n.pushPanel.active=!1},BtnJumpToStore:function(){n.pushNodeCtrl.JumpToStoreClick(n.curIndex)}}),cc._RF.pop()},{PushConfig:"PushConfig"}],QQAd:[function(e,t){"use strict";cc._RF.push(t,"0e2e4icIRtDsYAUKmBMpU6u","QQAd"),cc.Class({extends:cc.Component,properties:{bannerAd:null,videoAd:null,interstitialAd:null,appbox:null,blockAd:null,firstAppBox:!1,appBoxTime:0,isInterLoad:!1,interCloseTime:0,testFlag:!0,isShowBanner:!1,QQBannerId:"5ea26bbf91952b54983e43b4aedbca4c",QQInterId:"1a9d627fc6825611baf9030f7175f206",QQVideoId:"879bdb9021dab8a37bf5828470879d33",QQBoxId:"b2926752067305e5ceb95136e42fa496",QQBlockId:"8d6193dc7d807d18cc31fc43c8a9050a",QQHBlockId:"8d6193dc7d807d18cc31fc43c8a9050a"},start:function(){},initAd:function(){cc.sys.platform!=cc.sys.DESKTOP_BROWSER&&(this.initInterstitial(),this.initVideo(),this.initAppBox())},initBanner:function(e,t,n){e.bannerAd=qq.createBannerAd({adUnitId:e.QQBannerId,style:{width:320,top:0,left:0}}),e.bannerAd&&e.bannerAd.onResize(function(i){e.bannerAd&&(e.bannerAd.style.top=n-i.height,e.bannerAd.style.left=(t-i.width)/2)}),e.bannerAd.onLoad(function(){e.bannerAd.show().then(function(){console.log("banner\u6210\u529f\u663e\u793a-"),e.isShowBanner=!0}).catch(function(){e.isShowBanner=!1})}),e.bannerAd.onError(function(t){console.log("banner error"+t.errMsg),e.isShowBanner=!1})},showBanner:function(){if(cc.sys.platform!=cc.sys.DESKTOP_BROWSER&&0!=gameManager.IsCanSupportFunc(0)){var e=this,t=qq.getSystemInfoSync(),n=t.screenWidth,i=t.screenHeight;null!=this.bannerAd?(this.bannerAd.destroy(),this.bannerAd=null,"ios"==t.platform.toLowerCase()?this.scheduleOnce(function(){this.initBanner(e,n,i)}.bind(this),.5):this.initBanner(e,n,i)):this.initBanner(e,n,i)}},hideBanner:function(){cc.sys.platform!=cc.sys.DESKTOP_BROWSER&&0!=gameManager.IsCanSupportFunc(0)&&null!=this.bannerAd&&(this.bannerAd.destroy(),this.bannerAd=null,this.isShowBanner=!1)},initVideo:function(){if("qq"==channel&&cc.sys.platform!=cc.sys.DESKTOP_BROWSER&&0!=gameManager.IsCanSupportFunc(2)){var e=this;this.videoAd=qq.createRewardedVideoAd({adUnitId:e.QQVideoId}),this.videoAd&&this.videoAd.load(),this.videoAd.onError(function(e){console.log("video error="+e.errMsg)}),this.videoAd.onLoad(function(){}),this.videoAd.onClose(function(t){try{e.interCloseTime=gameManager.GetNowTime(),t&&t.isEnded?(!e.VideoCallBack&&gameManager.adsManager.VideoShowHandle(),e.VideoCallBack&&e.VideoCallBack()):console.log("\u4e2d\u9014\u9000\u51fa"),gameManager.adsManager.VideoClose(),e.videoAd.load()}catch(n){console.log(n)}}.bind(this))}},showVideo:function(){if("qq"==channel&&0!=gameManager.IsCanSupportFunc(2)){var e=this;if(null==this.videoAd)return this.initVideo(),void gameManager.adsManager.VideoFailHandle();this.videoAd.show().then(function(){callBack?e.VideoCallBack=callBack:e.VideoCallBack=null,gameManager.adsManager.VideoShow()}).catch(function(){e.videoAd.load().then(function(){console.log("\u624b\u52a8\u52a0\u8f7d\u6210\u529f")}),e.VideoCallBack=null,gameManager.adsManager.VideoFailHandle()})}else gameManager.adsManager.VideoFailHandle()},initInterstitial:function(){if("qq"==channel&&cc.sys.platform!=cc.sys.DESKTOP_BROWSER&&0!=gameManager.IsCanSupportFunc(1)){gameManager.GetIsPhone()&&this.interstitialAd&&(this.interstitialAd.destroy(),this.interstitialAd=null);var e=this;this.interstitialAd=qq.createInterstitialAd({adUnitId:e.QQInterId}),this.interstitialAd.onLoad(function(){e.isInterLoad=!0}),this.interstitialAd.onClose(function(){e.interCloseTime=gameManager.GetNowTime(),e.isInterLoad=!1,e.isShowBanner=!1,e.bannerHanle()}),this.interstitialAd.onError(function(t){console.log("error",t),e.isInterLoad=!1})}},showInterstitial:function(){if("qq"==channel&&cc.sys.platform!=cc.sys.DESKTOP_BROWSER&&0!=gameManager.IsCanSupportFunc(1)){gameManager.GetIsPhone()&&0==this.isInterLoad&&this.initInterstitial();var e=this;gameManager.GetNowTime()-gameManager.startGameTime<3e4||gameManager.GetNowTime()-this.interCloseTime<6e4||(this.isInterLoad=!1,this.interstitialAd&&this.interstitialAd.show().then(function(){e.isShowBanner=!0,e.hideBanner()}).catch(function(t){console.log("\u5e7f\u544a\u7ec4\u4ef6\u51fa\u73b0\u95ee\u9898",t),e.scheduleOnce(function(){e.interstitialAd.load().then(function(){})},3)}))}},initAppBox:function(){if("qq"==channel&&cc.sys.platform!==cc.sys.DESKTOP_BROWSER&&0!=gameManager.IsCanSupportFunc(12)){var e=this;this.appbox=qq.createAppBox({adUnitId:e.QQBoxId}),this.appbox&&this.appbox.load(),this.appbox.onClose(function(){e.appbox&&e.appbox.load()})}},showAppBox:function(){if("qq"==channel&&cc.sys.platform!==cc.sys.DESKTOP_BROWSER&&0!=gameManager.IsCanSupportFunc(12)&&!(!gameManager.isBtnMoreGame&&this.firstAppBox&&gameManager.GetNowTime()-gameManager.appBoxTime<3e4)){gameManager.appBoxTime=gameManager.GetNowTime();var e=this;if(this.firstAppBox=!0,null==this.appbox)return console.log("appbox----null"),console.log(gameManager.isBtnMoreGame),gameManager.isBtnMoreGame&&qq.showToast({title:"\u63d0\u793a",icon:"\u8d44\u6e90\u52a0\u8f7d\u5931\u8d25",duration:2e3}),gameManager.isBtnMoreGame=!1,void this.initAppBox();this.appbox&&this.appbox.show().then(function(){console.log("appbox----show"),gameManager.isBtnMoreGame=!1}).catch(function(t){console.log("appbox----catch"),console.log(t),e.appbox.load(),gameManager.isBtnMoreGame&&qq.showToast({title:"\u63d0\u793a",icon:"\u8d44\u6e90\u52a0\u8f7d\u5931\u8d25",duration:2e3}),gameManager.isBtnMoreGame=!1})}},showBlockAd:function(e){if(void 0===e&&(e=1),"qq"==channel&&cc.sys.platform!==cc.sys.DESKTOP_BROWSER&&0!=gameManager.IsCanSupportFunc(15)){var t=this,n=gameManager.systemInfo.screenHeight;gameManager.systemInfo.screenWidth,this.blockAd&&(this.blockAd.destroy(),this.blockAd=null);var i=16,a=150;0==e?(i=32,gameManager.GetIsPhone()?a=(n-229)/2-50:cc.winSize.height/cc.winSize.width>=2.1&&(a=550),this.blockAd=qq.createBlockAd({adUnitId:t.QQBlockId,size:3,orientation:"vertical",style:{left:i,top:a}}),1==gameManager.IsCanSupportFunc(18)&&this.blockAd&&this.blockAd.onResize(function(e){t.blockAd.style.top=(n-e.height)/2})):(a=cc.winSize.height/cc.winSize.width>=2?gameManager.GetIsPhone()?120:180:60,this.blockAd=qq.createBlockAd({adUnitId:t.QQHBlockId,size:4,orientation:"landscape",style:{left:35,top:a}}),1==gameManager.IsCanSupportFunc(18)&&this.blockAd&&this.blockAd.onResize(function(){t.blockAd.style.top=a})),this.blockAd&&this.blockAd.onError(function(e){console.log("blockAd error",e)}),this.blockAd&&this.blockAd.onLoad(function(){t.blockAd.show(),t.interLoadTime=gameManager.GetNowTime()})}},hideBlockAd:function(){this.blockAd&&this.blockAd.destroy()}}),cc._RF.pop()},{}],RemindPanelCtrl:[function(e,t){"use strict";cc._RF.push(t,"96eaeHRDcpNr4KHxyE6WSEZ","RemindPanelCtrl");var n=e("GameControl"),i=e("LanguageModule"),a=e("EngineCommon"),o=e("AudioModule");cc.Class({extends:cc.Component,properties:{panel:cc.Node,title:cc.Label,description:cc.Label,msgLabel:cc.Label,okBtn:cc.Node,noBtn:cc.Node,audioToggle:cc.Toggle,musicToggle:cc.Toggle,languageLabel:cc.Label,languageSelectNode:cc.Node,rewardPanel:cc.Node,tutorialNode:cc.Node,coinNode:cc.Node},onLoad:function(){cc.game.addPersistRootNode(this.node),n.remindPanelCtrl=this},start:function(){this.initSetPanel()},showRemindPanel:function(e,t,n){this.type=e,void 0!==t&&(this.param1=t),void 0!==n&&(this.param2=n);var a="",o=!0;switch(this.type){case 1:a="\u5f55\u5c4f\u5931\u8d25\n\u5f55\u5c4f\u5c11\u4e8e3\u79d2\n\u65e0\u6cd5\u8c03\u8d77\u5206\u4eab",o=!1;break;case 2:a="\u662f\u5426\u5206\u4eab?",o=!1;break;case 3:a="\u662f\u5426\u4fdd\u5b58\u5f53\u524d\u88c5\u626e?";break;case 4:a="\u662f\u5426\u5220\u9664\u5f53\u524d\u5c55\u67dc?";break;case 5:a="\u662f\u5426\u770b\u5e7f\u544a\u5524\u9192\u5f53\u524d\u732b\u54aa?";break;case 7:a="\u662f\u5426\u770b\u5e7f\u544a\u83b7\u53d6&1\u4e2a\u94c3\u94db?";break;case 8:a="\u66f4\u6362\u8bed\u8a00\u5c06\u91cd\u65b0\u542f\u52a8\u6e38\u620f\uff0c\u662f\u5426\u91cd\u542f?"}var s=this.panel.getChildByName("bottom");if(1==this.type?(s.height=590,this.okBtn.active=!1):(s.height=730,this.okBtn.active=!0),5==this.type||7==this.type?(this.okBtn.getChildByName("ad").active=!0,this.okBtn.getChildByName("label").x=50):(this.okBtn.getChildByName("ad").active=!1,this.okBtn.getChildByName("label").x=0),o){this.title&&(this.title.string=i.translateString("\u63d0\u793a"));var c=i.translateString(a);7==e&&(c=c.replace("&1",50)),this.description.string=c}else this.title&&(this.title.string="\u63d0\u793a"),this.description.string=a;this.panel.active=!0},btnOk:function(){switch(o.playEffect("click"),this.type){case 1:break;case 3:n.curScene.saveHandle(),n.showLoadingPanel(function(){cc.director.loadScene("game")});break;case 4:n.curScene.displayWindowCtrl.deleteShowcase(this.param1,this.param2);break;case 8:i.setLanguage(this.language),this.node.destroy(),n.remindPanelCtrl=null,n.showLoadingPanel(function(){cc.director.loadScene("home")})}this.panel.active=!1},btnClose:function(){o.playEffect("click"),3==this.type&&n.showLoadingPanel(function(){cc.director.loadScene("game")}),this.panel.active=!1},showSimpleRemind:function(e,t){void 0===t&&(t=!0),t&&(e=i.translateString(e)),this.msgLabel.string=e;var n=this.msgLabel.node.parent;n.active=!0,n.stopAllActions(),n.opacity=255,cc.tween(n).delay(.5).to(1,{opacity:100}).call(function(){n.active=!1}).start()},initSetPanel:function(){this.setPanel=this.node.getChildByName("setPanel"),this.languageScrollView=cc.find("holder/language/bottom/scrollView",this.setPanel).getComponent(cc.ScrollView);for(var e=this.languageScrollView.content.children,t=0;t<i.languageDesc.length;t++){var n=void 0;(n=0==t?e[t]:cc.instantiate(e[0])).parent=this.languageScrollView.content,n.getChildByName("label").getComponent(cc.Label).string=i.languageDesc[t],n.y=-10-n.height/2-t*n.height,i.languageDesc[t]==i.languageName?(this.selectedLanguageNode=n,n.children[0].active=!0):n.children[0].active=!1,a.addClickEvent(n,this.node,"RemindPanelCtrl","setLanguage",t)}this.languageScrollView.content.height=i.languageDesc.length*e[0].height+20,"apk"!=channel&&"ios"!=channel&&(cc.find("holder/language",this.setPanel).active=!1),this.updateSetPanel()},updateSetPanel:function(){this.audioToggle.isChecked=o.audioOn,this.musicToggle.isChecked=o.musicOn,this.isLanguageHide=!0,this.animPlaying=!1,this.language=i.language,this.languageLabel.string=i.languageName,this.expandNode=cc.find("holder/language/expand",this.setPanel),this.updateExpandState();var e=this.languageScrollView.node.parent;e.active=!1,e.height=0},updateExpandState:function(){this.expandNode.scaleY=this.isLanguageHide?1:-1},setLanguage:function(e,t){if(!this.animPlaying){var n=i.getLanguageByIndex(t);this.language=n,this.languageLabel.string=i.getLanguageNameByIndex(t),this.selectedLanguageNode&&(this.selectedLanguageNode.children[0].active=!1),this.selectedLanguageNode=e.target,this.selectedLanguageNode.children[0].active=!0}},btnAudio:function(){o.playEffect("click"),o.setAudioFlag(this.audioToggle.isChecked),this.audioToggle.isChecked||o.stopAllSounds()},btnMusic:function(){o.playEffect("click"),o.setMusicFlag(this.musicToggle.isChecked),o.musicOn?o.playMusic("bgm"):o.stopMusic()},btnLanguageHandle:function(){var e=this;if(!this.animPlaying){this.animPlaying=!0,this.isLanguageHide=!this.isLanguageHide,this.updateExpandState();var t=this.languageScrollView.node.parent;this.isLanguageHide?cc.tween(t).to(.1,{height:0}).call(function(){e.animPlaying=!1,t.active=!1}).start():(t.active=!0,cc.tween(t).to(.1,{height:t.getChildByName("frame").height}).call(function(){e.animPlaying=!1}).start())}},showSetPanel:function(){this.updateSetPanel(),this.setPanel.active=!0},btnCloseSetPanel:function(){o.playEffect("click"),this.setPanel.active=!1,this.language!=i.language&&this.showRemindPanel(8)},rewardHandle:function(e,t,n,i,o,s,c,r){void 0===n&&(n=-1),void 0===i&&(i=-1),void 0===o&&(o=0),void 0===s&&(s=0),void 0===c&&(c=20),void 0===r&&(r=20);var l=this.rewardPanel.getChildByName("imageHolder");l.removeAllChildren(),console.log(t);for(var d=0;d<t.length;d++){var h=new cc.Node;h.parent=l;var u=h.addComponent(cc.Sprite),p="",m=t[d].split("/"),g=m[m.length-1];if(m.length>1)for(var f=0;f<m.length-1;f++)m[f]&&(p+=m[f]+"/");a.loadImage(u,e,p,g,function(e){0!=o&&0!=s&&console.log(e)})}console.log(l),n&&-1==i?i=Math.ceil(t.length/n):i&&-1==n&&(n=Math.ceil(t.length/i));var v=l.children;if(1==n&&1==i)v[0].x=0,v[0].y=0;else{if(0==o||0==s)return void console.log("\u8bf7\u6307\u5b9a\u6bcf\u4e2aitem\u7684\u5bbd\u9ad8");for(var y=i*(o+c)-c,S=n*(s+r)-r,C=0;C<v.length;C++){var T=C%n,w=Math.floor(C/i);v[C].x=-y/2+o/2+T*(o+c),v[C].y=S/2-s/2-w*(s+r)}}},showRewardPanel:function(e,t,n,i,a,o,s,c){void 0===n&&(n=-1),void 0===i&&(i=-1),void 0===a&&(a=0),void 0===o&&(o=0),void 0===s&&(s=20),void 0===c&&(c=20),this.rewardHandle(e,t,n,i,a,o,s,c),this.rewardPanel.active=!0},btnCloseRewardPanel:function(){this.rewardPanel.active=!1},showTutorialHandle:function(e,t,n,a,o){if(void 0===a&&(a=!1),this.tutorialNode){var s=this.tutorialNode.getChildByName("Mask"),c=s.children[0],r=this.tutorialNode.getChildByName("hand"),l=this.tutorialNode.getChildByName("label");r.stopAllActions(),t?(l.active=!0,l.getComponent(cc.Label).string=i.translateString(t)):l.active=!1,this.tutorialNode.active=!0;var d=e.parent.convertToWorldSpaceAR(e.position);d=this.tutorialNode.convertToNodeSpaceAR(d),n&&(d.x=d.x-n.node.x,d.y=d.y-n.node.y),0==e.anchorY?d.y+=e.height/2:1==e.anchorY&&(d.y-=e.height/2),0==e.anchorX?d.x+=e.width/2:1==e.anchorX&&(d.x-=e.width/2);var h,u,p=cc.v2(d.x,d.y);r.position=p,console.log(p);var m=cc.v2(d.x,d.y),g=e.width,f=e.height;a&&(1==o.type?(void 0!==o.moveX&&(m.x=p.x+o.moveX,g+=Math.abs(o.moveX)),void 0!==o.addW&&(g+=o.addW),void 0!==o.moveY&&(m.y=p.y+o.moveY,f+=Math.abs(o.moveY)),void 0!==o.addH&&(f+=o.addH)):2==o.type&&(console.log(o.targetNode),m=o.targetNode.parent.convertToWorldSpaceAR(o.targetNode.position),m=this.tutorialNode.convertToNodeSpaceAR(m),o.camera&&(m.x=m.x-o.camera.node.x,m.y=m.y-o.camera.node.y),g+=Math.abs(m.x-p.x),f+=Math.abs(m.y-p.y),void 0!==o.addW&&(g+=o.addW),void 0!==o.addH&&(f+=o.addH))),a?(h=p.x>m.x?p.x+e.width/2-g/2:p.x-e.width/2+g/2,u=p.y>m.y?p.y+e.height/2-f/2:p.y-e.height/2+f/2):(h=p.x,u=p.y),s.position=cc.v2(h,u),c.position=cc.v2(-h,-u),s.width=g,s.height=f,a?(r.getComponent(cc.Animation).stop("hand-click"),cc.tween(r).to(1,{position:m}).delay(1).call(function(){r.position=p}).union().repeatForever().start()):r.getComponent(cc.Animation).play("hand-click")}else console.log("\u672a\u6307\u5b9a\u5f15\u5bfc\u8282\u70b9\uff0c\u8bf7\u68c0\u67e5")},hideTutorialNode:function(){this.tutorialNode?this.tutorialNode.active=!1:console.log("\u672a\u6307\u5b9a\u5f15\u5bfc\u8282\u70b9\uff0c\u8bf7\u68c0\u67e5")},coinMoveFunc:function(e,t,n){var i=this;if(n){var a=n.parent.convertToWorldSpaceAR(n.position);a=this.coinNode.parent.convertToNodeSpaceAR(a),this.coinNode.position=a}else this.coinNode.position=cc.v2(0,0);var o=e.parent.convertToWorldSpaceAR(e.position);o=this.coinNode.convertToNodeSpaceAR(o);for(var s=this.coinNode.children,c=function(e){var n=void 0;s[e]?n=s[e]:(n=cc.instantiate(s[0])).parent=i.coinNode,n.opacity=255;var a=n.position,c=.1*e;i.scheduleOnce(function(){try{cc.tween(n).to(.3,{position:o}).call(function(){n.opacity=0,4==e&&t&&t(),n.position=a}).start()}catch(i){}},c)},r=0;r<5;r++)c(r);console.log(this.coinNode)}}),cc._RF.pop()},{AudioModule:"AudioModule",EngineCommon:"EngineCommon",GameControl:"GameControl",LanguageModule:"LanguageModule"}],ScrollView:[function(e,t){"use strict";cc._RF.push(t,"2688e94a9NMZKpnjCdYxKuv","ScrollView");var n=e("EngineCommon"),i=e("LogCommon"),a=e("MathModule"),o=cc.Enum({HORIZONTAL:0,VERTICAL:1}),s=cc.Enum({CONTAINER:1,CHILD:2,SPACING:3});cc.Class({extends:cc.Component,properties:{scrollType:{type:o,default:o.VERTICAL,tooltip:"HORIZONTAL:\u6c34\u5e73\u6eda\u52a8,\n VERTICAL:\u5782\u76f4\u6eda\u52a8"},resizeMode:{type:s,default:s.CONTAINER,tooltip:"\u6c34\u5e73\u6ed1\u52a8\u9ad8/\u5782\u76f4\u6ed1\u52a8\u5bbd\u7684\u7f29\u653e\u65b9\u5f0f\n1.CONTAINER:\u6839\u636e\u5b50\u8282\u70b9\u5927\u5c0f\u548c\u95f4\u9694\u8ba1\u7b97\u5bb9\u5668\u7684\u5927\u5c0f\n2.CHILD:\u6839\u636e\u5bb9\u5668\u5927\u5c0f\u548c\u95f4\u9694\u5bf9\u5b50\u8282\u70b9\u7684\u5927\u5c0f\u8fdb\u884c\u7f29\u653e\n3.SPACING:\u6839\u636e\u5bb9\u5668\u548c\u5b50\u8282\u70b9\u5927\u5c0f\u8ba1\u7b97\u51fa\u95f4\u9694"},unitNum:{default:1,tooltip:"\u5782\u76f4\u8bbe\u7f6e\u5217\n\u6c34\u5e73\u8bbe\u7f6e\u884c\n\u9ed8\u8ba41\u884c1\u5217"},paddingT:{default:0},paddingB:{default:0},paddingL:{default:0},paddingR:{default:0},spacingX:{default:0,tooltip:"\u76f8\u90bb\u5b50\u8282\u70b9\u4e4b\u95f4\u7684\u6c34\u5e73\u8ddd\u79bb",visible:function(){return this.scrollType===o.HORIZONTAL||this.unitNum>1}},spacingY:{default:0,tooltip:"\u76f8\u90bb\u5b50\u8282\u70b9\u4e4b\u95f4\u7684\u5782\u76f4\u8ddd\u79bb",visible:function(){return this.scrollType===o.VERTICAL||this.unitNum>1}},itemPrefab:cc.Prefab,scriptName:{default:"",tooltip:"\u5b50\u8282\u70b9\u7684\u63a7\u5236\u811a\u672c"},isRoot:{default:!0,tooltip:"\u811a\u672c\u662f\u5426\u662f\u5728\u5b50\u8282\u70b9\u7684\u6839\u8282\u70b9\u4e0a"},path:{default:"",tooltip:"\u811a\u672c\u6240\u5728\u8282\u70b9\u76f8\u5bf9\u4e8e\u6839\u8282\u70b9\u8def\u5f84",visible:function(){return!this.isRoot}},isOptimize:{default:!0,tooltip:"\u662f\u5426\u4f18\u5316\u5904\u7406\ntrue:\u52a0\u8f7d\u56fa\u5b9a\u6570\u91cf  \nfalse:\u52a0\u8f7d\u5168\u90e8"},isVariable:{default:!1,tooltip:"\u6ed1\u52a8\u6761\u957f\u5ea6\u662f\u53ef\u53d8\u7684"},maxLen:{default:0,tooltip:"\u6ed1\u52a8\u6761\u957f\u5ea6\u53ef\u53d8\u7684\u60c5\u51b5\u4e0b\u6700\u5927\u957f\u5ea6",visible:function(){return this.isVariable}}},onLoad:function(){this.node.on("loadData",this.loadData,this),this.node.on("updateItem",this.updateItem,this),this.node.on("updatePos",this.updatePos,this)},start:function(){},initData:function(){if(this.isInit||(this.isOptimize&&n.addScrollEvent(this.node.parent.parent,this.node,"ScrollView","onScrollRectScrolled"),this.isInit=!0),this.itemScale=this.itemPrefab.data.scale,this.resizeMode==s.CONTAINER){if(0==this.itemPrefab.data.width||0==this.itemPrefab.data.height)return void console.log("\u8bf7\u5148\u8bbe\u7f6e\u9884\u5236\u4f53\u7684\u5927\u5c0f");this.itemW=this.itemPrefab.data.width*this.itemScale,this.itemH=this.itemPrefab.data.height*this.itemScale,this.scrollType==o.HORIZONTAL?this.node.parent.parent.height=this.paddingT+this.paddingB+this.unitNum*(this.itemH+this.spacingY)-this.spacingY:this.node.parent.parent.width=this.paddingL+this.paddingR+this.unitNum*(this.itemH+this.spacingX)-this.spacingX}else if(this.resizeMode==s.CHILD){var e;e=this.scrollType==o.HORIZONTAL?(this.node.parent.parent.height-this.paddingT-this.paddingB-(this.unitNum-1)*this.spacingY)/this.unitNum/this.itemPrefab.data.height:(this.node.parent.parent.width-this.paddingL-this.paddingR-(this.unitNum-1)*this.spacingX)/this.unitNum/this.itemPrefab.data.width,this.itemScale=e,this.itemW=this.itemPrefab.data.width*e,this.itemH=this.itemPrefab.data.height*e}else this.resizeMode==s.SPACING&&(this.itemW=this.itemPrefab.data.width*this.itemScale,this.itemH=this.itemPrefab.data.height*this.itemScale,this.scrollType==o.HORIZONTAL?1==this.unitNum?this.spacingY=0:this.spacingY=(this.node.parent.parent.height-this.paddingT-this.paddingB-this.unitNum*this.itemH)/(this.unitNum-1):1==this.unitNum?this.spacingX=0:this.spacingX=(this.node.parent.parent.width-this.paddingL-this.paddingR-this.unitNum*this.itemW)/(this.unitNum-1));this.scrollType==o.HORIZONTAL?(this.node.parent.width=this.node.parent.parent.width,this.node.parent.height=this.node.parent.parent.height,this.node.height=this.node.parent.parent.height):(this.node.parent.width=this.node.parent.parent.width,this.node.parent.height=this.node.parent.parent.height,this.node.width=this.node.parent.parent.width);var t=0;this.scrollType==o.HORIZONTAL?(t=this.node.parent.parent.width,this.maxSize=Math.ceil((t-this.paddingL)/(this.itemW+this.spacingX))+2):(t=this.node.parent.parent.height,this.maxSize=Math.ceil((t-this.paddingT)/(this.itemH+this.spacingY))+2),this.frontNum=2,this.backNum=this.maxSize-1;var c=Math.ceil(this.len/this.unitNum);if(this.scrollType==o.VERTICAL){var r=this.paddingT+this.paddingB+(this.itemH+this.spacingY)*c-this.spacingY;if(this.node.height=r,this.isVariable&&(this.node.height<this.maxLen?this.node.parent.parent.height=r:this.node.parent.parent.height=this.maxLen),1==this.node.parent.anchorY?this.startPos=0:this.startPos=this.node.parent.parent.height/2,0==this.curDex||Math.abs(this.node.height-this.node.parent.parent.height)<5)this.node.y=this.startPos;else{var l=this.startPos+this.paddingT+Math.floor(this.curDex/this.unitNum)*(this.itemH+this.spacingY)-this.spacingY;l=a.clamp(this.startPos,l,this.startPos+this.node.height-this.node.parent.parent.height),this.node.y=l}i.debug("\u6ed1\u52a8\u6761\u9ad8\u5ea6"+this.node.parent.parent.height)}else{var d=this.paddingL+this.paddingR+(this.itemW+this.spacingX)*c-this.spacingX;if(this.node.width=d,this.isVariable&&(this.node.width<this.maxLen?this.node.parent.parent.width=d:this.node.parent.parent.width=this.maxLen),0==this.node.parent.anchorX?this.startPos=0:this.startPos=-this.node.parent.parent.width/2,0==this.curDex||Math.abs(this.node.width-this.node.parent.parent.width)<5)this.node.x=this.startPos;else{var h=this.startPos-this.paddingL-Math.floor(this.curDex/this.unitNum)*(this.itemW+this.spacingX)+this.spacingX;h=a.clamp(this.startPos-this.node.width+this.node.parent.parent.width,h,this.startPos),this.node.x=h}i.debug("\u6ed1\u52a8\u6761\u5bbd\u5ea6"+this.node.parent.parent.width)}this.maxDex=Math.floor((this.len-1)/this.unitNum)*this.unitNum,this.lastIndex=this.curDex,this.topIndex=this.curDex,this.bottomIndex=this.unitNum*(this.maxSize-1),this.bottomIndex>this.len-1&&(this.bottomIndex=this.unitNum*(c-1))},loadData:function(e,t,n,i){if(void 0===t&&(t=!1),void 0===n&&(n=0),void 0===i&&(i=!1),i||this.isOptimize||this.itemPrefab){this.jsonMsg=e,this.isHasClear=t,this.curDex=n,this.len=e.length+(t?1:0),this.initData();for(var a=this.node.children,o=0;o<a.length;o++)a[o].active=!1;var s=0;this.isOptimize?s=this.curDex+this.unitNum*this.maxSize:(n=0,s=this.len);for(var c=n;this.isOptimize&&c<s&&c<this.len||!this.isOptimize&&c<this.len;c++)this.initItemMsg(c,a[c-n])}else console.log("\u9884\u5236\u4f53\u4e0d\u80fd\u4e3a\u7a7a\uff0c\u8bf7\u8bbe\u7f6e")},initItemMsg:function(e,t){var n=null;t?n=t:(n=cc.instantiate(this.itemPrefab)).parent=this.node,n.scale=this.itemScale,n.active=!0;var i=n.getComponent(this.scriptName);if(i.posIndex=e,this.isHasClear?0==e?i.initItem(e):i.initItem(e,this.jsonMsg[e-1]):i.initItem(e,this.jsonMsg[e]),this.scrollType==o.VERTICAL){var a=-this.paddingT-this.itemH/2-Math.floor(e/this.unitNum)*(this.itemH+this.spacingY),s=-this.node.width/2+this.paddingL+this.itemW/2+e%this.unitNum*(this.itemW+this.spacingX);n.setPosition(s,a)}else{var c=this.paddingL+this.itemW/2+Math.floor(e/this.unitNum)*(this.itemW+this.spacingX),r=this.node.height/2-this.paddingT-this.itemH/2-e%this.unitNum*(this.itemH+this.spacingY);n.setPosition(c,r)}},updateTwoRowItem:function(e){var t=this.node.children;if(0==e){var n=t[this.topIndex].getComponent(this.scriptName).posIndex+this.maxSize*this.unitNum;if(n>=this.len)return;for(var i=this.topIndex;i<this.topIndex+this.unitNum&&n<this.len;i++,n++)this.initItemMsg(n,t[i]);this.bottomIndex=this.topIndex,this.topIndex+=this.unitNum,this.topIndex>(this.maxSize-1)*this.unitNum&&(this.topIndex=0)}else if(1==e){var a=t[this.bottomIndex].getComponent(this.scriptName).posIndex-this.unitNum*this.maxSize;if(a<0)return;for(var o=this.bottomIndex;o<this.bottomIndex+this.unitNum&&a<this.len;o++,a++)this.initItemMsg(a,t[o]);this.topIndex=this.bottomIndex,this.bottomIndex-=this.unitNum,this.bottomIndex<0&&(this.bottomIndex=this.unitNum*(this.maxSize-1))}},onScrollRectScrolled:function(){var e=-1;if(this.scrollType==o.VERTICAL){if(this.node.y<this.startPos)return;e=Math.floor((this.node.y-this.startPos-this.paddingT)/(this.itemH+this.spacingY))*this.unitNum}else{if(this.node.x>this.startPos)return;e=Math.floor((this.startPos-this.node.x-this.paddingL)/(this.itemW+this.spacingX))*this.unitNum}e!=this.lastIndex&&this.updateScrollView(e)},updateScrollView:function(e){if(e<this.lastIndex){if(this.lastIndex=e,e>this.maxDex-this.backNum*this.unitNum)return;this.updateTwoRowItem(1)}else if(e>this.lastIndex){if(this.lastIndex=e,e<this.frontNum*this.unitNum)return;this.updateTwoRowItem(0)}},updateItem:function(e){for(var t=this.node.children,n=0;n<t.length;n++){var i=t[n].getComponent(this.scriptName);i.id==e?i.selectedNode.active=!0:i.selectedNode.active=!1}},updatePos:function(e){void 0===e&&(e=-1);var t=this.node.children,n=t.length;if(this.scrollType==o.VERTICAL){var i=this.paddingT+this.paddingB+(this.itemH+this.spacingY)*n-this.spacingY;if(this.node.height=i,this.isVariable&&(this.node.height<this.maxLen?this.node.parent.parent.height=i:this.node.parent.parent.height=this.maxLen,1==this.node.parent.anchorY?this.startPos=0:this.startPos=this.node.parent.parent.height/2),e>=0)if(0==e||Math.abs(this.node.height-this.node.parent.parent.height)<5)this.node.y=this.startPos;else{var s=this.startPos+this.paddingT+Math.floor(e/this.unitNum)*(this.itemH+this.spacingY)-this.spacingY;s=a.clamp(this.startPos,s,this.startPos+this.node.height-this.node.parent.parent.height),this.node.y=s}}else{var c=this.paddingL+this.paddingR+(this.itemW+this.spacingX)*n-this.spacingX;if(this.node.width=c,this.isVariable&&(this.node.width<this.maxLen?this.node.parent.parent.width=c:this.node.parent.parent.width=this.maxLen,0==this.node.parent.anchorX?this.startPos=0:this.startPos=-this.node.parent.parent.width/2),e>=0)if(0==e||Math.abs(this.node.width-this.node.parent.parent.width)<5)this.node.x=this.startPos;else{var r=this.startPos-this.paddingL-Math.floor(e/this.unitNum)*(this.itemW+this.spacingX)+this.spacingX;r=a.clamp(this.startPos-this.node.width+this.node.parent.parent.width,r,this.startPos),this.node.x=r}}for(var l=0;l<t.length;l++)if(this.scrollType==o.VERTICAL){var d=-this.paddingT-this.itemH/2-Math.floor(l/this.unitNum)*(this.itemH+this.spacingY),h=-this.node.width/2+this.paddingL+this.itemW/2+l%this.unitNum*(this.itemW+this.spacingX);t[l].setPosition(h,d)}else{var u=this.paddingL+this.itemW/2+Math.floor(l/this.unitNum)*(this.itemW+this.spacingX),p=this.node.height/2-this.paddingT-this.itemH/2-l%this.unitNum*(this.itemH+this.spacingY);t[l].setPosition(u,p)}}}),cc._RF.pop()},{EngineCommon:"EngineCommon",LogCommon:"LogCommon",MathModule:"MathModule"}],SignPanel:[function(e,t){"use strict";cc._RF.push(t,"c71632Wf2hM9IKU6o0rx4zm","SignPanel");var n=e("GameControl"),i=e("StorageModule"),a=e("TimeModule"),o=e("EngineCommon"),s=e("GameCommon"),c=e("AdInfo"),r=e("LanguageModule"),l=e("AudioModule"),d=e("PanelBase");cc.Class({extends:d,properties:{dayHolder:cc.Node},start:function(){this.sizeFit(),this.initPanel()},sizeFit:function(){this.node.getChildByName("bottom").width=cc.winSize.width},initPanel:function(){this.days=this.dayHolder.children;var e=i.getData("signFirstDate");e||(e=a.getCurrentDate(),i.setData("signFirstDate",e));for(var t=i.getJsonData("SignInDateAry",[]),n=a.getDaysBetween(e,a.getCurrentDate()),s=0;s<this.days.length;s++){var c;c=s==n?t[s]?3:1:s<n?t[s]?3:2:0,this.initDayBtn(s),this.updateDayBtn(s,c),1!=c&&2!=c||o.addClickEvent(this.days[s],this.node,"SignPanel","btnSign",s)}},initDayBtn:function(e){var t=parseInt(e)+1;this.days[e].getChildByName("label").getComponent(cc.Label).string="DAY"+t,isNaN(n.signReward[e])||(this.days[e].getChildByName("reward").getComponent(cc.Label).string="X"+n.signReward[e])},updateDayBtn:function(e,t){0==t?(this.days[e].getChildByName("select").active=!1,this.days[e].getChildByName("obtained").active=!1,this.days[e].getChildByName("signVideo").active=!1):1==t?(this.days[e].getChildByName("select").active=!0,this.days[e].getChildByName("obtained").active=!1,this.days[e].getChildByName("signVideo").active=!1):2==t?(this.days[e].getChildByName("select").active=!1,this.days[e].getChildByName("obtained").active=!1,this.days[e].getChildByName("signVideo").active=isHasAd):3==t&&(this.days[e].removeComponent(cc.Button),this.days[e].getChildByName("select").active=!1,this.days[e].getChildByName("obtained").active=!0,this.days[e].getChildByName("signVideo").active=!1)},btnSign:function(e,t){var n=this;s.isCanClick()&&(l.playEffect("click"),console.log("\u7b7e\u5230"),this.days[t].getChildByName("signVideo").active?c.adsManager.showVideo("sign",function(e){e&&n.rewardHandle(t)}):this.days[t].getChildByName("select").active&&this.rewardHandle(t))},rewardHandle:function(e){var t=i.getJsonData("SignInDateAry",[]);if(t[e]=1,i.setJsonData("SignInDateAry",t),isNaN(n.signReward[e])){var a="cats/"+n.signReward[e];n.remindPanelCtrl.showRewardPanel(n.catBundle,[a],1,1);var o=n.getIndexBySkinName(n.signReward[e]),s="petal"+o;i.setData(s,1),n.curScene.generateOnePetal(o,0)}else{var c="\u606d\u559c\u83b7\u5f97&1\u4e2a\u94c3\u94db";c=(c=r.translateString(c)).replace("&1",n.signReward[e]),n.remindPanelCtrl.showSimpleRemind(c,!1),"wx"==channel?n.updateBellNum(n.curScene.bellLabel,n.signReward[e]):n.remindPanelCtrl.coinMoveFunc(n.curScene.bellLabel.node,function(){n.updateBellNum(n.curScene.bellLabel,n.signReward[e])},this.days[e])}this.updateDayBtn(e,3);for(var l=0,d=0;d<t.length;d++)1==t[d]&&l++;7==l&&(this.node.active=!1,n.curScene.signHandle())},btnClose:function(){l.playEffect("click"),this.node.active=!1}}),cc._RF.pop()},{AdInfo:"AdInfo",AudioModule:"AudioModule",EngineCommon:"EngineCommon",GameCommon:"GameCommon",GameControl:"GameControl",LanguageModule:"LanguageModule",PanelBase:"PanelBase",StorageModule:"StorageModule",TimeModule:"TimeModule"}],Sketch:[function(e,t){"use strict";cc._RF.push(t,"3bfefnlAWJJBpiiyirEh1Go","Sketch");var n=e("ToyBase"),i=e("MathModule"),a=e("EngineCommon");cc.Class({extends:n,properties:{},start:function(){this.animationIndex=0,this.animationName=["Idle","play-bad","play-good"],this.init()},toyHandle:function(){this.animationIndex=i.rangeRandom(1,3),this.playAnimationByState(this.animationIndex)},catHandle:function(){var e=this.holder.children[0].getComponent("Cat");a.spineAnimationPlay(e.skeleton,["","play-huahua-bad","play-huahua-good"][this.animationIndex])}}),cc._RF.pop()},{EngineCommon:"EngineCommon",MathModule:"MathModule",ToyBase:"ToyBase"}],SlidePool:[function(e,t){"use strict";cc._RF.push(t,"6927czGtlVD34dNAuYenZfA","SlidePool");var n=e("ToyBase"),i=e("MathModule"),a=e("LoadResModule"),o=e("GameControl");cc.Class({extends:n,properties:{animation:cc.Animation,ballHolder:cc.Node,ballPrefab:cc.Prefab},start:function(){var e=this;this.animationName=["slidePoolIdle","slidePoolPlay"],this.init(),this.node.on("generateOneBall",this.generateOneBall,this),a.loadLocalRes("ball",function(t){e.balls=t.getSpriteFrames(),e.generateBalls()},cc.SpriteAtlas),this.animation.on(cc.Animation.EventType.FINISHED,function(t,n){n._name==e.animationName[1]&&e.interactionEnd()},this.node)},playAnimationByState:function(e){this.animation.play(this.animationName[e])},pauseAnimationState:function(e){this.animation.pause(this.animationName[e])},toyHandle:function(){var e=this,t=this.holder.children[0].getComponent("Cat");t.playAnimationByState(o.catState.happyIdle),this.playAnimationByState(1),this.scheduleOnce(function(){e.pauseAnimationState(1),t.playAnimationByState(o.catState.inAir),cc.tween(e.holder.children[0]).to(.4,{y:80}).to(.4,{y:0}).call(function(){try{t.playAnimationByState(o.catState.happyWalk),e.playAnimationByState(1),e.addForceToBall(1.2,1.2)}catch(n){console.log(n)}}).start()},1.8),this.scheduleOnce(function(){e.pauseAnimationState(1),t.playAnimationByState(o.catState.inAir),cc.tween(e.holder.children[0]).to(.4,{y:80}).to(.4,{y:0}).call(function(){try{t.playAnimationByState(o.catState.happyWalk),e.playAnimationByState(1),e.addForceToBall(1.2,1.2)}catch(n){console.log(n)}}).start()},4.6)},catHandle:function(){},generateBalls:function(){var e=this;if(this.balls){console.log("generateBalls");for(var t=cc.v2(-100,150),n=0;n<12;n++){var a=i.rangeRandom(0,5),o=Math.floor(n/4),s=cc.instantiate(this.ballPrefab);s.parent=this.ballHolder,s.setPosition(t.x+24*o,t.y-n%4*24),s.getComponent(cc.Sprite).spriteFrame=this.balls[a]}this.scheduleOnce(function(){try{e.addForce()}catch(t){console.log(t)}},.2)}},generateOneBall:function(){var e=i.rangeRandom(0,5),t=cc.instantiate(this.ballPrefab);t.parent=this.ballHolder,t.position=cc.v2(i.rangeRandom(-70,70),i.rangeRandom(100,150)),t.getComponent(cc.Sprite).spriteFrame=this.balls[e],this.addForceToOneBall(t)},addForce:function(){for(var e=this.ballHolder.children,t=0;t<e.length;t++){var n=e[t].getComponent(cc.RigidBody),i=(e[t].x+236)*(.2*Math.random()+.6);n.applyLinearImpulse(cc.v2(i,0),n.getWorldCenter(),!0)}},addForceToBall:function(e,t){void 0===e&&(e=1.5),void 0===t&&(t=1.5);for(var n=this.ballHolder.children,i=0;i<n.length;i++){var a=n[i].getComponent(cc.RigidBody);a.applyLinearImpulse(cc.v2(n[i].x*e,(n[i].y+300)*t),a.getWorldCenter(),!0)}},addForceToOneBall:function(e){var t=e.getComponent(cc.RigidBody);t.applyLinearImpulse(cc.v2(i.rangeRandom(-50,50),0),t.getWorldCenter(),!0)}}),cc._RF.pop()},{GameControl:"GameControl",LoadResModule:"LoadResModule",MathModule:"MathModule",ToyBase:"ToyBase"}],StatisticsModule:[function(e,t){"use strict";cc._RF.push(t,"8d19czV49xAj6bK/dyINC8L","StatisticsModule");var n=e("tdsdk"),i=e("tdwxsdk"),a=e("LogCommon"),o=e("NativePlatformCommon");t.exports={appKey:"",isStatisticsInit:!1,gameSceneScheduler:null,curSceneName:"",sceneMsg:{},statisticsInit:function(e){void 0===e&&(e=!0),this.isStatisticsInit||(this.isStatisticsInit=!0,a.debug("statisticsInit"),e&&this.sceneStatisticsInit(),"apk"==channel||"ios"==channel)||(""!=this.appKey?cc.sys.platform==cc.sys.WECHAT_GAME?i.Init(this.appKey,"\u5fae\u4fe1\u5c0f\u6e38\u620f","123456","1.0","1",channel):n.Init(this.appKey,"1.0","1",channel,!0):a.warn("\u8bf7\u5148\u8bbe\u7f6etalking data\u5bf9\u5e94\u7684appKey,\u624d\u80fd\u8fdb\u884c\u521d\u59cb\u5316"))},sceneStatisticsInit:function(){a.debug("sceneStatisticsInit"),this.gameSceneScheduler=cc.director.getScheduler(),this.gameSceneScheduler.enableForTarget(this)},eventStatistics:function(e,t){0!=this.isStatisticsInit?(t?a.debug("melesdk StatisticsModule:eventStatistics name="+e+",value="+t):a.debug("melesdk StatisticsModule:eventStatistics name="+e),cc.sys.platform!=cc.sys.DESKTOP_BROWSER&&("apk"==channel||"ios"==channel?o.eventStatistics(e,t):this.miniGameStatistics(e,t))):console.log("melesdk StatisticsModule:\u8bf7\u5148\u8c03\u7528statisticsInit\u65b9\u6cd5\u8fdb\u884c\u521d\u59cb\u5316")},miniGameStatistics:function(e,t){e=channel+"_"+e;var a={};t&&(a.key1=t.toString()),cc.sys.platform!==cc.sys.WECHAT_GAME?t?n.onEvent(e,"",a):n.onEvent(e):t?i.onEvent({id:e,params:a}):i.onEvent({id:e})},sceneStart:function(e){e?""==this.curSceneName||this.curSceneName==e?this.curSceneName!=e&&(this.curSceneName=e,this.gameSceneScheduler.schedule(this.countStatistics,this,2)):console.log("melesdk StatisticsModule:\u8bf7\u5148\u7ed3\u675f\u4e0a\u4e00\u4e2a\u573a\u666f"+this.curSceneName+"\u7684\u7edf\u8ba1\u518d\u5f00\u59cb\u7edf\u8ba1\u4e0b\u4e00\u4e2a\u573a\u666f"+e):console.log("melesdk StatisticsModule:\u8bf7\u4f20\u5165\u8981\u7edf\u8ba1\u7684\u573a\u666f\u540d")},sceneEnd:function(){this.curSceneName="",this.gameSceneScheduler.unschedule(this.countStatistics,this)},countStatistics:function(){if(void 0!==this.sceneMsg[this.curSceneName]&&null!==this.sceneMsg[this.curSceneName]||(this.sceneMsg[this.curSceneName]=0),this.sceneMsg[this.curSceneName]+=2,this.sceneMsg[this.curSceneName]>=30){this.sceneMsg[this.curSceneName]=0;var e="time_"+this.curSceneName;this.eventStatistics(e)}}},cc._RF.pop()},{LogCommon:"LogCommon",NativePlatformCommon:"NativePlatformCommon",tdsdk:"tdsdk",tdwxsdk:"tdwxsdk"}],StorageModule:[function(e,t){"use strict";cc._RF.push(t,"f6a2dn/hwJH76vJxHwc1zYa","StorageModule"),t.exports={setData:function(e,t){e?cc.sys.localStorage.setItem(e,t):console.log("melesdk StorageModule:\u8bf7\u4f20\u5165\u5408\u6cd5\u7684key\u503c")},getData:function(e,t){if(void 0===t&&(t=null),e){var n=cc.sys.localStorage.getItem(e);return""===n||null==n?void 0===t?n:t:n}console.log("melesdk StorageModule:\u8bf7\u4f20\u5165\u5408\u6cd5\u7684key\u503c")},setJsonData:function(e,t){e?cc.sys.localStorage.setItem(e,JSON.stringify(t)):console.log("melesdk StorageModule:\u8bf7\u4f20\u5165\u5408\u6cd5\u7684key\u503c")},getJsonData:function(e,t){if(void 0===t&&(t=null),e){var n=cc.sys.localStorage.getItem(e);return""===n||null==n?void 0===t?n:t:JSON.parse(n)}console.log("melesdk StorageModule:\u8bf7\u4f20\u5165\u5408\u6cd5\u7684key\u503c")},removeKey:function(e){e?cc.sys.localStorage.removeItem(e):console.log("melesdk StorageModule:\u8bf7\u4f20\u5165\u5408\u6cd5\u7684key\u503c")}},cc._RF.pop()},{}],Swing:[function(e,t){"use strict";cc._RF.push(t,"3eb31hiRylGK4w97IcRaTIV","Swing");var n=e("ToyBase"),i=e("EngineCommon"),a=e("MathModule");cc.Class({extends:n,properties:{},start:function(){var e=this;this.animationName=["Idle","play"],this.init(),this.skeleton.setCompleteListener(function(t){"play"==(t.animation?t.animation.name:"")&&(e.curPlayTimes++,e.curPlayTimes==e.playTimes?e.interactionEnd():e.playAnimationByState(1))})},toyHandle:function(){this.curPlayTimes=0,this.playTimes=a.rangeRandom(5,10),this.playAnimationByState(1)},catHandle:function(){var e=this.holder.children[0].getComponent("Cat");i.spineAnimationPlay(e.skeleton,"sitIdle")}}),cc._RF.pop()},{EngineCommon:"EngineCommon",MathModule:"MathModule",ToyBase:"ToyBase"}],Synthesize:[function(e,t){"use strict";cc._RF.push(t,"7e9cau647NJ07TXpKGj2OMY","Synthesize");var n=e("ToyBase"),i=e("GameControl"),a=e("StorageModule"),o=e("EngineCommon"),s=e("AudioModule");cc.Class({extends:n,properties:{holder1:cc.Node,remindNode:cc.Node,petalSprite:cc.Sprite,catSprite1:cc.Sprite,catSprite2:cc.Sprite,catSprite3:cc.Sprite},start:function(){var e=this;this.animationName=["Idle","success","fail"],this.init(3),this.skeleton.setCompleteListener(function(t){var n=t.animation?t.animation.name:"";n!=e.animationName[0]&&(e.interactionEnd(),"success"==n&&e.synthesizeSuc())}),this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.remindShowY=200,this.remindHideY=-275,this.remindState=0,this.petalSprite.node.active=!1,this.hideRemind(),this.checkRemindState()},toyHandle:function(){var e=this,t=this.holder.children[0].getComponent("Cat"),n=this.holder1.children[0].getComponent("Cat");console.log(this.synIndex1,this.synIndex2,t.index,n.index),t.index==this.synIndex1&&n.index==this.synIndex2||n.index==this.synIndex1&&t.index==this.synIndex2?(this.state=4,this.remindState=0,this.playAnimationByState(1),this.scheduleOnce(function(){e.petalSprite.node.active=!0},2),this.hideRemind(),s.playEffect("synthesizeSuc")):(this.state=5,this.playAnimationByState(2),setTimeout(function(){s.playEffect("synthesizeFail")},1e3))},catHandle:function(){var e=this.holder.children[0].getComponent("Cat"),t=this.holder1.children[0].getComponent("Cat");4==this.state?(o.spineAnimationPlay(e.skeleton,"play-zhajiaoji-success"),o.spineAnimationPlay(t.skeleton,"play-zhajiaoji-success")):(o.spineAnimationPlay(e.skeleton,"play-zhajiaoji-fail"),o.spineAnimationPlay(t.skeleton,"play-zhajiaoji-fail"))},updateState:function(){this.state=0},synthesizeSuc:function(){this.petalSprite.node.active=!1;var e="petal"+this.synIndex3;a.setData(e,1),i.curScene.generateOnePetal(this.synIndex3,0),this.checkRemindState()},showRemind:function(){this.remindNode.active=!0,cc.tween(this.remindNode).to(.3,{y:this.remindShowY,scale:1}).start()},hideRemind:function(){var e=this;this.remindNode.active&&cc.tween(this.remindNode).to(.3,{y:this.remindHideY,scale:0}).call(function(){e.remindNode.active=!1}).start()},checkRemindState:function(){if(1!=this.remindState){this.synIndex1=-1,this.synIndex2=-1;var e=i.curScene.checkIsSynthesis();e&&(1==e.split("&")[0]?this.remindState=1:this.remindState=2,this.updateContent(e),this.showRemind(),2==this.remindState&&this.scheduleOnce(function(){try{this.hideRemind()}catch(e){console.log(e)}}.bind(this),8))}else this.remindNode.active||this.showRemind()},updateContent:function(e){var t=e.split("&"),n=t[3],s=i.getSkinNameByIndex(n);o.loadImage(this.catSprite3,i.catBundle,"cats/",s),this.synIndex3=n,o.loadImage(this.petalSprite,i.catBundle,"petals/",s),this.synIndex1=parseInt(t[1]),s=i.getSkinNameByIndex(this.synIndex1);var c="petal"+this.synIndex1,r=a.getData(c,0);2==r?o.loadImage(this.catSprite1,i.catBundle,"cats/",s):o.loadImage(this.catSprite1,i.catBundle,"petals/",s),this.synIndex2=parseInt(t[2]),s=i.getSkinNameByIndex(this.synIndex2),c="petal"+this.synIndex2,2==(r=a.getData(c,0))?o.loadImage(this.catSprite2,i.catBundle,"cats/",s):o.loadImage(this.catSprite2,i.catBundle,"petals/",s)},onTouchStart:function(e){i.curScene.onTouchStart(e),this.startPosition=e.touch.getLocation(),this.isMove=!1},onTouchMove:function(e){i.curScene.onTouchMove(e);var t=e.touch.getLocation();null==this.startPosition&&(this.startPosition=t),(Math.abs(t.x-this.startPosition.x)>10||Math.abs(t.y-this.startPosition.y)>10)&&(this.isMove=!0)},onTouchEnd:function(){if(0==this.isMove){if(4==this.state)return;this.checkRemindState()}this.isMove=!1}}),cc._RF.pop()},{AudioModule:"AudioModule",EngineCommon:"EngineCommon",GameControl:"GameControl",StorageModule:"StorageModule",ToyBase:"ToyBase"}],TTAd:[function(e,t){"use strict";cc._RF.push(t,"4df0dQn331GUoCgf+sboDAf","TTAd"),cc.Class({extends:cc.Component,properties:{bannerAd:null,videoAd:null,interstitialAd:null,interCloseTime:0,isInterLoad:!1,testFlag:!0,TTBannerId:"1029f5kai182e32m2k",TTInterId:"190odnkn1lg99tklpd",TTVideoId:"f4903cab61c2dihohg"},start:function(){},initAd:function(){cc.sys.platform!=cc.sys.DESKTOP_BROWSER&&(this.initInterstitial(),this.initVideo(),this.showBanner())},showBanner:function(){if("tt"==channel&&cc.sys.platform!=cc.sys.DESKTOP_BROWSER&&0!=gameManager.IsCanSupportFunc(0)){var e=this;null!=this.bannerAd&&(this.bannerAd.destroy(),this.bannerAd=null);var t=tt.getSystemInfoSync(),n=t.windowWidth,i=t.windowHeight,a=200;gameManager.IsCanSupportFunc(4)?this.bannerAd=tt.createBannerAd({adUnitId:e.TTBannerId,style:{width:a,top:i-a/16*9},adIntervals:30}):this.bannerAd=tt.createBannerAd({adUnitId:e.TTBannerId,style:{width:a,top:i-a/16*9}}),this.bannerAd.style.left=(n-a)/2,this.bannerAd.onResize(function(t){a!=t.width&&(a=t.width,e.bannerAd.style.left=(n-t.width)/2,e.bannerAd.style.top=i-t.height)}),this.bannerAd.onLoad(function(){e.bannerAd.show()}),this.bannerAd.onError(function(e){console.log("banner error"+e.errMsg+e.errCode)})}},hideBanner:function(){"tt"==channel&&cc.sys.platform!=cc.sys.DESKTOP_BROWSER&&0!=gameManager.IsCanSupportFunc(0)&&null!=this.bannerAd&&(this.bannerAd.destroy(),this.bannerAd=null)},initInterstitial:function(){if("tt"==channel&&cc.sys.platform!=cc.sys.DESKTOP_BROWSER&&0!=gameManager.IsCanSupportFunc(1)){var e=this;this.interstitialAd&&(this.interstitialAd.destroy(),this.interstitialAd=null),this.interstitialAd=tt.createInterstitialAd({adUnitId:e.TTInterId}),this.interstitialAd&&this.interstitialAd.onClose(function(){e.isInterLoad=!1,e.interCloseTime=gameManager.GetNowTime(),e.initInterstitial()}),this.interstitialAd&&this.interstitialAd.onError(function(){e.isInterLoad=!1}),this.interstitialAd&&this.interstitialAd.onLoad(function(){e.isInterLoad=!0})}},showInterstitial:function(){if("tt"==channel&&cc.sys.platform!=cc.sys.DESKTOP_BROWSER&&0!=gameManager.IsCanSupportFunc(1)){var e=this;gameManager.GetNowTime()-gameManager.startGameTime<3e4||gameManager.GetNowTime()-this.interCloseTime<6e4||(0!=this.isInterLoad?(this.isInterLoad=!1,this.interstitialAd&&this.interstitialAd.show().then(function(){}).catch(function(t){console.log("\u5e7f\u544a\u7ec4\u4ef6\u51fa\u73b0\u95ee\u9898",t),e.scheduleOnce(function(){e.interstitialAd.load().then(function(){})},3)})):null==this.interstitialAd?this.initInterstitial():this.interstitialAd&&this.interstitialAd.load())}},initVideo:function(){if("tt"==channel&&cc.sys.platform!=cc.sys.DESKTOP_BROWSER&&0!=gameManager.IsCanSupportFunc(2)){var e=this;this.videoAd||(this.videoAd=tt.createRewardedVideoAd({adUnitId:e.TTVideoId}),this.videoAd.onError(function(e){console.log("video error="+e.errMsg)}),this.videoAd.onLoad(function(){}),this.videoAd.onClose(function(t){try{e.interCloseTime=gameManager.GetNowTime(),t&&t.isEnded?(!e.VideoCallBack&&gameManager.adsManager.VideoShowHandle(),e.VideoCallBack&&e.VideoCallBack()):console.log("\u4e2d\u9014\u9000\u51fa"),gameManager.adsManager.VideoClose(),e.videoAd.load()}catch(n){console.log(n)}}.bind(this)))}},showVideo:function(){if("tt"==channel&&0!=gameManager.IsCanSupportFunc(2)){var e=this;if(null==this.videoAd)return this.initVideo(),void gameManager.adsManager.VideoFailHandle();this.videoAd.show().then(function(){callBack?e.VideoCallBack=callBack:e.VideoCallBack=null,gameManager.adsManager.VideoShow()}).catch(function(){e.videoAd.load().then(function(){console.log("\u624b\u52a8\u52a0\u8f7d\u6210\u529f")}),e.VideoCallBack=null,gameManager.adsManager.VideoFailHandle()})}else gameManager.adsManager.VideoFailHandle()}}),cc._RF.pop()},{}],TestToy:[function(e,t){"use strict";cc._RF.push(t,"73374dsveRMTLG56VHnLyq5","TestToy");var n=e("ToyBase");e("MathModule"),cc.Class({extends:n,properties:{},start:function(){var e=this;this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.skeleton.setCompleteListener(function(t){"Idle"!=(t.animation?t.animation.name:"")&&e.interactionEnd()})},playAnimationByState:function(e){0==e?this.skeleton.setAnimation(0,"Idle",!1):1==e&&this.skeleton.setAnimation(0,"play",!1)},toyHandle:function(){this.playAnimationByState(1)},catHandle:function(){this.holder.children[0].getComponent("Cat").skeleton.setAnimation(0,"lvguan-datie",!1)}}),cc._RF.pop()},{MathModule:"MathModule",ToyBase:"ToyBase"}],TimeModule:[function(e,t){"use strict";cc._RF.push(t,"cac33qWbV5GqpkEN5JmDwXI","TimeModule"),t.exports={getNowTime:function(){return(new Date).getTime()},getNowSeconds:function(){return Math.floor(this.getNowTime()/1e3)},getCurrentDate:function(e){void 0===e&&(e="-");var t=new Date;return t.getFullYear().toString()+e+(t.getMonth()+1).toString()+e+t.getDate().toString()},getDaysBetween:function(e,t,n){void 0===n&&(n="-");var i=e.split(n),a=t.split(n),o=new Date(parseInt(i[0]),parseInt(i[1])-1,parseInt(i[2])).getTime(),s=new Date(parseInt(a[0]),parseInt(a[1])-1,parseInt(a[2])).getTime();return Math.abs(o-s)/1e3/60/60/24},timeFormat:function(e,t,n){void 0===t&&(t=!0),void 0===n&&(n=":");var i=Math.floor(e/3600),a=t?Math.floor(e%3600/60):Math.floor(e/60),o=Math.floor(e%60);return i=i<10?"0"+i.toString():i.toString(),a=a<10?"0"+a.toString():a.toString(),o=o<10?"0"+o.toString():o.toString(),t?i+n+a+n+o:a+n+o}},cc._RF.pop()},{}],ToyBase:[function(e,t){"use strict";cc._RF.push(t,"78fbd3N9jxBjZPSCqluWp9B","ToyBase");var n=e("GameControl"),i=e("EngineCommon");cc.Class({extends:cc.Component,properties:{skeleton:sp.Skeleton,holder:cc.Node},init:function(e){void 0===e&&(e=1),"test"==cc.director.getScene().name&&this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.state=0,this.interactionState=e,this.colliderNum=0,this.playAnimationByState(0),this.node.on("interactionEnd",this.interactionEnd,this)},onTouchStart:function(){"test"==cc.director.getScene().name&&(console.log("start"),n.curScene.sk=this.skeleton,n.curScene.updateAnim())},playAnimationByState:function(e,t){void 0===t&&(t=!1),this.skeleton&&this.animationName&&this.animationName[e]&&i.spineAnimationPlay(this.skeleton,this.animationName[e],t)},onCollisionEnter:function(e,t){if(!n.isForbid()&&1==e.tag&&"drag"==e.node.group&&(0==this.state||1==this.state&&1==t.tag||2==this.state&&0==t.tag)){var i=e.node.getComponent("Cat");i.state==n.catState.drag&&(i.curColliderObj=this,i.curColliderTag=t.tag,0==this.colliderNum&&(this.node.stopAllActions(),cc.tween(this.node).to(.1,{scale:1.05}).start()),this.colliderNum++)}},onCollisionExit:function(e){if(!n.isForbid()&&1==e.tag&&"drag"==e.node.group){var t=e.node.getComponent("Cat");t.state==n.catState.drag&&(console.log("onCollisionExit"+e.node.name),t.curColliderObj=null,this.colliderNum--,0==this.colliderNum&&(this.node.stopAllActions(),cc.tween(this.node).to(.1,{scale:1}).start()))}},handleAfterPlace:function(){this.node.stopAllActions(),this.node.scale=1,this.colliderNum=0,this.state==this.interactionState&&this.interactionStart()},interactionStart:function(){this.toyHandle(),this.catHandle()},toyHandle:function(){},catHandle:function(){},interactionEnd:function(){var e=this;console.log("\u4e92\u52a8\u7ed3\u675f"),n.curScene.toyInteractionEnd(this.holder.children[0]),this.holder1&&n.curScene.toyInteractionEnd(this.holder1.children[0]),this.scheduleOnce(function(){e.state=0,e.playAnimationByState(0)},.5)}}),cc._RF.pop()},{EngineCommon:"EngineCommon",GameControl:"GameControl"}],Transfiguration:[function(e,t){"use strict";cc._RF.push(t,"c200eBw7EdA66W1+LT2IaNb","Transfiguration");var n=e("ToyBase"),i=e("MathModule"),a=e("EngineCommon");cc.Class({extends:n,properties:{},start:function(){this.animationName=["Idle","play-hudie-cg","play-hudie-sb","play-qingwa-cg","play-qingwa-sb","play-shibei-cg","play-shibei-sb"],this.init()},toyHandle:function(){this.isSuccess=Math.random()<.5,this.animationIndex=i.rangeRandom(1,4);var e=2*this.animationIndex-(this.isSuccess?1:0);this.playAnimationByState(e)},catHandle:function(){var e=this.holder.children[0].getComponent("Cat");this.isSuccess?a.spineAnimationPlay(e.skeleton,"play-bianxingke-cg"):a.spineAnimationPlay(e.skeleton,"play-bianxingke-sb")}}),cc._RF.pop()},{EngineCommon:"EngineCommon",MathModule:"MathModule",ToyBase:"ToyBase"}],Tree:[function(e,t){"use strict";cc._RF.push(t,"92ee1cxaOpGdYihHQVbEq0y","Tree");var n=e("ToyBase"),i=e("MathModule"),a=e("EngineCommon"),o=e("AudioModule");cc.Class({extends:n,properties:{},start:function(){this.animationIndex=0,this.init()},playAnimationByState:function(e){if(0==e){var t=parseInt(this.animationIndex)+1,n="Idle"+(1==t?"":t);a.spineAnimationPlay(this.skeleton,n)}else{var i=["play"+e,"Idle"+(parseInt(e)+1)];a.spineAnimationPlay(this.skeleton,i,!1,!0)}},toyHandle:function(){this.animationIndex=i.rangeRandom(1,4),this.playAnimationByState(this.animationIndex),setTimeout(function(){o.playEffect("tree")},1700)},catHandle:function(){var e=this.holder.children[0].getComponent("Cat");a.spineAnimationPlay(e.skeleton,"play-yuanyishu")}}),cc._RF.pop()},{AudioModule:"AudioModule",EngineCommon:"EngineCommon",MathModule:"MathModule",ToyBase:"ToyBase"}],VIVOAd:[function(e,t){"use strict";cc._RF.push(t,"b19b6OUB1xMPozeXJd4pBqm","VIVOAd");var n=e("AdInfo"),i=e("TimeModule");cc.Class({properties:{bannerAd:null,videoAd:null,interstitialAd:null,nativeAd:null,gameBannerAd:null,gamePortalAd:null,isInterLoad:!1,testFlag:!0,isShowBanner:!1,isShowGamePortal:!1,VIVOBannerId:"50b3d84248b9456eb78d3677df6940ed",VIVOInterId:"12ea54ba878445e4aaff9b8a58462b29",VIVOVideoId:"26835d15b7e64cdd8de6a83ecb2f04d7"},start:function(){},initAd:function(){cc.sys.platform!=cc.sys.DESKTOP_BROWSER&&(this.nativeAd=[],this.initVideo())},showBannerAndNative:function(e){!e&&(0==n.bannerType&&n.isBannerShow||1==n.bannerType&&n.isNativeBannerShow)||(0==n.bannerType?this.showBanner():(n.nativeControl.unschedule(this.showNativeBanner),this.showNativeBanner(),n.nativeControl.schedule(this.showNativeBanner,n.nativeIntervalTimes)))},showBanner:function(){var e=this;null==this.bannerAd?(this.bannerAd=qg.createBannerAd({adUnitId:e.VIVOBannerId}),e.bannerAd&&e.bannerAd.show().then(function(){n.isBannerShow=!0,e.hideNativeBanner()}),this.bannerAd&&this.bannerAd.onClose(function(){n.isBannerShow=!1}),this.bannerAd&&this.bannerAd.onLoad(function(){console.log("banner OnLoad\u6210\u529f---")}),this.bannerAd&&this.bannerAd.onError(function(t){n.isBannerShow=!1,console.log("banner\u5931\u8d25--"+t),0==n.bannerType&&e.bannerShowFail()})):this.bannerAd.show().then(function(){n.isBannerShow=!0,n.nativeControl.btnNativeAdClose(null,1)})},bannerShowFail:function(){0==n.bannerType?n.adsManager.ads.showNativeBanner():n.adsManager.ads.showBanner()},hideBannerAndNative:function(){this.hideBanner(),this.hideNativeBanner(),1==n.bannerType&&n.nativeControl.unschedule(n.adsManager.ads.showNativeBanner)},hideBanner:function(){null!=n.adsManager.ads.bannerAd&&(n.isBannerShow=!1,n.adsManager.ads.bannerAd.destroy(),n.adsManager.ads.bannerAd=null)},hideNativeBanner:function(){n.nativeControl.btnNativeAdClose(null,1)},showInterstitial:function(){var e=this;this.interstitialAd=qg.createInterstitialAd({posId:e.VIVOInterId}),this.interstitialAd&&this.interstitialAd.onError(function(e){console.log("\u63d2\u5c4f\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25",JSON.stringify(e))}),this.interstitialAd&&this.interstitialAd.show().then(function(){console.log("\u63d2\u5c4f\u5e7f\u544a\u5c55\u793a\u5b8c\u6210"),e.hideBannerAndNative()}).catch(function(e){console.log("\u63d2\u5c4f\u5e7f\u544a\u5c55\u793a\u5931\u8d25",JSON.stringify(e))}),this.interstitialAd&&this.interstitialAd.onClose(function(){n.interstitialCloseTime=i.getNowTime(),n.adsManager.showBanner()})},initVideo:function(){var e=this;this.videoAd=qg.createRewardedVideoAd({posId:e.VIVOVideoId}),this.videoAd.onError(function(t){switch(t.errCode){case-3:console.log("jswrapper:\u6fc0\u52b1\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25---\u8c03\u7528\u592a\u9891\u7e41",JSON.stringify(t));break;case-4:console.log("jswrapper:\u6fc0\u52b1\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25--- \u4e00\u5206\u949f\u5185\u4e0d\u80fd\u91cd\u590d\u52a0\u8f7d",JSON.stringify(t));break;case 30008:break;default:console.log("jswrapper:\u6fc0\u52b1\u5e7f\u544a\u5c55\u793a\u5931\u8d25"),console.log("jswrapper:"+JSON.stringify(t))}e.scheduleOnce(function(){e.videoAd.load()},15)}),this.videoAd.onLoad(function(){}),this.videoAd.onClose(function(t){t&&t.isEnded?rewardCallBack():console.log("\u4e2d\u9014\u9000\u51fa"),e.videoAd.load(),videoCloseBack(),n.isVideoLoad=!1})},showVideo:function(){var e=this;if(null==this.videoAd)return this.initVideo(),void videoFailCallBack();this.videoAd.show().then(function(){videoShowCallBack()}).catch(function(){e.videoAd.load().then(function(){console.log("\u624b\u52a8\u52a0\u8f7d\u6210\u529f")}),videoFailCallBack(),e.initVideo()})},showGamePortal:function(){var e=this;if(null!=this.gamePortalAd){if(this.isShowGamePortal)return;this.gamePortalAd.destroy(),this.gamePortalAd=null}qg.createBoxPortalAd?(this.gamePortalAd=qg.createBoxPortalAd({posId:e.VIVOGamePortalId,image:serverPath+"vivo/ad/moreGame.png",marginTop:250}),this.gamePortalAd.onError(function(){}),this.gamePortalAd.onClose(function(){n.isBannerShowing=!1,e.bannerHanle(),e.gamePortalAd.show()}),this.gamePortalAd.onShow(function(){e.hideBannerHanle(),n.isBannerShowing=!0}),this.gamePortalAd.show().then(function(){e.isShowGamePortal=!0})):console.log("\u6682\u4e0d\u652f\u6301\u4e92\u63a8\u76d2\u5b50\u76f8\u5173 API")},hideGamePortal:function(){null!=this.gamePortalAd&&(this.isShowGamePortal=!1,this.gamePortalAd.destroy())},showGameBanner:function(){if(!("vivo"!=channel||cc.sys.platform==cc.sys.DESKTOP_BROWSER||gameManager.systemInfo.platformVersionCode<1092)&&gameManager.isGameBanner){var e=this;qg.createBoxBannerAd?(e.gameBannerAd=qg.createBoxBannerAd({posId:e.VIVOGameBannerId}),e.gameBannerAd.onError(function(e){console.log("\u76d2\u5b50\u6a2a\u5e45\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25",e)}),e.gameBannerAd.show().then(function(){e.hideBannerHanle(),n.isBannerShowing=!0})):console.log("\u6682\u4e0d\u652f\u6301\u4e92\u63a8\u76d2\u5b50\u76f8\u5173 API")}},hideGameBanner:function(){null!=this.gameBannerAd&&(this.gameBannerAd.destroy(),this.gameBannerAd=null,n.isBannerShowing=!1,this.bannerHanle())},showNativeBanner:function(){n.adsManager.ads.showNativeAd(1,1,n.nativeControl.showNativeBanner)},showNativeIcon:function(){n.adsManager.ads.showNativeAd(0,1,n.nativeControl.showNativeIcon)},showNativeInter:function(){if(n.showInt)return n.interstitialShowAfter>(i.getNowTime()-n.gameStartTime)/1e3||(i.getNowTime()-n.interstitialCloseTime)/1e3<n.interstitialShowInterval1?(n.interstitialShowAfter>(i.getNowTime()-n.gameStartTime)/1e3&&console.log("\u8fdb\u5165\u6e38\u620f\u65f6\u95f4\u672a\u6ee130\u79d2"),void((i.getNowTime()-n.interstitialCloseTime)/1e3<n.interstitialShowInterval1&&console.log("\u8ddd\u79bb\u4e0a\u4e00\u6b21\u5173\u95ed\u63d2\u5c4f\u672a\u6ee130\u79d2"))):void n.adsManager.ads.showNativeAd(2,2,n.nativeControl.showNativeInter)},showNativeAd:function(e,t,i){var a=this,o="";0==e?o=a.VIVONativeIconId:1==e?o=a.VIVONativeBannerId:2==e&&(o=a.VIVONativeInterId),this.nativeAd[e]=qg.createNativeAd({adUnitId:o}),this.nativeAd[e]&&this.nativeAd[e].onLoad(function(o){var s;if(i&&o&&o.adList){if(s=o.adList.pop(),0==t)i(s.adId,s.icon);else if(1==t)i(s.adId,s.title,s.desc);else if(2==t){var c="";1==e&&""!=(c=s.imgUrlList[0])&&null!=c||(c=s.icon),i(s.adId,s.title,s.desc,c)}a.nativeAd[e].reportAdShow({adId:s.adId.toString()}),1==e?(n.isNativeBannerShow=!0,a.hideBanner(),n.nativeBannerAdId=o.adList[0].adId):2==e&&(n.isNativeBannerShow=!0,a.hideBannerAndNative(),n.nativeBannerAdId=o.adList[0].adId)}}),this.nativeAd[e]&&this.nativeAd[e].onError(function(t){var i="\u65e0";switch(""+e){case"0":i="\u56fe\u6807\u5e7f\u544a";break;case"1":i="banner\u5e7f\u544a";break;case"2":i="\u63d2\u5c4f\u5e7f\u544a"}switch(1==e&&1==n.bannerType&&a.bannerShowFail(),console.log("\u539f\u751f\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25, \u5e7f\u544a\u7c7b\u578b:"+i+", \n                err type:"+_typeof2(t)+", errCode:"+t.errCode+",\n                \u9519\u8bef\u4fe1\u606f:"+JSON.stringify(t)),""+t.errCode){case"-3":case"30009":break;default:console.log("zmx \u975e\u9891\u7387\u8fc7\u9ad8\u5bfc\u81f4\u7684\u52a0\u8f7d\u5931\u8d25, \u7edf\u4e00\u5173\u95ed\u5b9a\u65f6\u5668, "+i)}}),this.nativeAd[e]&&this.nativeAd[e].load()},clickNativeAd:function(e,t){this.nativeAd[t]&&this.nativeAd[t].reportAdClick({adId:""+e})},hideNativeAd:function(e){this.nativeAd[e]&&(this.nativeAd[e]=null,1==e?(n.nativeBannerAdId=null,n.isNativeBannerShow=!1):2==e&&(n.interstitialCloseTime=i.getNowTime(),n.adsManager.showBanner()))}}),cc._RF.pop()},{AdInfo:"AdInfo",TimeModule:"TimeModule"}],Vending:[function(e,t){"use strict";cc._RF.push(t,"046f4P1mCxAU7TQ9qPLPSuO","Vending");var n=e("ToyBase"),i=e("MathModule"),a=e("EngineCommon");cc.Class({extends:n,properties:{},start:function(){this.animationName=["Idle","play1","play2","play3"],this.init()},toyHandle:function(){this.animationIndex=i.rangeRandom(1,4),this.playAnimationByState(this.animationIndex)},catHandle:function(){var e=this.holder.children[0].getComponent("Cat");a.spineAnimationPlay(e.skeleton,["","play-fanmaiji1","play-fanmaiji2","play-fanmaiji3"][this.animationIndex])}}),cc._RF.pop()},{EngineCommon:"EngineCommon",MathModule:"MathModule",ToyBase:"ToyBase"}],WXAd:[function(e,t){"use strict";cc._RF.push(t,"00db4TE9vdOqpIIk54viwF/","WXAd");var n=e("AdInfo"),i=e("TimeModule");cc.Class({properties:{bannerAd:null,interstitialAd:null,videoAd:null,WXInterId:"adunit-c9b4a772124b0f66"},start:function(){},initAd:function(e){this.WXBannerIdAry=["adunit-2058313e81e2c743"],this.wxBannerAds=new Array(this.WXBannerIdAry.length),this.wxBannerAds.fill(null),this.isWXBannerOnLoad=new Array(this.WXBannerIdAry.length),this.isWXBannerOnLoad.fill(0),this.bannerShowIndex=0,this.WXVideoId="adunit-f5743b74ea5db509",this.customId=["adunit-28c3208142a6d053","adunit-3b5fcba7d70ec32a","adunit-c67e404e551cc431","adunit-95099e1b03c861a2","adunit-a6c6b8bfec315584"],this.customAd=[],this.customLoad=[!1,!1,!1,!1,!1];var t=wx.getSystemInfoSync(),n=t.windowWidth,i=t.windowHeight,a=10;a=a*cc.view.getDesignResolutionSize().width/n;var o=wx.getMenuButtonBoundingClientRect().height+wx.getMenuButtonBoundingClientRect().top;this.adStyle=[{left:60,top:o+50},{left:n-120,top:o+50},{left:n/2+30,top:0},{left:140,top:0},{left:n/2-120,top:i-80}],this.initBanner(),this.initVideo(),this.initInterstitial(),this.customHandle=e,this.initCustomAd(0),this.initCustomAd(1),this.initCustomAd(2),this.initCustomAd(3),this.initCustomAd(4)},initBanner:function(){for(var e=0;e<this.WXBannerIdAry.length;e++)this.bannerCreate(e)},bannerCreate:function(e){if(wx.createBannerAd){var t=this;null!=this.wxBannerAds[e]&&(this.wxBannerAds[e].destroy(),this.wxBannerAds[e]=null),this.isWXBannerOnLoad[e]=0;var n=wx.getSystemInfoSync(),i=n.screenWidth/2,a=n.screenHeight;this.wxBannerAds[e]=wx.createBannerAd({adUnitId:t.WXBannerIdAry[e],adIntervals:30,style:{width:300,top:0,left:0}}),this.wxBannerAds[e].onResize(function(){t.wxBannerAds[e].style.left=i-t.wxBannerAds[e].style.realWidth/2+.1,t.wxBannerAds[e].style.top=a-t.wxBannerAds[e].style.realHeight+.1}),this.wxBannerAds[e].onLoad(function(){console.log("\u7b2c"+e+"\u4e2abannerOnload"),t.isWXBannerOnLoad[e]=1}),this.wxBannerAds[e].onError(function(n){console.log("\u7b2c"+e+"\u4e2abannerError:"+n.errMsg),t.isWXBannerOnLoad[e]=2})}},showBanner:function(){for(var e=this,t=this.bannerShowIndex+1,n=0;n<this.WXBannerIdAry.length;n++,t++){if(t=t>=this.WXBannerIdAry.length?0:t,this.wxBannerAds[t]&&1===this.isWXBannerOnLoad[t]){if(this.WXBannerIdAry.length>1&&t==this.bannerShowIndex)break;this.wxBannerAds[t].show().then(function(){e.wxBannerAds[e.bannerShowIndex]&&(e.WXBannerIdAry.length>1&&e.wxBannerAds[e.bannerShowIndex].hide(),e.bannerShowIndex=t)}).catch(function(n){console.log("banner show\u5931\u8d25",n),e.bannerCreate(t)}),console.log("\u663e\u793aBanner",this.bannerShowIndex);break}this.bannerCreate(t)}},hideBanner:function(){if(this.wxBannerAds)for(var e=0;e<this.wxBannerAds.length;e++)null!=this.wxBannerAds[e]&&this.wxBannerAds[e].hide()},initInterstitial:function(){if(wx.createInterstitialAd){var e=this;this.interstitialAd=wx.createInterstitialAd({adUnitId:e.WXInterId}),this.interstitialAd&&this.interstitialAd.onClose(function(){n.interstitialCloseTime=i.getNowTime(),bannerShowFlag[sceneIndex]&&e.showBanner(),e.interstitialAd.load()}),this.interstitialAd&&this.interstitialAd.onError(function(e){console.log("\u63d2\u5c4fonError"),console.log(e)}),this.interstitialAd&&this.interstitialAd.onLoad(function(){console.log("\u63d2\u5c4fonLoad")})}},showInterstitial:function(e){var t=this;null==this.interstitialAd?(this.initInterstitial(),e&&e()):this.interstitialAd.show().then(function(){t.hideBanner()}).catch(function(n){console.log("\u63d2\u5c4fshow\u5931\u8d25",n),t.initInterstitial(),e&&e()})},initVideo:function(){var e=this;this.videoAd=wx.createRewardedVideoAd({adUnitId:e.WXVideoId}),this.videoAd.onError(function(t){e.isVideoLoad=!1,console.log("video error="+t.errMsg)}),this.videoAd.onLoad(function(){e.isVideoLoad=!0}),this.videoAd.onClose(function(t){try{e.isVideoLoad=!1,t&&t.isEnded?rewardCallBack():(console.log("\u4e2d\u9014\u9000\u51fa"),n.videoCallBack&&n.videoCallBack(!1)),n.interstitialCloseTime=i.getNowTime(),videoCloseBack(),e.videoAd.load()}catch(a){console.log(a)}}.bind(this))},createVideoAd:function(e){var t=this;this.videoLoad[e]=0,this.videoAdAry[e]=wx.createRewardedVideoAd({adUnitId:t.videoIdAry[e],multiton:!0}),this.videoAdAry[e].onError(function(n){console.log(e+"video onError="+n.errMsg),t.videoLoad[e]=2}),this.videoAdAry[e].onLoad(function(){console.log(e+"video onLoad"),t.videoLoad[e]=1}),this.videoAdAry[e].onClose(function(a){a&&a.isEnded?rewardCallBack():(console.log("\u4e2d\u9014\u9000\u51fa"),n.videoCallBack&&n.videoCallBack(!1)),videoCloseBack(),n.interstitialCloseTime=i.getNowTime(),t.videoLoad[e]=0,t.videoAdAry[e].load()}.bind(this))},showVideo:function(){if(null==this.videoAd)return this.initVideo(),void videoFailCallBack();var e=this;this.videoAd.show().then(function(){videoShowCallBack()}).catch(function(){console.log("\u6fc0\u52b1\u624b\u52a8\u52a0\u8f7d"),videoFailCallBack(),e.videoAd.load().then(function(){console.log("\u624b\u52a8\u52a0\u8f7d\u6210\u529f")})})},initCustomAd:function(e){if(wx.createCustomAd){var t=this;null!=this.customAd[e]&&(this.customAd[e].destroy(),this.customAd[e]=null),this.customAd[e]=wx.createCustomAd({adUnitId:t.customId[e],adIntervals:30,style:t.adStyle[e]}),this.customAd[e]&&this.customAd[e].onLoad(function(){console.log("customAd["+e+"].onLoad"),t.customLoad[e]=!0}),this.customAd[e]&&this.customAd[e].onError(function(i){console.log("customAd["+e+"].onError",i),t.customLoad[e]=!1,n.adsManager.scheduleOnce(function(){t.initCustomAd(e)},10)}),this.customAd[e]&&this.customAd[e].onHide(function(){console.log("customAd["+e+"].onHide"+t.customAd[e].isShow())}),this.customAd[e]&&this.customAd[e].onClose(function(){console.log("customAd["+e+"].onClose"),t.customLoad[e]=!1,t.initCustomAd(e)})}},isCustomAdLoad:function(e){return!!this.customLoad[e]},showCustomAd:function(e){this.customLoad[e]&&this.customAd[e]&&this.customAd[e].show()},hideCustomAd:function(e){if(void 0===e&&(e=-1),-1!=e)console.log("\u5173\u6389\u539f\u751f"+e+this.customAd[e]),this.customAd[e]?this.customAd[e].hide():this.initCustomAd(e);else for(var t=0;t<this.customId.length;t++)this.hideCustomAd(t)},destroyCustomAd:function(e){console.log("\u9500\u6bc1\u539f\u751f"+e+this.customAd[e]),this.customLoad[e]=!1,this.customAd[e]&&this.customAd[e].destroy(),this.customAd[e]=null}}),cc._RF.pop()},{AdInfo:"AdInfo",TimeModule:"TimeModule"}],Wardrobe:[function(e,t){"use strict";cc._RF.push(t,"c86a2ExBMBPn6W+Lc9Yt8ru","Wardrobe");var n=e("ToyBase"),i=e("EngineCommon"),a=e("GameControl");cc.Class({extends:n,properties:{},start:function(){this.animationName=["Idle-closed","open","close","Idle-opend"],this.init()},toyHandle:function(){a.curScene.forbidOperate(),this.playAnimationByState(1)},catHandle:function(){var e=this.holder.children[0].getComponent("Cat");i.spineAnimationPlay(e.skeleton,"play-yigui")}}),cc._RF.pop()},{EngineCommon:"EngineCommon",GameControl:"GameControl",ToyBase:"ToyBase"}],tdsdk:[function(e,t){"use strict";cc._RF.push(t,"9273ckNCe1NL6zwp+vRC7zK","tdsdk"),window.TDAPP={},t.exports={Init:function(e,t,n,i,a){var o,s,c,r,l,d=a?"http://h5data.talkingdata.net/app/v1":"https://h5.udrig.com/app/wx/v1",h="function"==typeof Symbol&&"symbol"==_typeof2(Symbol.iterator)?function(e){return _typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof2(e)},u=function(e){var t,n,i=0,a=e.document,o=/^(?:text|application)\/javascript/i,s=/^(?:text|application)\/xml/i,c="application/json",r="text/html",l=/^\s*$/,d=function i(a){var h=C({},a||{});for(t in i.settings)void 0===h[t]&&(h[t]=i.settings[t]);(T=h).global&&0==d.active++&&u(T),h.crossDomain||(h.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(h.url)&&RegExp.$2!=e.location.host);var g,S=h.dataType;if(a=/=\?/.test(h.url),"jsonp"==S||a)return a||(h.url=v(h.url,"callback=?")),i.JSONP(h);h.url||(h.url=e.location.toString()),y(h);var T=h.accepts[S];a={};var w=/^([\w-]+:)\/\//.test(h.url)?RegExp.$1:e.location.protocol,A=i.settings.xhr();for(n in h.crossDomain||(a["X-Requested-With"]="XMLHttpRequest"),T&&(-1<(a.Accept=T).indexOf(",")&&(T=T.split(",",2)[0]),A.overrideMimeType&&A.overrideMimeType(T)),(h.contentType||h.data&&"GET"!=h.type.toUpperCase())&&(a["Content-Type"]=h.contentType||"application/x-www-form-urlencoded"),h.headers=C(a,h.headers||{}),A.onreadystatechange=function(){if(4==A.readyState){var e;clearTimeout(g);var t=!1;if(200<=A.status&&A.status<300||304==A.status||0==A.status&&"file:"==w){S=S||(n=A.getResponseHeader("content-type"))&&(n==r?"html":n==c?"json":o.test(n)?"script":s.test(n)&&"xml")||"text",e=A.responseText;try{"script"==S?(0,eval)(e):"xml"==S?e=A.responseXML:"json"==S&&(e=l.test(e)?null:JSON.parse(e))}catch(e){t=e}t?m(t,"parsererror",A,h):p(e,A,h)}else m(null,"error",A,h)}var n},a=!("async"in h)||h.async,A.open(h.type,h.url,a),h.headers)A.setRequestHeader(n,h.headers[n]);return!1===function(e,t){var n=t.context;if(!1===t.beforeSend.call(n,e,t)||!1===u(t))return!1;u(t)}(A,h)?(A.abort(),!1):(0<h.timeout&&(g=setTimeout(function(){A.onreadystatechange=f,A.abort(),m(null,"timeout",A,h)},h.timeout)),A.send(h.data||null),A)};function u(e){if(e.global)return!0}function p(e,t,n){var i=n.context,a="success";n.success.call(i,e,a,t),u(n),g(a,t,n)}function m(e,t,n,i){var a=i.context;i.error.call(a,n,t,e),u(i),g(t,n,i)}function g(e,t,n){var i=n.context;n.complete.call(i,t,e),u(n),(n=n).global&&!--d.active&&u(n)}function f(){}function v(e,t){return(e+"&"+t).replace(/[&?]{1,2}/,"?")}function y(e){var t,n;"object"===h(e.data)&&(e.data=(t=e.data,(n=[]).add=function(e,t){this.push(S(e)+"="+S(t))},function e(t,n,i,a){var o="array"==typeof n;for(var s in n){var c=n[s];a&&(s=i?a:a+"["+(o?"":s)+"]"),!a&&o?t.add(c.name,c.value):(i?"array"==typeof c:"object"===(void 0===c?"undefined":h(c)))?e(t,c,i,s):t.add(s,c)}}(n,t,void 0),n.join("&").replace("%20","+"))),!e.data||e.type&&"GET"!=e.type.toUpperCase()||(e.url=v(e.url,e.data))}d.active=0,d.JSONP=function(t){if(!("type"in t))return d(t);var n,o="jsonp"+ ++i,s=a.createElement("script"),c={abort:function(){o in e&&(e[o]=f),g("abort",c,t)}},r=a.getElementsByTagName("head")[0]||a.documentElement;return t.error&&(s.onerror=function(){c.abort(),t.error()}),e[o]=function(i){clearTimeout(n),delete e[o],p(i,c,t)},y(t),s.src=t.url.replace(/=\?/,"="+o),r.insertBefore(s,r.firstChild),0<t.timeout&&(n=setTimeout(function(){c.abort(),g("timeout",c,t)},t.timeout)),c},d.settings={type:"GET",beforeSend:f,success:f,error:f,complete:f,context:null,global:!0,xhr:function(){return new e.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript",json:c,xml:"application/xml, text/xml",html:r,text:"text/plain"},crossDomain:!1,timeout:0},d.get=function(e,t){return d({url:e,success:t})},d.post=function(e,t,n,i){return"function"==typeof t&&(i=i||n,n=t,t=null),d({type:"POST",url:e,data:t,success:n,dataType:i})},d.getJSON=function(e,t){return d({url:e,success:t,dataType:"json"})};var S=encodeURIComponent;function C(e){return Array.prototype.slice.call(arguments,1).forEach(function(n){for(t in n)void 0!==n[t]&&(e[t]=n[t])}),e}return{ajax:d}}(window),p={deviceId:"",appkey:e||"",appProfile:{versionName:t||"",versionCode:n||"",initTime:"",sdkVersion:"H5+APP+v1.0.5",partner:""},deviceProfile:{pixel:"",language:navigator.language,timezone:(new Date).getTimezoneOffset()/60*-1},msgs:[]},m={type:2,data:{id:"",start:0,duration:0}},g={},f=(new Date).getTime(),v=function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n};function y(e,t,n){if(void 0===t){var i=null;if(document.cookie&&""!=document.cookie)for(var a=document.cookie.split(";"),o=0;o<a.length;o++){var s=a[o];if(s.substring(0,e.length+1)==e+"="){i=decodeURIComponent(s.substring(e.length+1));break}}return i}n=n||{},null===t&&(t="",n.expires=-1);var c="";n.expires&&("number"==typeof n.expires||n.expires.toUTCString)&&("number"==typeof n.expires?(l=new Date).setTime(l.getTime()+864e5*n.expires):l=n.expires,c="; expires="+l.toUTCString());var r=n.path?"; path="+n.path:"",l=n.domain?"; domain="+n.domain:"";n=n.secure?"; secure":"",document.cookie=[e,"=",encodeURIComponent(t),c,r,l,n].join("")}g.localStorage={add:function(e,t){this.addLocalStorage(e,t),"sessionId"!=e&&this.addCookie(e,t)},get:function(e){return this.getLocalStorage(e)||this._getCookie(e)},create:function(){y("__TD_LOCAL")||(this._addCookie(""),window.localStorage)},addCookie:function(e,t){if(!window.localStorage){this.create();var n,i=this.cookieList();i[e]=t;var a=[];for(n in i)a.push(n+"="+i[n]);this._addCookie(a.join(";"))}},_setCookie:function(){this.cookieList(),y("__TD_LOCAL","",{expires:1095,path:"/",domain:location.hostname})},_addCookie:function(e){y("__TD_LOCAL",e,{expires:1095,path:"/",domain:location.hostname})},_getCookie:function(e){var t=this.cookieList();if(t&&t[e])return t[e]},delCookie:function(){},cookieList:function(){var e=y("__TD_LOCAL");return this.format(e)},addLocalStorage:function(e,t){cc.sys.localStorage.setItem("__TD_"+e,t)},delLocalStorage:function(e){cc.sys.localStorage.removeItem("__TD_"+e)},getLocalStorage:function(e){return cc.sys.localStorage.getItem("__TD_"+e)},format:function(e){var t={};if(!e)return t;for(var n=e.split(";"),i=n.length,a=0;a<i;a++){var o=n[a].split("=");2==o.length&&(t[o[0]]=o[1])}return t}},g.sessionStorage={add:function(e,t){cc.sys.localStorage.setItem("__TD_"+e,t)},get:function(e){return cc.sys.localStorage.getItem("__TD_"+e)},remove:function(e){cc.sys.localStorage.removeItem("__TD_"+e)}};var S=!0,C=!1;function T(){this.url=d,this.opts={},this.requestArray=new Array}T.prototype={getAjax:function(e,t,n,i,a){(function(s){var c,r;0<navigator.userAgent.indexOf("MSIE 9.0")?"MSIE6.0"==(c=navigator.appVersion.split(";")[1].replace(/[ ]/g,""))||"MSIE7.0"==c?alert("no support IE6,IE7"):window.XDomainRequest&&((r=new XDomainRequest)?(s.error&&"function"==typeof s.error&&(r.onerror=function(){s.error()}),s.timeout&&"function"==typeof s.timeout&&(r.ontimeout=function(){s.timeout()}),s.success&&"function"==typeof s.success&&(r.onload=function(){s.dataType?"json"==s.dataType.toLowerCase()&&s.success(JSON.parse(r.responseText)):s.success(r.responseText)}),r.open(s.type,s.url),r.send(s.param)):alert("Failed to create XDomainRequest")):S?(w.add("td-unique","true"),S=!1,o=u.ajax({type:e,url:t,data:JSON.stringify(n),dataType:"text",success:i,error:a,complete:function(){S=!(o=void 0),C&&(I.getAjax(),C=!1),w.delLocalStorage("td-unique")}})):C=!0})({url:this.url,type:"POST",param:JSON.stringify(n),success:i})},set:function(e,t,n){this.opts=e,this.send(t,n)},send:function(e,t){this.getAjax("post",this.url,this.opts,e,t)}},(s=window).TDBASE=s.TDBASE||{},TDBASE.cacheName="cacheList",TDBASE.unique=function(e){e.sort();for(var t=[e[0]],n=1;n<e.length;n++)e[n]!==t[t.length-1]&&t.push(e[n]);return t},TDBASE.getArgs=function(){for(var e=new Object,t=s.location.search.substring(1).split("&"),n=0;n<t.length;n++){var i,a=t[n].indexOf("=");-1!=a&&(i=t[n].substring(0,a),a=t[n].substring(a+1),a=decodeURIComponent(a),e[i]=a)}return e},TDBASE.getCommon=function(e){var t=w.get("appkey")?w.get("appkey"):p.appkey;return e={deviceId:p.deviceId,appkey:t,appProfile:p.appProfile,deviceProfile:p.deviceProfile,msgs:e.msg},p.appContext&&(e.appContext=p.appContext),e},TDBASE.getCommonMsg=function(e,t,n,i,a,o){return{type:2,data:{id:e,start:t,status:n,duration:i||0,pages:o?[o]:[],events:a||[]}}},TDBASE.addSessionStart=function(e,t){w.add("lastSession",JSON.stringify({id:m.data.id,start:m.data.start})),n=(n=w.get("td-hold-event"))&&JSON.parse(n);var n=TDBASE.getCommonMsg(m.data.id,m.data.start,t,e,n);TDBASE.addMsg(n),w.delLocalStorage("td-hold-event")},TDBASE.equal=function(e,t){if((void 0===e?"undefined":h(e))!=(void 0===t?"undefined":h(t)))return!1;if(h(e.length)!=h(t.length))return!1;var n=!0,i=[],a=[];for(o in e)"count"===o||"start"===o||i.push(o);for(o in t)"count"===o||"start"===o||a.push(o);if(i.length!=a.length)return!1;for(var o=0,s=a.length;o<s;o++)i.push(a[o]);var c=TDBASE.unique(i);for(o=0,s=c.length;o<s;o++){if(!(c[o]in e&&c[o]in t))return!1;if("object"==h(e[c[o]])&&"object"==h(t[c[o]]))n=TDBASE.equal(e[c[o]],t[c[o]]);else if(e[c[o]]!==t[c[o]])return!1}return n},TDBASE.addGenre=function(e,t,n){if(w.get("sessionMsg")){n&&n(e);var i=(n=JSON.parse(w.get("sessionMsg"))).msg[n.msg.length-1].data[t];if("events"!==t)i.push(e),w.add("sessionMsg",JSON.stringify(n));else{if(0!=i.length){for(var a=!1,o=0;o<i.length;o++)if(TDBASE.equal(i[o],e)){a=!0,i[o].count+=1,i[o].start=e.start;break}a||i.push(e)}else i.push(e);w.add("sessionMsg",JSON.stringify(n))}}},TDBASE.lealSet=function(e){w.add("leavetime",e),w.add("leaveSession",parseInt((e-A.get("SessionStart"))/1e3))},TDBASE.addMsg=function(e){var t;w.get("sessionMsg")?((t=JSON.parse(w.get("sessionMsg"))).msg.push(e),w.add("sessionMsg",JSON.stringify(t))):w.add("sessionMsg",JSON.stringify({msg:[e]}))},(c={autoTrack:!0,currentPage:null,pageStartTime:0,ref:"",logoutCalled:!1,init:function(){for(var e=document.getElementsByTagName("script"),t=0;t<e.length;t++){var n=e[t].getAttribute("td-autoTrack");if("false"===n||!1===n){c.autoTrack=!1;break}}v(window,"pagehide",c.pageLogout),v(window,"beforeunload",c.pageLogout),window.TDAPP=window.TDAPP||{},window.TDAPP.onPage=c.onPage,c.autoTrack&&(c.currentPage=window.location.href,c.ref=document.referrer)},onPage:function(e){c.pageLogout("force"),c.ref=c.currentPage,c.currentPage=e,c.pageStartTime=(new Date).getTime()},pageLogout:function(e){if("force"!==e){if(c.logoutCalled)return;c.logoutCalled=!0}var t=null,n=0,i=null;if(c.autoTrack)t=c.currentPage||window.location.href,n=c.pageStartTime||f,i=c.ref||document.referrer;else{if(!c.currentPage)return;t=c.currentPage,n=c.pageStartTime,i=c.ref||document.referrer}var a=(new Date).getTime();TDBASE.lealSet(a),TDBASE.addGenre({name:t,start:n,duration:parseInt((a-n)/1e3),refer:i},"pages"),"force"===e&&I.getAjax()}}).init(),r={init:function(){try{var e=g.localStorage.get("profile");e&&(e=JSON.parse(e),e=r._transform(e),p.appContext=p.appContext||{},p.appContext.account=e)}catch(e){console.error(e)}},_transform:function(e){return(e=JSON.parse(JSON.stringify(e))).accountId=e.profileId,e.type=e.profileType,delete e.profileType,delete e.profileId,e},login:function(e){r._event(e,"login")},register:function(e){r._event(e,"register")},_event:function(e,t){var n;(e.profileId||/0{1}/.test(e.profileId))&&("number"!=typeof e.profileType||e.profileType!=e.profileType||e.profileType<-1||6<e.profileType&&e.profileType<11||20<e.profileType||((n=r._transform(e)).type=TDAPP.ProfileType[e.profileType]||"",e.profileType=n.type,p.appContext=p.appContext||{},p.appContext.account=n,b.setProfile(n,t),g.localStorage.add("profile",JSON.stringify(e))))}},window.TDAPP=window.TDAPP||{},window.TDAPP.login=r.login,window.TDAPP.register=r.register,window.TDAPP.ProfileType={0:"ANONYMOUS",1:"REGISTERED",2:"SINA_WEIBO",3:"QQ",4:"QQ_WEIBO",5:"ND91",6:"WEIXIN",11:"TYPE1",12:"TYPE2",13:"TYPE3",14:"TYPE4",15:"TYPE5",16:"TYPE6",17:"TYPE7",18:"TYPE8",19:"TYPE9",20:"TYPE10"},r.init(),l={isObject:function(e){return e&&"object"===(void 0===e?"undefined":h(e))},isStrNotEmpty:function(e){return e||/0{1}/.test(e)},isNumber:function(e){return"number"==typeof e&&e==e},isCurrencyTypeAvailabal:function(e){return e&&"string"==typeof e&&3===e.length},_checkParam:function(e){return l.isObject(e)&&l.isStrNotEmpty(e.orderId)&&l.isNumber(e.amount)&&!!l.isCurrencyTypeAvailabal(e.currencyType)||!1},onPlaceOrder:function(e){l._checkParam(e)&&(e={count:1,start:(new Date).getTime(),domain:"iap",id:"placeOrder",params:e},b._saveAndFetch(e))},onOrderPaySucc:function(e){l._checkParam(e)&&((e=JSON.parse(JSON.stringify(e))).paymentType&&l.isStrNotEmpty(e.paymentType)&&(e.payType=e.paymentType),delete e.paymentType,e={count:1,start:(new Date).getTime(),domain:"iap",id:"pay",params:e},b._saveAndFetch(e))},onCancelOrder:function(e){l._checkParam(e)&&(e={count:1,start:(new Date).getTime(),domain:"iap",id:"cancelOrder",params:e},b._saveAndFetch(e))}},window.TDAPP=window.TDAPP||{},window.TDAPP.onPlaceOrder=l.onPlaceOrder,window.TDAPP.onOrderPaySucc=l.onOrderPaySucc,window.TDAPP.onCancelOrder=l.onCancelOrder;var w=g.localStorage,A=g.sessionStorage,I={timedif:void 0,state:1,deviceId:0,sessionId:0,local:[],sendInit:0,set:function(){try{this.setDeviceId(),this.setSession(),this.setSessionTime(),this.setInitTime(),this.setPartner(),this.setResolution(),this.addlastSession(),this.getAjax(1)}catch(e){}},setDeviceId:function(){if(w.get("deviceId"))this.deviceId=w.get("deviceId");else{this.sendInit=1;for(var e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),t=[],n=e.length,i=0;i<16;i++)t[i]=e[0|Math.random()*n];this.deviceId=t.join(""),w.add("deviceId",this.deviceId)}p.deviceId=this.deviceId},setSession:function(){var e,t;if(A.get("sessionId")&&w.get("appkey")==p.appkey?t=A.get("sessionId"):(e=(new Date).getTime(),t=-1<this.deviceId.indexOf("-")?this.deviceId.split("-")[0]+e:this.deviceId+e,this.sendInit=0==this.sendInit?2:this.sendInit,A.add("sessionId",t)),0<32-t.length)for(var n=0,i=32-t.length;n<i;n++)t+="0";32-t.length<0&&(t=t.substring(0,32)),m.data.id=this.sessionId=t},setSessionTime:function(){var e=(new Date).getTime();A.get("SessionStart")&&w.get("appkey")==p.appkey?e=A.get("SessionStart"):A.add("SessionStart",e),m.data.start=parseInt(e)},setInitTime:function(){w.get("initTime")?p.appProfile.initTime=parseInt(w.get("initTime")):(p.appProfile.initTime=f,w.add("initTime",f))},setPartner:function(){var e=i,t=TDBASE.getArgs().td_channelid;e?p.appProfile.partner=e:null!=t&&(A.add("td_channel",t),p.appProfile.partner=t)},setResolution:function(){var e=[window.screen.width,window.screen.height];window.devicePixelRatio&&e.push(window.devicePixelRatio),p.deviceProfile.pixel=e.join("*")},addlastSession:function(){var e=w.get("lastSession");void 0===e&&(w.delLocalStorage("sessionMsg"),w.delLocalStorage("lastSession")),null!=e?((e=JSON.parse(e)).id!=m.data.id&&(e=TDBASE.getCommonMsg(e.id,e.start,3,parseInt(w.get("leaveSession")))),TDBASE.addMsg(e),this.timedif=parseInt((m.data.start-w.get("leavetime"))/1e3),w.get("appkey")&&w.get("appkey")!=p.appkey||(TDBASE.addSessionStart(this.timedif,1),this.addAppInitEvent())):(TDBASE,TDBASE.addSessionStart(0,1),this.addAppInitEvent())},addAppInitEvent:function(){var e;0!=this.sendInit&&(e={id:"init",domain:"app",start:f||(new Date).getTime(),count:1,params:{first:!0}},2==this.sendInit&&(e.params.first=!1),TDBASE.addGenre(e,"events"))},getAjax:function(){var e,t=this,n=new T;localStorage.__TD_sessionMsg||TDBASE.addSessionStart(0,2);var i=JSON.parse(w.get("sessionMsg")),a=TDBASE.getCommon(i),o=localStorage["__TD_td-init-event"];!o||(e=a.msgs[a.msgs.length-1])&&(i=e.data.events,e.data.events=i.concat(JSON.parse(o))),w.delLocalStorage("td-init-event");var s=[];a.msgs.length;for(var c=0;c<a.msgs.length;c++){var r=a.msgs[c];null!=r.data&&(r.data,r.data.status,r.data.pages,r.data.events,(2!==r.data.status||r.data.pages&&0!==r.data.pages.length||r.data.events&&0!==r.data.events.length)&&s.push(r))}s.length,0!==s.length&&(a.msgs=s,w.get("appkey")&&w.get("appkey")!=p.appkey?n.set(a,function(){w.delLocalStorage("sessionMsg"),p.appProfile.initTime=f,w.add("initTime",f),TDBASE.addSessionStart(0,1),t.addAppInitEvent(),t.getAjax()},function(){}):n.set(a,function(){w.delLocalStorage("sessionMsg"),TDBASE.addSessionStart(0,2)},function(){}),w.add("appkey",p.appkey))}};I.set();var b={set:function(e,t,n,i){var a;if((e||/0{1}/.test(e))&&0<arguments.length)try{var o={count:1,start:(new Date).getTime()};if(null!=e&&(o.id="string"!=typeof e?JSON.stringify(e):e),o.label=null!=t?"string"!=typeof t?JSON.stringify(t):t:"",null!=n&&("object"!=(void 0===(a=n)?"undefined":h(a))||"[object object]"!=Object.prototype.toString.call(a).toLowerCase()||a.length||(o.params=n)),i&&"smart"===i)o.type="smart";else if(void 0!==i){if("number"!=typeof i||isNaN(i))return void console.error("value\u53ea\u80fd\u4e3anumber");o.value=i}b._saveAndFetch(o)}catch(e){}},setProfile:function(e,t){e={count:1,start:(new Date).getTime(),domain:"account",id:t,params:e},b._saveAndFetch(e)},_saveAndFetch:function(e){o?TDBASE.addGenre(e,"events",function(e){var t=w.get("td-hold-event"),n=[];if(n.push(e),t){t=JSON.parse(t);for(var i=0;i<t.length;i++)if(TDBASE.equal(t[i],e)){t[i].count+=1,t[i].start=e.start;break}w.add("td-hold-event",JSON.stringify(t))}else w.add("td-hold-event",JSON.stringify(n))}):(TDBASE.addGenre(e,"events"),setTimeout(function(){I.getAjax()},500))},unload:function(){try{I.getAjax()}catch(e){}}};window.TDAPP=window.TDAPP||{},window.TDAPP.onEvent=b.set},onEvent:function(e,t,n){if(window.TDAPP.onEvent(e,t,n),arguments.length>0)try{var i={count:1,start:(new Date).getTime()};if(null!=e&&(i.id="string"!=typeof e?JSON.stringify(e):e),i.label=null!=t?"string"!=typeof t?JSON.stringify(t):t:"",null!=n){var a=function(e){return"object"==_typeof2(e)&&"[object object]"==Object.prototype.toString.call(e).toLowerCase()&&!e.length};a(n)?i.params=n:i.params={params:""}}var o="__TD_td-init-event",s=localStorage[o];if(s){var c=JSON.parse(s);return c.push(i),void localStorage.setItem(o,JSON.stringify(c))}localStorage.setItem(o,"["+JSON.stringify(i)+"]")}catch(r){}}},cc._RF.pop()},{}],tdwxsdk:[function(e,t){"use strict";cc._RF.push(t,"91a73G1wntDiYod/ARsr+Bv","tdwxsdk"),t.exports={Init:function(e,t,n,i,a,o){var s=["1","0","7"],c={device:!0,network:!0,uid:!0},r={sdk:{version:s[0],minorVersion:s[1],build:s[2],platform:"Weapp",partner:o},app:{versionCode:a||"1",versionName:i||"1.0.0",installTime:0,displayName:t,appKey:e,uniqueId:n,channel:o},device:{type:"mobile",softwareConfig:{},hardwareConfig:{},deviceId:{}},networks:[{type:"wifi",available:!1,connected:!1},{type:"cellular",available:!1,connected:!1,current:[]},{type:"unknown",available:!1,connected:!1}],locations:[{}],appContext:{}},l={firstInit:!1,initTime:0,sessionId:"",sessionStartTime:0,appLaunchInfo:null,sendFailTimes:0,bakData:{},Store:{set:function(e,t){try{wx.setStorageSync("TDSDK_"+e,t)}catch(e){}l.bakData["TDSDK_"+e]=t},get:function(e){var t=null;try{t=wx.getStorageSync("TDSDK_"+e)}catch(e){}return t||(t=l.bakData["TDSDK_"+e]||null),t},remove:function(e){try{wx.removeStorageSync("TDSDK_"+e)}catch(e){}delete l.bakData["TDSDK_"+e]},getInfo:function(){try{return wx.getStorageInfoSync()||{}}catch(e){return{}}}},random:function(){for(var e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890",t=e.length,n="",i=0;i<12;i++)n+=e.charAt(Math.floor(Math.random()*t));return n},timestamp:function(){return(new Date).getTime()},deviceId:function(){return"weapp-"+this.timestamp()+"-"+this.random()},getEventId:function(e){if(!e&&!/0{1}/.test(e))return"";var t="";try{t=e.toString()}catch(n){try{t=JSON.stringify(e)}catch(e){}}return t.split(" ")[0].slice(0,64)},addStoreData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t="EVENT_"+l.sessionId,n=l.Store.get(t);n=n&&n.length?n.concat(e):e,l.Store.set(t,n),n.length>=30&&(m.sessionContinue(),m.startLoop())},eventHandle:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e){var n={eventId:e,count:1,startTime:l.timestamp()};if("WeappShare"===e){n.shareTickets=t.shareTickets;var i={};i.user=l.deviceId,i.title=t.title,i.desc=t.desc;var a=t.path;a?a=(a=l.getUrl("",l.getSearchParams(t.path))).substring(1):console.log("\u5206\u4eab\u4e8b\u4ef6\u7684path\u53c2\u6570\u7f3a\u5c11\u6709\u6548\u503c"),i.path=a,n.params=i}l.addStoreData([n])}},getCacheData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.keys(e),n=[],i=[];return t.length&&t.forEach(function(t){var a=e[t];a&&a.sendFail&&a.data&&(n=n.concat(a.data),i.push(t))}),{data:n,keys:i}},sendCacheList:{},updateSendTime:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=r.device.deviceId,i=l.Store.get("uid"),a=l.Store.get("deviceId");return e.forEach(function(o,s){if(!o.device.deviceId.tid&&!o.device.deviceId.uid)if(n.tid){if(o.device.deviceId.tid=n.tid,n.uid)return o.device.deviceId.uid=n.uid,!0}else{if(n.uid)return o.device.deviceId.uid=n.uid,o.device.deviceId.tid=n.uid,!0;if(d.isWaitingForOpenid){if(i)return o.device.deviceId.uid=i,o.device.deviceId.tid=i,n.uid=i,n.tid=i,!0;if(a)o.device.deviceId.tid=a,o.device.deviceId.uid="";else{var c=l.deviceId();n.tid=c,n.uid="",l.Store.set("deviceId",c),o.device.deviceId.tid=c,o.device.deviceId.uid="",d.shouldOverwriteTid=!1}}else o.device.deviceId.tid=n.tid,o.device.deviceId.uid=n.uid}o.action&&o.action.data&&(e[s].action.data.start=t)}),e},getRequestData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=JSON.parse(JSON.stringify(e)),n=l.sendCacheList;if(Object.keys(n).length){var i=l.getCacheData(n);t=t.concat(i.data),i.keys.forEach(function(e){return delete n[e]})}var a=t.length;if(a){var o=[];a>=30?(JSON.stringify(t).length>61440&&o.push(t.splice(0,a/2)),o.push(t)):o.push(t),o.forEach(function(e){var t=l.timestamp();n[t]={data:e,sendFail:!1};var i=l.updateSendTime(e,l.timestamp());l.request(t,i)})}},request:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];wx.request({url:"https://h5.udrig.com/app/wx/v1",data:JSON.stringify(t),method:"POST",success:function(t){200===t.statusCode&&(delete l.sendCacheList[e],l.sendFailTimes=0,g.appIsHide||(clearTimeout(m.timeout),m.timeout=null,m.startLoop()))},fail:function(){g.appIsHide?(l.Store.set("RESEND_"+e,t),delete l.sendCacheList[e]):(l.sendCacheList[e].sendFail=!0,l.sendFailTimes<5&&l.sendFailTimes++)}})},getUrl:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object.keys(t),i=n.sort()||[],a=i.length?e+"?":e;return i.forEach(function(e,n){0!==n&&(a+="&"),a+=e+"="+t[e]}),a},getSearchParams:function(e){if(!e)return{};var t={};return e.split("&").forEach(function(e){var n=e.split("=");2===n.length&&(t[n[0]]=n[1])}),t}},d={shouldOverwriteTid:!0,isWaitingForOpenid:!0,isFirst:!0,init:function(){var e=this,t=l.Store.get("deviceId"),n=l.Store.get("uid");if(n){var i=t||n;e.setData(i,n)}else new Promise(this.getOpenid).then(function(n){var i=void 0;t?i=t:(i=n,l.Store.set("deviceId",n)),e.setData(i,n),l.Store.set("uid",n),d.isWaitingForOpenid=!1}).catch(function(){var n;n=t||l.deviceId(),e.setData(n,""),d.shouldOverwriteTid&&l.Store.set("deviceId",n),d.isWaitingForOpenid=!1})},setData:function(e,t){d.shouldOverwriteTid?r.device.deviceId={tid:e,uid:t}:r.device.deviceId.uid=t,c.uid=!1,m.getAppProfile()},getOpenid:function(e){var t=cc.sys.localStorage.getItem("OpenId");null!=t&&""!=t||(t=Math.round(4294967296*Math.random()).toString(),cc.sys.localStorage.setItem("OpenId",t)),e(t)}},h={sendTime:0,statusType:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[],n=JSON.parse(JSON.stringify(r)),i={domain:e.domain,name:e.name,data:e.data};n.ts=e.data.start||l.timestamp(),n.action=i,t.push(n),l.getRequestData(t)},dataType:function(e,t){var n=this.getStoreList(e,t);l.getRequestData(n)},getEventType:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.pageEvent)return{domain:"page",name:"leave"};if(e.eventId){var t=e.eventId,n={};switch(t){case"register":n={domain:"account",name:"register"};break;case"login":n={domain:"account",name:"login"};break;case"WeappShare":n={domain:"user",name:"share"};break;case"WeappPullDownRefresh":n={domain:"page",name:"pullDownRefresh"};break;case"WeappReachBottom":n={domain:"page",name:"reachBottom"};break;default:n={domain:"appEvent",name:""}}return n}},getStoreList:function(e,t){var n=this,i=[],a=e||l.sessionId,o=JSON.stringify(r),s=l.Store.get("EVENT_"+a);return s&&s.length&&(s.forEach(function(e){var a=n.getEventType(e),s=JSON.parse(o);t&&s.appContext&&(s.appContext.sessionStartTime=t);var c=JSON.parse(JSON.stringify(e));c.pageEvent&&delete c.pageEvent,"login"!==c.eventId&&"register"!==c.eventId&&(c.status=2),"login"!==c.eventId&&"register"!==c.eventId||delete c.eventId;var r={domain:a.domain,name:a.name,data:c};s.ts=c.startTime?c.startTime:l.timestamp(),s.action=r,i.push(s)}),l.Store.remove("EVENT_"+a)),i}},u={switchType:function(e){var t="";switch(e){case 0:t="ANONYMOUS";break;case 1:t="REGISTERED";break;case 2:t="SINA_WEIBO";break;case 3:t="QQ";break;case 4:t="QQ_WEIBO";break;case 5:t="ND91";break;case 6:t="WEIXIN";break;case 11:t="TYPE1";break;case 12:t="TYPE2";break;case 13:t="TYPE3";break;case 14:t="TYPE4";break;case 15:t="TYPE5";break;case 16:t="TYPE6";break;case 17:t="TYPE7";break;case 18:t="TYPE8";break;case 19:t="TYPE9";break;case 20:t="TYPE10"}return t},handleData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];if(e.accountId||/0{1}/.test(e.accountId)){if("number"!=typeof e.accountType||e.accountType<-1||e.accountType>6&&e.accountType<11||e.accountType>20)console.warn("\u8bf7\u4e0a\u4f20\u6b63\u786e\u7684accountType");else if(u.updateAccountInfo("account",e),"register"===t||"login"===t){var n=Object.assign({eventId:t},e);l.addStoreData([n])}}else console.warn("accountId\u4e3a\u5fc5\u586b\u5b57\u6bb5\uff01")},updateAccountInfo:function(e,t){l.Store.set(e,t),u.assignAccount(t)},setAccountInfo:function(e){var t=l.Store.get(e);"[object Object]"===Object.prototype.toString.call(t)&&u.assignAccount(t)},assignAccount:function(e){e.type=u.switchType(e.accountType),delete e.accountType,r.appContext.account=e}},p=!1,m={timeout:null,init:function(){var e=wx.getLaunchOptionsSync();l.appLaunchInfo=JSON.parse(JSON.stringify(e)),l.appLaunchInfo.scene=e.scene?e.scene.toString():"",d.init(),m.judgeRequireData(),m.getLocalParams(),m.getSystemInfo(),m.getNetwork()},launchRequest:function(){h.statusType({domain:"app",name:"init",data:{first:!0}})},sessionStart:function(e){var t=l.appLaunchInfo||{},n={status:1,duration:0,name:t.path,scene:t.scene,query:t.query||{},shareTicket:t.shareTicket,referrerInfo:t.referrerInfo};e&&m.setNewSession(),n.start=l.Store.get("session_time")||l.timestamp(),n.url=l.getUrl(n.name,n.query),h.statusType({domain:"session",name:"begin",data:n})},sessionContinue:function(){h.dataType()},sessionEnd:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={status:3,start:e.startTime,duration:e.duration};h.statusType({domain:"session",name:"end",data:t})},sendTmpSession:function(){m.sessionContinue(),m.startLoop()},startLoop:function(){m.timeout&&(clearTimeout(m.timeout),m.timeout=null);var e=3e3*(l.sendFailTimes+1);m.timeout=setTimeout(function(){m.sendTmpSession()},e)},judgeRequireData:function(){r.app.appKey||(r.app.appKey="",console.error("\u8bf7\u586b\u5199\u60a8\u5728TalkingData\u7533\u8bf7\u7684App ID")),r.app.displayName||(r.app.displayName="appname",console.error("\u8bf7\u586b\u5199\u60a8\u7684\u5c0f\u7a0b\u5e8f\u540d\u79f0"))},getLocalParams:function(){var e=l.Store.get("initTime");e?l.initTime=e:(l.initTime=l.timestamp(),l.Store.set("initTime",l.initTime),l.firstInit=!0),r.app.installTime=l.initTime,l.appLaunchInfo.query;var t=o;r.app.channel=t,u&&u.setAccountInfo("account"),m.setNewSession()},setNewSession:function(){l.sessionId=l.deviceId(),l.sessionStartTime=l.timestamp(),l.Store.set("session_time",l.sessionStartTime),r.appContext.sessionId=l.sessionId,r.appContext.sessionStartTime=l.sessionStartTime},getLaunchInfo:function(){var e=JSON.parse(JSON.stringify(m.launchOptions));return e.type="appLaunch",e},getAppProfile:function(){if(!p){var e=!0;["device","network","uid"].forEach(function(t){c[t]&&(e=!1)}),e&&(p=!0,this.startRequest())}},startRequest:function(){l.firstInit&&m.launchRequest(),this.sessionStart(),this.startLoop()},getLocation:function(){wx.getLocation({type:"wgs84",complete:function(e){if(e.longitude||e.latitude||e.horizontalAccuracy||e.verticalAccuracy){var t=r.locations[0];t.lng=e.longitude,t.lat=e.latitude,t.hAccuracy=e.horizontalAccuracy,t.vAccuracy=e.verticalAccuracy,t.speed=e.speed,t.altitude=e.altitude,t.ts=(new Date).getTime()}}})},getNetwork:function(){wx.getNetworkType({complete:function(e){var t=r.networks,n=e.networkType;"wifi"===n?(t[0].available=!0,t[0].connected=!0):"unknown"===n?(t[2].available=!0,t[2].connected=!0):"none"!==n&&(t[1].available=!0,t[1].connected=!0,t[1].current.push({type:n})),c.network=!1,m.getAppProfile()}})},getSystemInfo:function(){wx.getSystemInfo({complete:function(e){if(e.model||e.system||e.SDKVersion){var t={model:e.model,pixel:e.screenWidth+"*"+e.screenHeight+"*"+e.pixelRatio,densityDpi:e.pixelRatio,brand:e.brand},n={os:e.system,local:e.language,language:"zh_CN",osVersionCode:e.version,timezone:-(new Date).getTimezoneOffset()/60,mpVersion:e.SDKVersion};r.device.hardwareConfig=t,r.device.softwareConfig=n}c.device=!1,m.getAppProfile()}})}},g={isHide2Show:!1,appIsHide:!1,show:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(g.appIsHide=!1,g.getlastTmpData(),g.isHide2Show){var t=l.Store.get("TMP_time_end_"+l.sessionId),n=e.scene?e.scene.toString():"";e.scene&&n===l.appLaunchInfo.scene?l.timestamp()-t>3e4?g.sessionRestart(t):l.Store.remove("TMP_time_end_"+l.sessionId):(l.appLaunchInfo=JSON.parse(JSON.stringify(e)),l.appLaunchInfo.scene=n,g.sessionRestart(t)),g.isHide2Show=!1,m.startLoop()}},sessionRestart:function(e){var t=l.Store.get("TMP_time_start_"+l.sessionId),n={startTime:t,duration:parseInt((e-t)/1e3)};m.sessionEnd(n),l.Store.remove("TMP_time_start_"+l.sessionId),l.Store.remove("TMP_time_end_"+l.sessionId),l.Store.remove("session_time"),m.sessionStart(!0)},hide:function(){g.appIsHide=!0,clearTimeout(m.timeout),m.timeout=null,m.sessionContinue(),g.isHide2Show=!0,l.Store.set("TMP_time_start_"+l.sessionId,l.Store.get("session_time")),l.Store.set("TMP_time_end_"+l.sessionId,l.timestamp())},getlastTmpData:function(){var e=[],t=l.Store.getInfo().keys||[],n=void 0,i=void 0;t&&t.length&&(n=t.filter(function(e){return e.indexOf("TDSDK_EVENT")>-1}),i=t.filter(function(e){return e.indexOf("TDSDK_RESEND")>-1})),n&&n.length&&(n.forEach(function(t){var n={};t.split("_")[2],n.id=t.split("_")[2],n.time=n.id.split("-")[1],e.push(n)}),g.sendLastTmpData(e)),i&&i.length&&i.forEach(function(e){wx.getStorage({key:e,success:function(t){l.getRequestData(t.data),wx.removeStorage({key:e,success:function(){}})}})})},sendLastTmpData:function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach(function(e){h.dataType(e.id,e.time)})}};window.onEvent=function(){console.log("event",arguments);var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=l.getEventId(e.id);if(t){var n={};n.eventId=t,n.label=l.getEventId(e.label),n.count=e.count||1,n.params=e.params,n.startTime=l.timestamp(),void 0!==e.value?"number"!=typeof e.value?console.error('\u81ea\u5b9a\u4e49\u4e8b\u4ef6"'+t+'"\u4e2dvalue\u5bf9\u5e94\u7684\u503c\u7684\u7c7b\u578b\u9700\u4e3aNumber\u7c7b\u578b'):isNaN(e.value)?console.error('\u81ea\u5b9a\u4e49\u4e8b\u4ef6"'+t+'"\u4e2d\u8bf7\u8f93\u5165\u6709\u6548\u7684Number\u7c7b\u578b\u6570\u503c'):(n.value=e.value,l.addStoreData([n])):l.addStoreData([n])}},m.init(),wx.onShow(g.show),wx.onHide(g.hide)},onEvent:function(e,t,n){window.onEvent(e,t,n)}},cc._RF.pop()},{}],testItem:[function(e,t){"use strict";cc._RF.push(t,"8bf93TsKENACaZsQHqN8Pya","testItem");var n=e("GameControl");cc.Class({extends:cc.Component,properties:{animName:cc.Label},start:function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchBegan,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this)},init:function(e,t){void 0===t&&(t=0),this.name=e,this.animName.string=e,this.type=t},onTouchBegan:function(e){this._moveFlag=!1,this.lastPos=e.touch.getLocation()},onTouchMove:function(e){var t=e.touch.getLocation();0==this._moveFlag&&Math.abs(t.x-this.lastPos.x)>5&&Math.abs(t.y-this.lastPos.y)>5&&(this._moveFlag=!0)},onTouchEnd:function(e){var t=e.touch.getLocation();0==this._moveFlag&&Math.abs(t.x-this.lastPos.x)<=5&&Math.abs(t.y-this.lastPos.y)<=5&&(0==this.type?(console.log("\u64ad\u653e\u52a8\u753b"+this.name),n.curScene.playAnimation(this.name)):(console.log("\u73a9\u5177"+this.name),n.curScene.updateToy(this.name))),this._moveFlag=!1}}),cc._RF.pop()},{GameControl:"GameControl"}],test:[function(e,t){"use strict";cc._RF.push(t,"05ee6t7q9NIY43K0S03OMXy","test");var n=e("GameControl");cc.Class({extends:cc.Component,properties:{sk:sp.Skeleton,scrollView:cc.ScrollView,toyScrollView:cc.ScrollView,itemPrefab:cc.Prefab,toggle:cc.Toggle,catNode:cc.Node,catNode1:cc.Node,testToy:cc.Node,testPosNode:cc.Node,testPrefab:cc.Prefab,toyNode:cc.Node},onLoad:function(){n.curScene=this,cc.director.getPhysicsManager().enabled=!0,cc.director.getPhysicsManager().debugDrawFlags=cc.PhysicsManager.DrawBits.e_aabbBit|cc.PhysicsManager.DrawBits.e_pairBit|cc.PhysicsManager.DrawBits.e_centerOfMassBit|cc.PhysicsManager.DrawBits.e_jointBit|cc.PhysicsManager.DrawBits.e_shapeBit},start:function(){var e;this.arrAnim=this.sk.skeletonData._skeletonCache.animations,this.slots=this.sk.skeletonData._skeletonCache.slots,console.log(this.sk.skeletonData);for(var t=0;t<this.arrAnim.length;t++){var n=cc.instantiate(this.itemPrefab);n.parent=this.scrollView.content,e=n.height,n.y=-e/2-t*e,n.getComponent("testItem").init(this.arrAnim[t].name)}this.scrollView.content.height=this.scrollView.content.childrenCount*e;for(var i=this.toyNode.children,a=0;a<i.length;a++){var o=cc.instantiate(this.itemPrefab);o.parent=this.toyScrollView.content,e=o.height,o.y=-e/2-a*e,o.getComponent("testItem").init(i[a].name,1)}this.toyScrollView.content.height=this.toyScrollView.content.childrenCount*e,console.log(this.testPrefab)},updateAnim:function(){var e;this.scrollView.content.removeAllChildren(),this.arrAnim=this.sk.skeletonData._skeletonCache.animations,this.slots=this.sk.skeletonData._skeletonCache.slots,console.log(this.slots);for(var t=0;t<this.arrAnim.length;t++){var n=cc.instantiate(this.itemPrefab);n.parent=this.scrollView.content,e=n.height,n.y=-e/2-t*e,n.getComponent("testItem").init(this.arrAnim[t].name)}this.scrollView.content.height=this.scrollView.content.childrenCount*e},btnPlay:function(){},playAnimation:function(e){this.sk.setAnimation(0,e,this.toggle.isChecked)},updateSkin:function(){},InteractionHandle:function(){var e=this,t=this.testToy.getComponent("ToyBase");console.log(t);var n=t.holder.convertToWorldSpaceAR(cc.v2(0,0));n=this.catNode.parent.convertToNodeSpaceAR(n),cc.tween(this.catNode).to(.5,{position:n}).call(function(){e.catNode.parent=t.holder,e.catNode.position=cc.v2(0,0),e.catNode.scale=1}).delay(.3).call(function(){t.handleAfterPlace()}).start(),t.holder1&&(n=t.holder1.convertToWorldSpaceAR(cc.v2(0,0)),n=this.catNode1.parent.convertToNodeSpaceAR(n),cc.tween(this.catNode1).to(.5,{position:n}).call(function(){e.catNode1.parent=t.holder1,e.catNode1.position=cc.v2(0,0),e.catNode1.scale=1}).delay(.3).call(function(){t.handleAfterPlace()}).start())},toyInteractionEnd:function(){},btnLeft:function(){this.testPosNode.x-=1},btnRight:function(){this.testPosNode.x+=1},btnUp:function(){this.testPosNode.y+=1},btnDown:function(){this.testPosNode.y-=1},btnPrintPos:function(){console.log(this.testPosNode.x,this.testPosNode.y)},btnSaveJson:function(){for(var e={},t=cc.find("Canvas/tracks").children,i=0;i<t.length;i++)for(var a=t[i].children,o=0;o<a.length;o++){var s=a[o].children;e[a[o].name]=[];for(var c=0;c<s.length;c++){var r={};r.trackIndex=i,r.name=s[c].name,void 0!==n.ToyType[s[c].name]?(r.posX=s[c].x,r.posY=s[c].y,r.index=n.ToyType[s[c].name],e[a[o].name].push(r)):console.log(s[c].name+"\u672a\u627e\u5230\u5bf9\u5e94\u7684ToyType\u7c7b\u578b\uff0c\u8bf7\u68c0\u67e5")}}console.log(e),this.saveForBrowser(JSON.stringify(e),"toyMsg")},saveForBrowser:function(e,t){if(cc.sys.isBrowser){cc.log("\u6d4f\u89c8\u5668");var n=new Blob([e],{type:"application/json"}),i=document.createElement("a");i.download=t,i.innerHTML="Download File",null!=window.webkitURL&&(i.href=window.webkitURL.createObjectURL(n)),i.click()}},updateToy:function(e){for(var t=this.toyNode.children,n=0;n<t.length;n++)-1!=t[n].name.indexOf(e)?(t[n].x=1e3,t[n].active=!0,this.testToy=t[n]):t[n].active=!1},btnTest:function(){this.testToy?(console.log("\u52a8\u753b\u6d4b\u8bd5"),this.testToy=!1,this.toyScrollView.node.active=!1,this.scrollView.node.active=!0):(console.log("\u73a9\u5177\u6d4b\u8bd5"),this.testToy=!0,this.toyScrollView.node.active=!0,this.scrollView.node.active=!1)}}),cc._RF.pop()},{GameControl:"GameControl"}],ts:[function(e,t){"use strict";cc._RF.push(t,"6ed54tcRGFLF6tnsufpEDZ8","ts"),cc._RF.pop()},{}]},{},["APKAd","AcceleratePanel","AdInfo","AdsManager","Arena","AudioModule","Balloon","Bathtub","Bed","BlackBoard","Boiler","Bubble","Cabinet","Candy","CandyFloss","Cat","ChannelCommon","ChooseCatPanel","ChooseItem","Combination","CommonPanel","DIYCabinet","DailyGiftPanel","DecorationItem","DemandCtrl","DessertCabinet","DestroyCtrl","DisplayWindow","Divination","DollMachine","EngineCommon","EvaluatePanel","FishingCtrl","Flight","FreshFlowers","GIF","GIFSprite","Game","GameCommon","GameConfig","GameControl","Genie","GiftCtrl","Ground","Harp","Home","HuaweiAd","IOSAd","LZW","LanguageComponet","LanguageModule","LoadResModule","Loading","LoadingCtrl","LogCommon","Lounge","MagicBook","MagicEgg","MagicMirror","MagicVine","Main","Massage","MathModule","MiniGamePanel","MiniGameRemindPanel","MoveItem","MyProgressBar","MysteryShop","NativeControl","NativePlatformCommon","OPPOAd","ObjModule","PanelBase","Petal","Photograph","Piranha","Potion","PrivateRoom","PurchaseItem","PurchasePanel","PushConfig","PushControl","PushGameBtn","PushItem","PushItemRemark","PushNode","PushPanel","QQAd","RemindPanelCtrl","ScrollView","SignPanel","Sketch","SlidePool","StatisticsModule","StorageModule","Swing","Synthesize","TTAd","TestToy","TimeModule","ToyBase","Transfiguration","Tree","VIVOAd","Vending","WXAd","Wardrobe","tdsdk","tdwxsdk","test","testItem","ts"]);